<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ejson (ejson) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>ejson</h1>
<h2 class="modsummary">
  Main module of ejson library.</h2>
<div class="description">
<p>
  Main module of ejson library</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-ejson">ejson() = binary()</h3></div>
    <div class="type"><h3 id="type-ejson">ejson() = binary()</h3></div>
    <div class="type"><h3 id="type-ejson_attr">ejson_attr() = atom() | string()</h3></div>
    <div class="type"><h3 id="type-ejson_attr">ejson_attr() = atom() | string()</h3></div>
    <div class="type"><h3 id="type-ejson_internal">ejson_internal() = #{} | term()</h3></div>
    <div class="type"><h3 id="type-ejson_internal">ejson_internal() = #{} | term()</h3></div>
    <div class="type"><h3 id="type-ejson_op">ejson_op() = add | get | rm | update</h3></div>
    <div class="type"><h3 id="type-ejson_op">ejson_op() = add | get | rm | update</h3></div>
    <div class="type"><h3 id="type-ejson_val">ejson_val() = #{} | term() | undefined</h3></div>
    <div class="type"><h3 id="type-ejson_val">ejson_val() = #{} | term() | undefined</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="decode/1">decode(Json) -&gt; JsonInternal</h3>

<ul class="type">
<li><code>Json = ejson()</code></li><li><code>JsonInternal = ejson_internal()</code></li></ul>
<div class="description">

<p>  
Decodes a ejson() object into ejson_internal() representation.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; ejson:decode(Json).
  #{&lt;&lt;"attr1"&gt;&gt; =&gt; &lt;&lt;"value1"&gt;&gt;}</pre>
</div></div>
<div class="function">
<h3 id="encode/1">encode(JsonInternal) -&gt; Json</h3>

<ul class="type">
<li><code>JsonInternal = ejson_internal()</code></li><li><code>Json = ejson()</code></li></ul>
<div class="description">

<p>  
Encodes a ejson_internal() representation into an ejson() object.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = #{&lt;&lt;"attr1"&gt;&gt; =&gt; &lt;&lt;"value1"&gt;&gt;}.
  &gt; ejson:encode(Json).
  "{\"attr1\":\"value1\"}"</pre>
</div></div>
<div class="function">
<h3 id="add/3">add(Attr, Value, Json) -&gt; NewJson</h3>

<ul class="type">
<li><code>Attr = ejson_attr()</code></li><li><code>Value = ejson_val()</code></li><li><code>Json = ejson()</code></li><li><code>NewJson = ejson()</code></li></ul>
<div class="description">

<p>  
Adds attribute 'Attr' with value 'Value' to a Json string.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = attr2.
  &gt; Value = &lt;&lt;"value2"&gt;&gt;.
  &gt; ejson:add(Attr, Value, Json).
  "{\"attr2\":\"value2\",\"attr1\":\"value1\"}"</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = "attr2.attr3".
  &gt; Value = &lt;&lt;"value2"&gt;&gt;.
  &gt; ejson:add(Attr, Value, Json).
  "{\"attr2\":{\"attr3\":\"value2\"},\"attr1\":\"value1\"}"</pre>
</div></div>
<div class="function">
<h3 id="get/2">get(Attr, Json) -&gt; JsonValue</h3>

<ul class="type">
<li><code>Attr = ejson_attr()</code></li><li><code>Json = ejson()</code></li><li><code>JsonValue = ejson_val()</code></li></ul>
<div class="description">

<p>  
Get the value associated with 'Attr' from a Json string.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = attr2.
  &gt; ejson:get(Attr, Json).
  value1</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":{\"attr2\":\"value2\"}}".
  &gt; Attr = attr1.
  &gt; ejson:get(Attr, Json).
  "{\"attr2\":\"value2\"}"</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":{\"attr2\":\"value2\"}}".
  &gt; Attr = "attr1.attr2".
  &gt; ejson:get(Attr, Json).
  value2</pre>
</div></div>
<div class="function">
<h3 id="rm/2">rm(Attr, Json) -&gt; NewJson</h3>

<ul class="type">
<li><code>Attr = ejson_attr()</code></li><li><code>Json = ejson()</code></li><li><code>NewJson = ejson()</code></li></ul>
<div class="description">

<p>  
Remove attribute 'Attr' from a Json string.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = attr1.
  &gt; ejson:rm(Attr, Json).
  "{}"</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":{\"attr2\":\"value2\"}}".
  &gt; Attr = "attr1.attr2".
  &gt; ejson:rm(Attr, Json).
  "{\"attr1\":{}}".</pre>
</div></div>
<div class="function">
<h3 id="update/3">update(Attr, Value, Json) -&gt; NewJson</h3>

<ul class="type">
<li><code>Attr = ejson_attr()</code></li><li><code>Value = ejson_val()</code></li><li><code>Json = ejson()</code></li><li><code>NewJson = ejson()</code></li></ul>
<div class="description">

<p>  
Updates attribute 'Attr' with value 'Value' in a Json string.</p>
 
  <p>Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = attr1.
  &gt; Value = &lt;&lt;"value2"&gt;&gt;.
  &gt; ejson:add(Attr, Value, Json).
  "{\"attr1\":\"value2\"}"</pre>
</div></div>
<div class="function">
<h3 id="batch/2">batch(Actions, Json) -&gt; NewJson</h3>

<ul class="type">
<li><code>Actions = [Action, ...]</code></li><li><code>Action = {Attr, Op} | {Attr, Value, Op}</code></li><li><code>Attr = ejson_attr()</code></li><li><code>Value = ejson_val()</code></li><li><code>Op = ejson_op()</code></li><li><code>Json = ejson()</code></li><li><code>NewJson = ejson()</code></li></ul>
<div class="description">

<p>
  Performs 'Actions' on 'Json' ejson() object. Get operations are ignored, use
  get_batch to fetch multiple attribute values.
  This function does not use the json_prep/4 function. This is because we don't
  want to encode the result into ejson() after each operation.
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr = "attr1"
  &gt; Value = &lt;&lt;"value2"&gt;&gt;.
  &gt; ejson:batch([{Attr, Value, update}], Json).
  "{\"attr1\":\"value2\"}"</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr1\":\"value1\"}".
  &gt; Attr1 = attr1.
  &gt; Attr2 = attr2
  &gt; Value = &lt;&lt;"value2"&gt;&gt;.
  &gt; ejson:batch([{Attr2, Value, add}, {Attr1, rm}], Json).
  "{\"attr2\":\"value2\"}".</pre>
</div></div>
<div class="function">
<h3 id="get_batch/2">get_batch(Attrs, Json) -&gt; Values</h3>

<ul class="type">
<li><code>Attrs = [Attr, ...]</code></li><li><code>Attr = ejson_attr()</code></li><li><code>Json = ejson()</code></li><li><code>Values = [Value]</code></li><li><code>Value = ejson_val()</code></li></ul>
<div class="description">

<p>
  Get all attributes specified in 'Attrs'. The order of the returned values is
  the same as the order of the specified attributes.
  Example:
  </p><pre class="sh_erlang">  &gt; Json = "{\"attr2\":{\"attr3\":\"value2\"},\"attr1\":\"value1\"}".
  &gt; ejson:get_batch([attr1, "attr2.attr3"], Json).
  [&lt;&lt;"value1"&gt;&gt;, &lt;&lt;"value2"&gt;&gt;]</pre>
</div></div>
<div class="function">
<h3 id="new/1">new(Actions) -&gt; NewJson</h3>

<ul class="type">
<li><code>Actions = [Action, ...]</code></li><li><code>Action = {Attr, Op} | {Attr, Value, Op}</code></li><li><code>Attr = ejson_attr()</code></li><li><code>Value = ejson_val()</code></li><li><code>Op = ejson_op()</code></li><li><code>NewJson = ejson()</code></li></ul>
<div class="description">

<p>
  Performs 'Actions' and creates a new ejson() object.
  See ejson:batch/2 for more details.
  Example:
  </p><pre class="sh_erlang">  &gt; Attr = "attr1.attr2"
  &gt; Value = &lt;&lt;"value1"&gt;&gt;.
  &gt; ejson:new([{Attr, Value, add}]).
  "{\"attr1\":{\"attr2\":\"value1\"}}"</pre><p>
  Example:
  </p><pre class="sh_erlang">  &gt; Attr = "attr1.attr2"
  &gt; Value = &lt;&lt;"value1"&gt;&gt;.
  &gt; ejson:new([{Attr, Value, add}, {Attr, rm}]).
  "{\"attr1\":{}}"</pre>
</div></div></div>

<authors>

<aname>Taddic</aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

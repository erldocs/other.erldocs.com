<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>xapian_common (xapian-erlang-bindings) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>xapian_common</h1>
<h2 class="modsummary">This module contains functions, which are used by other modules.</h2>
<div class="description">
<p>This module contains functions, which are used by other modules.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-x_resource_appender">x_resource_appender() = {<a href="xapian_type.html#type-x_state" class="seealso">xapian_type:x_state()</a>, pid()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="read_maybe/2">read_maybe(Fn, Bin) -&gt; {Result, Bin} | {undefined, Bin}</h3>

<ul class="type">
<li><code>Fn = (Bin) -&gt; Result</code></li><li><code>Bin = binary()</code></li><li><code>Result = term()</code></li></ul>
<div class="description">

<p>If the value is defined, then read it with <code>Fn</code> function.
  Otherwise, the value is <code>undefined</code>.</p>
</div></div>
<div class="function">
<h3 id="read_strings/1">read_strings(Bin) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="read_slot_and_values/1">read_slot_and_values(Bin) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="read_string/1">read_string(Bin) -&gt; {Str, Bin}</h3>

<ul class="type">
<li><code>Bin = binary()</code></li><li><code>Str = x_string() (see module xapian_type)</code></li></ul>
<div class="description">

<p>Split the binary on a string and a tail.</p>
</div></div>
<div class="function">
<h3 id="string_to_binary/1">string_to_binary(Str) -&gt; Bin</h3>

<ul class="type">
<li><code>Str = chardata() (see module unicode)</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Convert characters into a binary.</p>
</div></div>
<div class="function">
<h3 id="append_iolist/2">append_iolist(Str, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append iolist as a list of bytes.</p>
</div></div>
<div class="function">
<h3 id="append_string/2">append_string(Str, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append characters as an unicode string.</p>
</div></div>
<div class="function">
<h3 id="append_uint/2">append_uint(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Encode to unsigned <code>int32_t</code> (for example, it is <code>Xapian::valueno</code>).</p>
</div></div>
<div class="function">
<h3 id="append_uint16/2">append_uint16(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Encode to unsigned <code>int16_t</code> (for example, it is a tcp port).</p>
</div></div>
<div class="function">
<h3 id="read_uint/1">read_uint(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read an unsigned integer <code>int32_t</code>.</p>
</div></div>
<div class="function">
<h3 id="append_int8/2">append_int8(Num, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a unsigned integer <code>int8_t</code>.</p>
</div></div>
<div class="function">
<h3 id="append_int/2">append_int(Num, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a signed integer <code>int32_t</code>.</p>
</div></div>
<div class="function">
<h3 id="append_uint8/2">append_uint8(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a signed integer <code>uint8_t</code>.</p>
</div></div>
<div class="function">
<h3 id="append_param/2">append_param(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a parameter or a field as <code>uint8_t</code>.
  It is used primarily for encoding command types, that are handled inside
  <code>switch</code> constructings on the C++ side.</p>
</div></div>
<div class="function">
<h3 id="append_flags/2">append_flags(Flags, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append flags, used in <code>XapianErlangDriver::decodeParserFeatureFlags</code>.</p>
</div></div>
<div class="function">
<h3 id="append_stop/1">append_stop(Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a special parameter, which shows the end of the list of commands.
  Append 0, because it is easy to handle it inside the <code>while</code> construction.</p>
</div></div>
<div class="function">
<h3 id="read_uint8/1">read_uint8(Bin) -&gt; term()
</h3>


<div class="description">

<p>Append an unsigned byte (<code>uint8_t</code>).</p>
</div></div>
<div class="function">
<h3 id="append_document_id/2">append_document_id(Id, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a document identifier (as <code>uint32_t</code>).</p>
</div></div>
<div class="function">
<h3 id="append_unique_document_id/2">append_unique_document_id(Id, Bin) -&gt; term()
</h3>


<div class="description">

<p>Appends a document id or a unique term.
  Add a prefix tag (1,2) also.</p>
</div></div>
<div class="function">
<h3 id="read_document_id/1">read_document_id(Bin) -&gt; term()
</h3>


<div class="description">

<p>Zero id will be replaced by <code>undefined</code>.</p>
</div></div>
<div class="function">
<h3 id="read_db_id/1">read_db_id(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a database number (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="read_document_count/1">read_document_count(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a count of documents (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="read_document_length/1">read_document_length(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a document length (double).
  This value is used as, for example,
  "an average length of document in the list".</p>
</div></div>
<div class="function">
<h3 id="read_term_count/1">read_term_count(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a term count (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="append_slot/3">append_slot(Slot, N2S, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a value slot (uint32_t).
  Aliases are allowed (when <code>Slot</code> is an atom).</p>
</div></div>
<div class="function">
<h3 id="append_slot/2">append_slot(Slot, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a value slot (uint32_t).
  Aliases are not allowed (when <code>Slot</code> is an atom).</p>
</div></div>
<div class="function">
<h3 id="append_slots/3">append_slots(N2S, Slots, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a list of slots.</p>
</div></div>
<div class="function">
<h3 id="append_slots_with_order/3">append_slots_with_order(N2S, Slots, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a list of slots. <code>{reverse, Slot}</code> is allowed.</p>
</div></div>
<div class="function">
<h3 id="append_double/2">append_double(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a float.</p>
</div></div>
<div class="function">
<h3 id="read_double/1">read_double(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a float.</p>
</div></div>
<div class="function">
<h3 id="append_binary/2">append_binary(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Concat 2 binaries in the reverse order.</p>
</div></div>
<div class="function">
<h3 id="append_boolean/2">append_boolean(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a bool.</p>
</div></div>
<div class="function">
<h3 id="read_boolean/1">read_boolean(Bin) -&gt; {Bool, Bin}</h3>

<ul class="type">
<li><code>Bin = binary()</code></li><li><code>Bool = boolean()</code></li></ul>
<div class="description">

<p>Read a bool. Return <code>true</code> or <code>false</code>.</p>
</div></div>
<div class="function">
<h3 id="read_weight/1">read_weight(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read weight as a double.</p>
</div></div>
<div class="function">
<h3 id="append_weight/2">append_weight(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Write weight as a double.</p>
</div></div>
<div class="function">
<h3 id="read_rank/1">read_rank(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a document rank (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="read_slot/1">read_slot(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a value slot (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="read_percent/1">read_percent(Bin) -&gt; Percent</h3>

<ul class="type">
<li><code>Bin = binary()</code></li><li><code>Percent = 0..100</code></li></ul>
<div class="description">

<p>Read a percent value (uint8_t).</p>
</div></div>
<div class="function">
<h3 id="append_percent/2">append_percent(Value, Bin) -&gt; term()
</h3>


<div class="description">

<p>Write percent as a double.</p>
</div></div>
<div class="function">
<h3 id="read_doccount/1">read_doccount(Bin) -&gt; term()
</h3>


<div class="description">

<p>Read a document count (uint32_t).</p>
</div></div>
<div class="function">
<h3 id="slot_id/2">slot_id(Name, N2S) -&gt; term()
</h3>


<div class="description">

<p>Convert slot name to its number.</p>
</div></div>
<div class="function">
<h3 id="slot_type/2">slot_type(Slot, N2S::N2S | undefined) -&gt; Type</h3>

<ul class="type">
<li><code>Slot = non_neg_integer()</code></li><li><code>N2S = term()</code></li><li><code>Type = x_slot_type() (see module xapian_type)</code></li></ul>
<div class="description">

<p>Convert a slot number (not name) into a slot type (<code>float</code> or <code>string</code>).</p>
</div></div>
<div class="function">
<h3 id="index_of/2">index_of(Item, List) -&gt; Pos | not_found</h3>

<ul class="type">
<li><code>Pos = non_neg_integer()</code></li><li><code>Item = term()</code></li><li><code>List = [Item]</code></li></ul>
<div class="description">

<p>Return a position of the element <code>Item</code> in the list <code>List</code>.</p>
</div></div>
<div class="function">
<h3 id="index_one_of/1">index_one_of(Items::[term()], List::[term()]) -&gt; non_neg_integer() | not_found</h3>


<div class="description">

<p>Search any term from <code>Items</code> inside <code>List</code>.
  Return its position in <code>List</code>.</p>
</div></div>
<div class="function">
<h3 id="read_position_list/1">read_position_list(Bin) -&gt; {Positions, Bin}</h3>

<ul class="type">
<li><code>Positions = [Pos]</code></li><li><code>Pos = non_neg_integer()</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Read a fixed count of positions from <code>Bin</code>.</p>
</div></div>
<div class="function">
<h3 id="append_docids/2">append_docids(DocIds, Bin@) -&gt; term()
</h3>


<div class="description">

<p>Append a list of document identifiers.</p>
</div></div>
<div class="function">
<h3 id="append_terms/2">append_terms(Terms, Bin) -&gt; Bin</h3>

<ul class="type">
<li><code>Terms = [x_non_empty_string() (see module xapian_type)]</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Append a list of terms.</p>
</div></div>
<div class="function">
<h3 id="append_floats/2">append_floats(Nums, Bin) -&gt; Bin</h3>

<ul class="type">
<li><code>Nums = [float()]</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Append a list of double numbers.</p>
</div></div>
<div class="function">
<h3 id="append_value/3">append_value(Type, Value, Bin) -&gt; Bin</h3>

<ul class="type">
<li><code>Type = atom()</code></li><li><code>Value = float()</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Append a value of the slot.
  <code>Type</code> is a user defined type (for example, <code>string</code>, <code>float</code> or <code>bytes</code>).
  See <code>XapianErlang::Driver::decodeValue</code>.</p>
</div></div>
<div class="function">
<h3 id="append_value/4">append_value(SlotId, Value, S2T, Bin) -&gt; term()
</h3>


<div class="description">

<p>Append a value <code>Value</code> of the slot <code>SlotId</code>.</p>
</div></div>
<div class="function">
<h3 id="read_unknown_type_value/1">read_unknown_type_value(Bin1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="resource_appender/2">resource_appender(State, Client) -&gt; x_resource_appender()</h3>

<ul class="type">
<li><code>State = x_state() (see module xapian_type)</code></li><li><code>Client = pid() | {pid(), reference()}</code></li></ul>
<div class="description">

<p>Create a resource appender.</p>
</div></div>
<div class="function">
<h3 id="append_resource/3">append_resource(RA, Res, Bin) -&gt; Bin</h3>

<ul class="type">
<li><code>RA = x_resource_appender()</code></li><li><code>Res = x_resource() (see module xapian_type)</code></li><li><code>Bin = binary()</code></li></ul>
<div class="description">

<p>Encode a resource <code>Res</code> using the resource appender <code>RA</code>.
  Concat it with <code>Bin</code>.</p>
<p><em>See also:</em> <a href="#append_resource/4" class="seealso">append_resource/4</a>, <a href="#resource_appender/2" class="seealso">resource_appender/2</a>.</p>
</div></div>
<div class="function">
<h3 id="append_resource/4">append_resource(State, Res, Bin, ClientPid) -&gt; term()
</h3>


<div class="description">

<p>Append a resource reference or constructor.</p>
<p><em>See also:</em> <a href="#append_resource/3" class="seealso">append_resource/3</a>.</p>
</div></div>
<div class="function">
<h3 id="resource_reader/2">resource_reader(Register, ClientPid) -&gt; term()
</h3>


<div class="description">

<p>Create a resource reader.</p>
</div></div>
<div class="function">
<h3 id="resource_register/1">resource_register(Rr_state) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="read_resource/2">read_resource(RR, Bin) -&gt; term()
</h3>


<div class="description">

<p>Decode a resource from <code>Bin</code> using a resource reader <code>RR</code>.</p>
<p><em>See also:</em> <a href="#resource_reader/2" class="seealso">resource_reader/2</a>.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

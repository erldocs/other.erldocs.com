<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>egtm (egtm) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>egtm</h1>
<h2 class="modsummary">Erlang binding for GT.M database.</h2>
<div class="description">
<p>Erlang binding for GT.M database</p>
 
  <p>Example of usage:
  </p><pre class="sh_erlang">  erl&gt; egtm:start ().
  ok
  erl&gt; egtm:zversion().
  "GT.M V5.4-002B Linux x86_64"
  erl&gt; egtm:job().
  "13757"
  erl&gt; egtm:get ("^ZTMR").
  []
  erl&gt; egtm:set ("^ZTMR", [1,2,3], egtm:zversion ()).
  ok
  erl&gt;
  egtm:get ("^ZTMR").
  []
  erl&gt; egtm:get ("^ZTMR", [1,2,3]).
  "GT.M V5.4-002B Linux x86_64"
  erl&gt; Rand = fun (N) -&gt; random:uniform (N) end.
  #Fun&lt;erl_eval.6.111823515&gt;
  erl&gt; egtm:set ("^ZTMR", [Rand (10), Rand (10)], Rand (10000)).
  ok
  erl&gt; egtm:set ("^ZTMR", [Rand (10), Rand (10)], Rand (10000)).
  ok
  erl&gt; egtm:set ("^ZTMR", [Rand (10), Rand (10)], Rand (10000)).
  ok
  erl&gt; egtm:set ("^ZTMR", [Rand (10), Rand (10)], Rand (10000)).
  ok
  erl&gt; egtm:set ("^ZTMR", [Rand (10), Rand (10)], Rand (10000)).
  ok
  erl&gt; egtm_util:foreach ("^ZTMR", [],
         fun (G, S, R) -&gt; egtm_util:foreach (G, S), [] end).
  ^ZTMR["1","2"]=[]
  ^ZTMR["2","3"]="6972"
  ^ZTMR["2","6"]="2150"
  ^ZTMR["4","6"]="9157"
  ^ZTMR["7","5"]="5966"
  ^ZTMR["8","10"]="5015"
  {ok,[]}
  erl&gt; egtm:order ("^ZTMR", ["2", ""], backward).
  ["2","6"]
  erl&gt; egtm:order ("^ZTMR", ["2", ""], forward).
  ["2","3"]
  erl&gt; egtm:stop ().
  ok
  erl&gt;</pre></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-global_name">global_name() = string()</h3></div>
    <div class="type"><h3 id="type-order_direction">order_direction() = forward | backward</h3></div>
    <div class="type"><h3 id="type-program_name">program_name() = string()</h3></div>
    <div class="type"><h3 id="type-subscripts">subscripts() = list()</h3></div>
    <div class="type"><h3 id="type-tp_options">tp_options() = string()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/2">start(Type, Args) -&gt; term()
</h3>


<div class="description">

<p>application:start callback, do not use directly!</p>
</div></div>
<div class="function">
<h3 id="start/0">start() -&gt; term()
</h3>


<div class="description">

<p>Start EGTM application.</p>
</div></div>
<div class="function">
<h3 id="stop/1">stop(State) -&gt; term()
</h3>


<div class="description">

<p>application:stop callback, do not use directly!</p>
</div></div>
<div class="function">
<h3 id="stop/0">stop() -&gt; term()
</h3>


<div class="description">

<p>Stop EGTM application.</p>
</div></div>
<div class="function">
<h3 id="get/1">get(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#get/2" class="seealso">get(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="get/1-1">get(Gvn::global_name(), Subs::subscripts()) -&gt; string()</h3>


<div class="description">

<p>Get value of specified node (MUMPS: <code>$Get(@Gvn@(Subs))</code>).</p>
</div></div>
<div class="function">
<h3 id="getp/1">getp(Gvn::global_name(), Subs::subscripts(), Piece::integer(), Delim::string()) -&gt; string()</h3>


<div class="description">

<p>Get value of specific position in specified node
  value delimited by specified delimiter
  (MUMPS: <code>$Piece($Get(@Gvn@(Subs)),Delim,Piece)</code>).</p>
</div></div>
<div class="function">
<h3 id="getp/3">getp(Gvn, Piece, Delim) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#getp/4" class="seealso">getp(Gvn, Subs, Piece, Delim)</a>.</p>
</div></div>
<div class="function">
<h3 id="getp/2">getp(Gvn, Piece) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#getp/4" class="seealso">getp(Gvn, Subs, Piece, Delim)</a>.</p>
</div></div>
<div class="function">
<h3 id="getp/1-1">getp(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#getp/4" class="seealso">getp(Gvn, Subs, Piece, Delim)</a>.</p>
</div></div>
<div class="function">
<h3 id="set/2">set(Gvn, Val) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#set/3" class="seealso">set(Gvn, Subs, Val)</a>.</p>
</div></div>
<div class="function">
<h3 id="set/1">set(Gvn::global_name(), Subs::subscripts(), Val::string()) -&gt; ok</h3>


<div class="description">

<p>Set value of specified node (MUMPS <code>Set @Gvn@(Subs)=Val</code>).</p>
</div></div>
<div class="function">
<h3 id="setp/1">setp(Gvn::global_name(), Subs::subscripts(), Piece::integer(), Delim::string(), Val::string()) -&gt; ok</h3>


<div class="description">

<p>Set value of specific position in specified node
  value delimited by specified delimiter
  (MUMPS: <code>Set $Piece($Get(@Gvn@(Subs)),Piece,Delim)=Val</code>).</p>
</div></div>
<div class="function">
<h3 id="setp/4">setp(Gvn, Piece, Delim, Val) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#setp/5" class="seealso">setp(Gvn, Subs, Piece, Delim, Val)</a>.</p>
</div></div>
<div class="function">
<h3 id="setp/3">setp(Gvn, Piece, Val) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#setp/5" class="seealso">setp(Gvn, Subs, Piece, Delim, Val)</a>.</p>
</div></div>
<div class="function">
<h3 id="setp/2">setp(Gvn, Val) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#setp/5" class="seealso">setp(Gvn, Subs, Piece, Delim, Val)</a>.</p>
</div></div>
<div class="function">
<h3 id="gorder/0">gorder() -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#gorder/1" class="seealso">gorder([])</a>.</p>
</div></div>
<div class="function">
<h3 id="gorder/1">gorder(Gvn) -&gt; term()
</h3>


<div class="description">

<p>A special case of <code>egtm:order ()</code> where  
we want order not only over subscripts, but  
over global names.</p>
 
  <p>If no <code>Gvn</code> specified, "^%" is used as it  
is the first possible name of any global name.</p>
 
  <p>Since the use of <code>gorder</code> is limited only
  to few cases, we support only <code>forward</code>
  direction.</p>
</div></div>
<div class="function">
<h3 id="order/0">order() -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#gorder/0" class="seealso">gorder()</a>.</p>
</div></div>
<div class="function">
<h3 id="order/1">order(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#gorder/1" class="seealso">gorder(Gvn)</a>.</p>
</div></div>
<div class="function">
<h3 id="order/2">order(Gvn, Subs) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#order/3" class="seealso">order(Gvn, Subs, forward)</a>.</p>
</div></div>
<div class="function">
<h3 id="order/1-1">order(Gvn::global_name(), Subs::subscripts(), Dir::order_direction()) -&gt; subscripts()</h3>


<div class="description">

<p>Obtain next/previous key from global name <code>Gvn</code>
  and subscript index <code>Subs</code> with respect to <code>Direction</code>
  (MUMPS: <code>$Order(@Gvn@(Subs),Direction)</code>).</p>
 
  <p>Returns a next (full) subscript to use, example:
  </p><list>
  <item><p>let's have global like <code>^X(0,1)="A",^X(0,2)="B",^X(0,3)="C"</code></p></item>
  <item><p><code>egtm:order ("^X", [0, ""]) = [0,1]</code></p></item>
  <item><p><code>egtm:order ("^X", [0, 1])  = [0,2]</code></p></item>
  <item><p><code>egtm:order ("^X", [0, 2])  = [0,3]</code></p></item>
  <item><p><code>egtm:order ("^X", [0, 3])  = [0,""]</code></p></item>
  </list>
 
  <p>Note that empty <code>Subs</code> list is treated XXX</p>
</div></div>
<div class="function">
<h3 id="kill/1">kill(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#kill/2" class="seealso">kill(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="kill/1-1">kill(Gvn::global_name(), Subs::subscripts()) -&gt; ok</h3>


<div class="description">

<p>Kill specified node including all its
  parents (MUMPS: <code>Kill @Gvn@(Subs)</code>).</p>
</div></div>
<div class="function">
<h3 id="zkill/1">zkill(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#zkill/2" class="seealso">zkill(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="zkill/1-1">zkill(Gvn::global_name(), Subs::subscripts()) -&gt; ok</h3>


<div class="description">

<p>ZKILL/ZWITHDRAW operation kills only specified
  node without affecting any of subnodes
  (MUMPS: <code>ZKill @Gvn@(Subs)</code>).</p>
</div></div>
<div class="function">
<h3 id="do/1">do(Pgm) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#do/2" class="seealso">do(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="do/1-1">do(Pgm::program_name(), Args::list()) -&gt; ok</h3>


<div class="description">

<p>Extrinsic call to external routine (MUMPS: <code>Do @Pgm@(Args)</code>).</p>
</div></div>
<div class="function">
<h3 id="call/1">call(Pgm) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#call/2" class="seealso">call(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="call/1-1">call(Pgm::program_name(), Args::list()) -&gt; string()</h3>


<div class="description">

<p>Intrinsic call to external routine (MUMPS: <code>$$@Pgm@(Args)</code>).</p>
</div></div>
<div class="function">
<h3 id="merge/2">merge(SrcGvn, DstGvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#merge/4" class="seealso">merge(SrcGvn, [], DstGvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="merge/1">merge(SrcGvn::global_name(), SrcSubs::subscripts(), DstGvn::global_name(), DstSubs::subscripts()) -&gt; ok</h3>


<div class="description">

<p>Merge/copy one sparse array to another one
  (MUMPS: <code>Merge @DstGvn@(DstSubs)=@SrcGvn@(SrcSubs)</code>).</p>
</div></div>
<div class="function">
<h3 id="tstart/0">tstart() -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#tstart/1" class="seealso">tstart("")</a>.</p>
</div></div>
<div class="function">
<h3 id="tstart/1">tstart(Opt::tp_options()) -&gt; ok</h3>


<div class="description">

<p>Start a new level of transaction
  (MUMPS: <code>TStart @Opt</code>).</p>
</div></div>
<div class="function">
<h3 id="tcommit/0">tcommit() -&gt; ok</h3>


<div class="description">

<p>Commit the current transaction level and
  clear the transaction buffer (MUMPS: <code>TCommit</code>).</p>
</div></div>
<div class="function">
<h3 id="trollback/0">trollback() -&gt; ok</h3>


<div class="description">

<p>Roll back the current transaction level
  and clear the transaction buffer (MUMPS: <code>TRollback</code>).</p>
</div></div>
<div class="function">
<h3 id="lock/1">lock(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#lock/2" class="seealso">lock(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="lock/1-1">lock(Gvn::global_name(), Subs::subscripts()) -&gt; ok</h3>


<div class="description">

<p>Lock a subtree of global variable (MUMPS: <code>Lock +@Gvn@(Subs)</code>).</p>
</div></div>
<div class="function">
<h3 id="unlock/1">unlock(Gvn) -&gt; term()
</h3>


<div class="description">
<p>Equivalent to <a href="#unlock/2" class="seealso">unlock(Gvn, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="unlock/1-1">unlock(Gvn::global_name(), Subs::subscripts()) -&gt; ok</h3>


<div class="description">

<p>Unlock a subtree of global variable (MUMPS: <code>Lock -@Gvn@(Subs)</code>).</p>
</div></div>
<div class="function">
<h3 id="data/1">data(Gvn) -&gt; term()
</h3>


<div class="description">

<p>data (Gvn, []).</p>
</div></div>
<div class="function">
<h3 id="data/1-1">data(Gvn::global_name(), Subs::subscripts()) -&gt; integer()</h3>


<div class="description">

<p>Check if the subtree of global variable
  contains any records (MUMPS: <code>$Data(@Gvn@(Subs))</code>).</p>
</div></div>
<div class="function">
<h3 id="xecute/1">xecute(Mcode::string()) -&gt; ok</h3>


<div class="description">

<p>Evaluate MUMPS code (MUMPS: <code>Xecute Mcode</code>).
  USE CAREFULLY!</p>
</div></div>
<div class="function">
<h3 id="zversion/0">zversion() -&gt; string()</h3>


<div class="description">

<p>Return GT.M version information (MUMPS: <code>$Zversion</code>).</p>
</div></div>
<div class="function">
<h3 id="horolog/0">horolog() -&gt; string()</h3>


<div class="description">

<p>Return the current time in MUMPS $H-format (MUMPS: <code>$Horolog</code>).
  XXX: what about transforming it from string "X,Y" to Erlang tuple {X,Y}?</p>
</div></div>
<div class="function">
<h3 id="job/0">job() -&gt; string()</h3>


<div class="description">

<p>Return process ID of the GT.M worker job (MUMPS: <code>$Job</code>).
  XXX: what about transforming it from string to integer or long?</p>
</div></div>
<div class="function">
<h3 id="iget/1">iget(VarName::string(), Subs::subscripts()) -&gt; string()</h3>


<div class="description">
<p>Equivalent to <a href="#iget/1" class="seealso">iget(VarName)</a>.</p>
</div></div>
<div class="function">
<h3 id="iget/1-1">iget(VarName::string()) -&gt; string()</h3>


<div class="description">

<p>Return a value of intrinsic (system) variable.
  Example: to get <code>$ZRO[utines]</code>, just <code>egtm:iget ("ZRO")</code>.
  Note: to set an intrinsic variable, there's no <code>iset</code>
  supported, so feel free to use <code>xecute</code>.</p>
</div></div>
<div class="function">
<h3 id="fast_order/2">fast_order(Gvn, Subs) -&gt; term()
</h3>


<div class="description">

<p>XXX: Alternative <code>egtm:order ()</code> experiment.</p>
</div></div>
<div class="function">
<h3 id="call_fast_order/2">call_fast_order(Gvn, Subs) -&gt; term()
</h3>


<div class="description">

<p>XXX: Alternative <code>egtm:order ()</code> experiment.</p>
</div></div>
<div class="function">
<h3 id="xecute_fast_order/2">xecute_fast_order(Gvn, Subs) -&gt; term()
</h3>


<div class="description">

<p>XXX: Alternative <code>egtm:order ()</code> experiment.
  XXX: Ensure it to run on the same <code>egtm_worker</code></p>
</div></div>
<div class="function">
<h3 id="perform/2">perform(Op, Args) -&gt; term()
</h3>


<div class="description">

<p>Perform EGTM operation. A wrapper for all calls
  with integrated decision logic if the operation is
  to be performed by local worker, via pool, or via
  cluster API.
  This function is used as a proxy for all EGTM operations
  within <code>egtm</code> module.
  It is not recommended to use it directly from applications
  as it calls raw NIF functions without any additional logic.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

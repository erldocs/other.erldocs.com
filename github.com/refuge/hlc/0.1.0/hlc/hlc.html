<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>hlc (hlc) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>hlc</h1>
<h2 class="modsummary">  
hlc.</h2>
<div class="description">
<p>  
hlc</p>
 
  <p>implements the Hybrid Logical Clock outlined in  
"Logical Physical Clocks and Consistent Snapshots in Globally  
Distributed Databases", available online at  
http://www.cse.buffalo.edu/tech-reports/2014-04.pdf.</p>
 
  <p>An hybrid logical clock is available as a linked process.   Objects of this
  type model causality while maintaining a relation  to physical time.
  Roughly speaking, timestamps  consist of the largest wall clock time among
  all  events, and a logical clock that ticks whenever  an event happens in
  the future of the local physical  clock.
 </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-timestamp">timestamp() = #timestamp{}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/0">new() -&gt; {ok, pid()} | {error, any()}</h3>


<div class="description">

<p>create a new hybrid logical clock.</p>
</div></div>
<div class="function">
<h3 id="new/1">new(ClockFun::function()) -&gt; {ok, pid()} | {error, any()}</h3>


<div class="description">

<p>create a new hybrid logical clock with a custom physical clock function.</p>
</div></div>
<div class="function">
<h3 id="close/1">close(Ref::pid) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_maxdrift/1">set_maxdrift(Ref::pid(), MaxDrift::integer()) -&gt; ok</h3>


<div class="description">

<p>Sets the maximal drift from the physical clock that a call to  
Update may cause. A well-chosen value is large enough to ignore a  
reasonable amount of clock skew but will prevent ill-configured nodes  
from dramatically skewing the wall time of the clock into the future.</p>
 
 
  <p>A value of zero disables this safety feature.  The default value for
  a new instance is zero.</p>
</div></div>
<div class="function">
<h3 id="get_maxdrift/1">get_maxdrift(Ref::pid()) -&gt; integer()</h3>


<div class="description">

<p>returns the maximal drift allowed.
   A value of 0 means drift checking is disabled.</p>
</div></div>
<div class="function">
<h3 id="timestamp/1">timestamp(Ref::pid()) -&gt; timestamp()</h3>


<div class="description">

<p>return a copy of the clock timestamp without adjusting it</p>
</div></div>
<div class="function">
<h3 id="now/1">now(Ref::pid()) -&gt; timestamp()</h3>


<div class="description">

<p> returns a timestamp associated with an event from the local
  machine that may be sent to other members of the distributed network.
  This is the counterpart of Update, which is passed a timestamp
  received from another member of the distributed network.</p>
</div></div>
<div class="function">
<h3 id="update/1">update(Ref::pid(), RT::timestamp()) -&gt; timestamp() | {error, {time_ahead, timestamp()}}</h3>


<div class="description">

<p>takes a hybrid timestamp, usually originating from an event
  received from another member of a distributed system. The clock is
  updated and the hybrid timestamp  associated to the receipt of the
  event returned.  An error may only occur if drift checking is active
  and  the remote timestamp was rejected due to clock drift,  in which
  case the state of the clock will not have been  altered. To timestamp
  events of local origin, use Now instead.</p>
</div></div>
<div class="function">
<h3 id="manual_clock/0">manual_clock() -&gt; {pid(), function()}</h3>


<div class="description">

<p>create a manually controlled physicl clock</p>
</div></div>
<div class="function">
<h3 id="manual_clock/1">manual_clock(TS0::integer()) -&gt; {pid(), function()}</h3>


<div class="description">

<p>create a manually controlled physicl clock and initialise it
  with a default ts.</p>
</div></div>
<div class="function">
<h3 id="set_manual_clock/1">set_manual_clock(Pid::pid(), TS::integer()) -&gt; ok</h3>


<div class="description">

<p>change the value of the manually controlled physicall clock.</p>
</div></div>
<div class="function">
<h3 id="ts_less/1">ts_less(Timestamp::timestamp(), X2::timestamp()) -&gt; true | false</h3>


<div class="description">

<p>compare if one timestamps happen before the other</p>
</div></div>
<div class="function">
<h3 id="ts_equal/1">ts_equal(TS::timestamp(), X2::timestamp()) -&gt; true | false</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="physical_clock/0">physical_clock() -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>db_prbr (scalaris) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>db_prbr</h1>
<h2 class="modsummary">   DB back-end for DHT nodes storing prbr objects.</h2>
<div class="description">
<p>   DB back-end for DHT nodes storing prbr objects.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-db">db() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{KeyValueDB :: term(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Subscribers :: <a href="db_ets.html#type-db" class="seealso">db_ets:db()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SnaphotInfo ::<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{term() | false,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LiveLockCount :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SnapLockCount :: integer() >= 0}}</h3></div>
    <div class="type"><h3 id="type-db_as_list">db_as_list() = [<a href="#type-entry" class="seealso">entry()</a>]</h3></div>
    <div class="type"><h3 id="type-entry">entry() = tuple()</h3></div>
    <div class="type"><h3 id="type-value">value() = <a href="rdht_tx.html#type-encoded_value" class="seealso">rdht_tx:encoded_value()</a></h3></div>
    <div class="type"><h3 id="type-version">version() = integer() &gt;= 0</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/1">new(DBName::nonempty_string() | atom()) -&gt; db()</h3>


<div class="description">

<p>Initializes a new database.</p>
</div></div>
<div class="function">
<h3 id="open/1">open(DB::nonempty_string()) -&gt; db()</h3>


<div class="description">

<p>Re-opens an existing database.</p>
</div></div>
<div class="function">
<h3 id="close/1">close(State::db()) -&gt; true</h3>


<div class="description">

<p>Closes the given DB (it may be recoverable using open/1 depending on
       the DB back-end).</p>
</div></div>
<div class="function">
<h3 id="close_and_delete/1">close_and_delete(State::db()) -&gt; true</h3>


<div class="description">

<p>Closes the given DB and deletes all contents (this DB can thus not be
       re-opened using open/1).</p>
</div></div>
<div class="function">
<h3 id="get_load/1">get_load(DB::db()) -&gt; Load::integer()</h3>


<div class="description">

<p>Returns the number of stored keys.</p>
</div></div>
<div class="function">
<h3 id="get_load/1-1">get_load(DB::db(), Interval::interval() (see module intervals)) -&gt; Load::integer()</h3>


<div class="description">

<p>Returns the number of stored keys in the given interval.</p>
</div></div>
<div class="function">
<h3 id="tab2list/1">tab2list(Table_name::db()) -&gt; [Entries::entry()]</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get/1">get(X1::db(), Key::key() (see module rt_chord)) -&gt; entry() | {}</h3>


<div class="description">

<p>Gets an entry from the DB. If there is no entry with the given key,
       an empty entry will be returned.</p>
</div></div>
<div class="function">
<h3 id="set/1">set(DB::db(), Entry::entry()) -&gt; db()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_data/1">add_data(DB::db(), Data::db_as_list()) -&gt; NewDB::db()</h3>


<div class="description">

<p>Adds all db entry objects in the Data list.</p>
</div></div>
<div class="function">
<h3 id="get_entries/1">get_entries(DB::db(), Range::interval() (see module intervals)) -&gt; db_as_list()</h3>


<div class="description">

<p>Gets (non-empty) db entry objects in the given range.</p>
</div></div>
<div class="function">
<h3 id="record_changes/1">record_changes(OldDB::db(), NewInterval::interval() (see module intervals)) -&gt; NewDB::db()</h3>


<div class="description">

<p>Adds the new interval to the interval to record changes for. Entries
       which have (potentially) changed can then be gathered by get_changes/1.</p>
</div></div>
<div class="function">
<h3 id="stop_record_changes/1">stop_record_changes(OldDB::db(), Interval::interval() (see module intervals)) -&gt; NewDB::db()</h3>


<div class="description">

<p>Stops recording changes in the given interval and removes all such
       entries from the table of changed keys.</p>
</div></div>
<div class="function">
<h3 id="get_changes/1">get_changes(DB::db(), Interval::interval() (see module intervals)) -&gt; {Changed::db_as_list(), Deleted::[key() (see module rt_chord)]}</h3>


<div class="description">

<p>Gets all db entries in the given interval which have
  (potentially) been changed or deleted (might return objects that
  have not changed but have been touched by one of the DB setters).</p>
</div></div>
<div class="function">
<h3 id="delete_entries/1">delete_entries(DB::db(), RangeOrFun::interval() (see module intervals) | (entry()) -&gt; boolean()) -&gt; NewDB::db()</h3>


<div class="description">

<p>Deletes all objects in the given Range or (if a function is provided)
       for which the FilterFun returns true from the DB.</p>
</div></div>
<div class="function">
<h3 id="check_config/0">check_config() -&gt; boolean()</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Florian Schintke</aname>
<email>schintke@zib.de</email>
<aname>Nico Kruber</aname>
<email>kruber@zib.de</email>
<aname>Jan Fajerski</aname>
<email>fajerski@zib.de</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

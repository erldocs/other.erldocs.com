<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>eg_table (ngerlguten) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>eg_table</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="table_from_xml/8">table_from_xml(PDF, XML, X, Width, Start, Bottom, FontSize, FontChoice) -&gt; term()
</h3>


<div class="description">

<p>Take an XML string and generate a table from it in the PDF
  <br /><br /></p>
   PDFPID of PDF being produced <br />
   XMLstring of XML defining the table and its contents  <br />
   XX coordinate of the top left corner of the table box <br />
   Width maximum width of the table <br />
   Start Y coordinate of top left corner of the box <br />
   BottomY coordinate of maximum bottom of the box <br />
   FontSizesize of the letters in points <br />
   FontChoicefont name <br />
  <p>
 
  </p><p>with an XML string like the following:
  <code>  &lt;row&gt;&lt;cell&gt;Escape Sequence&lt;/cell&gt;&lt;cell&gt;Value&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\b&lt;/cell&gt;&lt;cell&gt;Backspace&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\d&lt;/cell&gt;&lt;cell&gt;Delete&lt;/cell&gt;&lt;/row&gt;
   &lt;row&gt;&lt;cell&gt;\\e&lt;/cell&gt;&lt;cell&gt;Escape&lt;/cell&gt;&lt;/row&gt;
  </code></p>
 
  <p>You get the following PDF results</p>
 
  <p><image file="../table_example.bmp" width="247" height="115"/><br /></p>
</div></div>
<div class="function">
<h3 id="table/8">table(PDF, Rows, X, Width, Start, Bottom, FontSize, FontChoice) -&gt; term()
</h3>


<div class="description">

<p>Creating tables</p>
 
  <p>1. work out number of columns</p>
 
  <p>2. split space evenly, leaving an extra 4 Pts for white space around each,     
and an extra 1 Pt for each vertical Line</p>
 
  <p>2 bis. OR Turn each cell into RTF as if it had the full width to use.</p>
 
            <p>Then find a bunch of metrics about the table which will            
help us find a good set of column widths.</p>
 
            <p>Find the longest word in each column. This sets the            
minimum column width.</p>
 
            <p>If the sum of the longest words is greater than the total            
width avaialable then issue a warning, but carry on with            
the table extending off the page to the right (really            
trick would be to switch to landscape mode automatically            
:)</p>
 
            <p>Ideally we want to fit into the minimum vertical space,            
so if there is a solution where every or most rows can            
fit on one line this would be very nice.</p>
 
             <p>Could do proportional split based on total volume of text             
in each column</p>
 
            <p>We could find the longest cell for each column</p>
 
    <p>If all cells in a column will fit on a single line within what    
would be an even split between the columns, allow that column to    
take up the space it needs to fit everything one one line? OK,    
but at the limit might really penalise another column with lots    
of text.</p>
 
  <p>3. Convert the text into RTF lines for each cell</p>
 
  <p>4. For each row work out the number of lines required     
(largest number of lines).</p>
 
  <p>5. Output the table, drawing lines as we go</p>
 
  <p>TODO - Parameterise by:  Spacing around text, table width, row background         
Clever algorithm to arrange column widths         
Do page breaks in the middle of a table</p>
 
  <p>spec table(PDF, Rows, X, Y, SO) -&gt;
           Total_Y</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

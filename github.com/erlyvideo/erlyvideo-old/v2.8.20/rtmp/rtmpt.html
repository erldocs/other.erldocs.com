<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>rtmpt (rtmp) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>rtmpt</h1>
<h2 class="modsummary">       RTMPT interface.</h2>
<div class="description">
<p>       RTMPT interface. Used from web-server.
   RTMPT protocol is a tunneling protocol for RTMP. Technically it is implemented in following way:
   Flash client connects to HTTP server several times a second and sends POST /idle requests with session id,
   given in first POST /open request. When player needs to send data is sens POST /send request.
   If server needs to send data to client, it buffers these bytes somewhere, associated with session id.
   Usually you may not bother about POST /close request, because I have never seen it.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="open/2">open(IP, Callback) -&gt; term()
</h3>


<div class="description">

<p>Opens RTMPT session. Creates internal buffer, that will register under SessionID
  and will serve as a input/output buffer for RTMP socket. You must pass Callback module that
  will start client for you. See overview for details.</p>
</div></div>
<div class="function">
<h3 id="idle/3">idle(SessionID, IP, Sequence) -&gt; term()
</h3>


<div class="description">

<p>Asks RTMPT buffer for any data, need to be received to client. Usually flash client calls is several times per second.
  Don't forget to add magic 33 in front of your data:
  <code>
   {ok, Data} = rtmpt:idle(SessionId, Req:get(peer_addr), list_to_int(SequenceNumber)),
   Req:ok([{'Content-Type', "application/x-fcs"}, {"Server", "RTMPT/1.0"}], [33, Data]);
  </code></p>
</div></div>
<div class="function">
<h3 id="send/4">send(SessionID, IP, Sequence, Data) -&gt; term()
</h3>


<div class="description">

<p>Push data to RTMP socket and asks RTMPT buffer for any data, need to be received to client. Usually flash client calls is several times per second.
  Don't forget to add magic 33 in front of your data:
  <code>
   {ok, Data} = rtmpt:send(SessionId, Req:get(peer_addr), list_to_int(SequenceNumber), Req:get(body)),
   Req:ok([{'Content-Type', "application/x-fcs"}, {"Server", "RTMPT/1.0"}], [33, Data]);
  </code></p>
</div></div>
<div class="function">
<h3 id="close/2">close(SessionID, IP) -&gt; term()
</h3>


<div class="description">

<p>Closes RTMPT session</p>
</div></div></div>

<authors>

<aname>Max Lapshin</aname>
<email>max@maxidoors.ru</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

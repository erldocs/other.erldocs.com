<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>dj (disco) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>dj</h1>
<h2 class="modsummary">Defines the central process of the framework.</h2>
<div class="description">
<p>Defines the central process of the framework.  
This is a finite state machine handling the game state  
(e.g. "round running") as well as handling the communication  
between worker nodes, GUI, validator, state changer and barkeeper.</p>
 
  <p><em><marker id="State_machine_states">State machine states</marker></em></p>
 
  <taglist>
 
    <dt>ready</dt>
    <item><p>This is the initial state. It implies that all prerequisites
        for starting a round are met. When a round is successfully
        started (see <a href="dj.html#start_round/0" class="seealso">dj:start_round/0</a>), the fsm transitions
        into the <code>running</code> state.</p></item>
 
    <dt>running</dt>
    <item><p>The <code>running</code> state indicates that a round is
        currently running. Only in this state, the dj accepts new
        propositions from the workers. When all the workers are
        stopped, it transitions to <code>waiting_for_validator</code>.</p></item>
 
    <dt>waiting_for_validator</dt>
    <item><p>When the round is over and the workers have stopped, buffers
        and queues can still contain valid propositions. The
        validator queue is notified of the end of the round, processes
        all propositions that reached it and then in turn notifies
        the dj.<br />
        This is done by calling <a href="dj.html#validator_queue_empty/0" class="seealso">dj:validator_queue_empty/0</a>,
        which prompts the dj to transition into the state <code>ready</code>.</p></item>
 
  </taglist></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-worker_id">worker_id() = atom()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/0">start_link() -&gt; ignore | {error, term()} | {ok, pid()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="choose_problem/1">choose_problem(ProblemIdx::non_neg_integer()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="start_round/0">start_round() -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="kill_all_workers/0">kill_all_workers() -&gt; ok</h3>


<div class="description">

<p>Send a kill message to all workers. This ends the currently
  running round.</p>
</div></div>
<div class="function">
<h3 id="load_game_state/1">load_game_state(FilePath::filename() (see module file)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="save_game_state/1">save_game_state(FilePath::filename() (see module file)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="gui_wants_all_data/0">gui_wants_all_data() -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="apply_proposition/1">apply_proposition(WorkerID::worker_id()) -&gt; ok</h3>


<div class="description">

<p>Change the problem state according to the last proposition of the indicated worker.
  This is used to play multiple rounds with a single problem spec.</p>
</div></div>
<div class="function">
<h3 id="block_worker/1">block_worker(WorkerID::worker_id()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="unblock_worker/1">unblock_worker(WorkerID::worker_id()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_scores/0">add_scores() -&gt; ok</h3>


<div class="description">

<p>Accumulate current scores per worker. Each worker has the score for his last
  proposition and a total accumulated score for the current problem.</p>
</div></div>
<div class="function">
<h3 id="quit_program/0">quit_program() -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="submit_proposition/1">submit_proposition(WorkerID::worker_id(), WorkerOutput::string()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="worker_stopped/1">worker_stopped(WorkerID::worker_id()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="submit_validated_proposition/1">submit_validated_proposition(WorkerID::worker_id(), WorkerInput::string(), WorkerOutput::string(), Score::integer(), Caption::string()) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="validator_queue_empty/0">validator_queue_empty() -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="init/1">init(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="ready/2">ready(Event, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="ready/3">ready(Event, From, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="running/2">running(Event, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="running/3">running(Event, From, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="waiting_for_validator/2">waiting_for_validator(Event, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="waiting_for_validator/3">waiting_for_validator(Event, From, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_event/3">handle_event(Event, State, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_sync_event/4">handle_sync_event(Event, From, State, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_info/3">handle_info(Info, State, Data) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="code_change/4">code_change(OldVsn, DataName, Data, Extra) -&gt; term()
</h3>


<div class="description">

<p>Only really necessary for hot code loading, but has to be declared
  for the gen_fsm behavior.
  We don't do hot code loading so this is just a dummy.</p>
</div></div>
<div class="function">
<h3 id="terminate/3">terminate(Msg, StateName, Data) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

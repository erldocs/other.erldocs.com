<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>merkerl (distributerl) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>merkerl</h1>
<h2 class="modsummary">An implementation of Merkle Trees for anti-entropy.</h2>
<div class="description">
<p>An implementation of Merkle Trees for anti-entropy.</p>

 <p>Intended use is for synchronizing two key/value stores with 
similar but potentially-divergent content.</p>

 <p>Typical usage is when a pair (or more) of nodes or systems have 
views of a set of key/value objects which can change independently. 
Whenever a new object is created or an existing one is modified 
(there is no difference from the merkle point of view) the node 
seeing the change performs an insert/2 to record the change.  At any 
time, one node can send a representation of its tree to another 
node.  The receiving node can diff/2 the trees to see which objects 
differ on the two systems.  From this information, a system knows 
exactly which objects to send or request in order to converge toward 
a common view of the world.  Of course, if the objects contain 
versioning information it will be much easier to resolve which 
node's view for any given object is newer.</p>

 <p>See the code of test_merkle/0 for trivial example usage.</p>

 <p>Application usage note: the 'crypto' OTP application must be started 
before any of this module's functions will work.</p>

  <p>Licensed under the Apache License, Version 2.0 (the "License");  
you may not use this file except in compliance with the License.  
You may obtain a copy of the License at</p>

  <p>http://www.apache.org/licenses/LICENSE-2.0</p>

  Unless required by applicable law or agreed to in writing, software
  distributed under the License is distributed on an "AS IS" BASIS,
  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  See the License for the specific language governing permissions and
  limitations under the License.</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-hash">hash() = binary()</h3></div>
    <div class="type"><h3 id="type-key">key() = binary()</h3></div>
    <div class="type"><h3 id="type-tree">tree() = treeleaf() | treeinner() | undefined</h3></div>
    <div class="type"><h3 id="type-treeinner">treeinner() = term()</h3></div>
    <div class="type"><h3 id="type-treeleaf">treeleaf() = term()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="build_tree/1">build_tree(KHL) -&gt; term()
</h3>


<div class="description">

<p>Build a Merkle tree from a list of KH's of objects.</p>
</div></div>
<div class="function">
<h3 id="delete/2">delete(Key, Tree) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="insert/2">insert(X1, T) -&gt; term()
</h3>


<div class="description">

<p>Insert the KH for a new or changed object into T.</p>

 This is used much like a typical tree-insert function.
 To create a new tree, this can be called with T set to the atom 'undefined'.
</div></div>
<div class="function">
<h3 id="diff/1">diff(X::tree(), TreeB::tree()) -&gt; [key()]</h3>


<div class="description">

<p>Find the keys of objects which differ between the two trees.</p>

 <p>For this purpose, "differ" means that an object either exists in 
only one of the two trees or it exists in both but with different 
hash() values.</p>

 No information about the differing objects is provided except the keys.
 (Objects with vector-clock versioning are helpful here)
</div></div>
<div class="function">
<h3 id="allkeys/1">allkeys(Tree) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="test_merkle/0">test_merkle() -&gt; bool()</h3>


<div class="description">

<p>A test function and example code.</p>

 This should be changed into a proper unit test suite.
</div></div></div>

<authors>

<aname>Justin Sheehy</aname>
<email>justin@basho.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

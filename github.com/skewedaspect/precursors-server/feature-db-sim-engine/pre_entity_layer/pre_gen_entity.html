<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>pre_gen_entity (pre_entity_layer) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>pre_gen_entity</h1>
<h2 class="modsummary">Behavior for entities to use when added to a gen_event manager,   
and associated functions to fire events into a gen_event manager so   
a callback module can be used.</h2>
<div class="description">
<p>Behavior for entities to use when added to a gen_event manager,   
and associated functions to fire events into a gen_event manager so   
a callback module can be used.</p>
  
   <p>The callback module detemines if a given entity_event is valuable or   
not. It is expected that most events will simple end up being a no-op.</p>
  
   The state of an entity is persisted, and can be recovered.
   --------------------------------------------------------------------------------------------------------------------</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-event_mgr_ref">event_mgr_ref() = pid()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| atom()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {atom(), node()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {global, atom()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {via, atom(), atom()}</h3></div>
    <div class="type"><h3 id="type-notify_after_timer">notify_after_timer()</h3></div>
    <div class="type"><h3 id="type-timeout_msg">timeout_msg()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="add_entity/1">add_entity(GenEventPid::event_mgr_ref(), EntityId::any(), CallbackMod::atom(), Args::[any()]) -&gt; ok</h3>


<div class="description">

<p>Adds a pre_gen_entity to the given gen_event_manager <code>GenEventPid</code>.</p>
</div></div>
<div class="function">
<h3 id="add_sup_entity/1">add_sup_entity(GenEventPid::event_mgr_ref(), EntityId::any(), CallbackMod::atom(), Args::[any()]) -&gt; ok</h3>


<div class="description">

<p>Add a supervised entity to the given gen_event_manager
  <code>GenEventPid</code>. If the entitiy is removed (for any reason), a message  
is sent to the calling process:</p>
 
      <p><code>{pre_gen_entity, entity_removed, GenEventPid, {CallbackModule, Id}}</code></p>
 
  <p>This DOES NOT automatically monitor the gen_event manager.</p>
</div></div>
<div class="function">
<h3 id="retrieve_ids_by_manager/1">retrieve_ids_by_manager(GenEventPid::event_mgr_ref()) -&gt; [{atom(), any()}]</h3>


<div class="description">

<p>Return the list of entity id's the given event_event manager
  <code>GenEventPid</code> is running. The Id in this case is a tuple of the callback
  module and the id passed into the recover or add functions.</p>
</div></div>
<div class="function">
<h3 id="notify/1">notify(GenEventRef::event_mgr_ref(), EventName::any(), FromId::any(), ToId::any(), Data::any()) -&gt; ok</h3>


<div class="description">

<p>Send a <code>pre_gen_entity</code> event to the given gen_event manager
  <code>GenEventRef</code>. <code>Any pre_gen_entity</code> handlers that have been added to the
  event manager will receive the event and call the <code>handle_event/4</code>
  function of the callback module.</p>
</div></div>
<div class="function">
<h3 id="notify_after/1">notify_after(Time::pos_integer(), EventName::term(), FromId::any(), ToId::any(), Data::any()) -&gt; notify_after_timer()</h3>


<div class="description">

<p>Creates a timer to send an event after <code>Time</code> milliseconds. The
  timer can be canceled by passing the return value to
  <a href="#cancel_notify/1" class="seealso">cancel_notify/1</a>. Note that the timer, once expired, will send
  a message to the process that called the function, and so is best used
  in a pre_gen_entity callback module; this ensures a pre_gen_entity
  handler will get the timeout message and fire the correct event. This
  also means if the gen_event manager is handling more than just
  pre_gen_entity's, the other handles must be able to handle unexpected
  messages.</p>
<p><em>See also:</em> <a href="#cancel_notify/1" class="seealso">cancel_notify/1</a>.</p>
</div></div>
<div class="function">
<h3 id="cancel_notify/1">cancel_notify(X1::notify_after_timer()) -&gt; non_neg_integer() | false</h3>


<div class="description">

<p>Cancel a timer returned by <a href="#notify_after/5" class="seealso">notify_after/5</a>. This will also
  check the message queue for the event so it will be cleared out. This
  means it should be called by the same process that created the timer.
  The return value is either the number of milliseconds left on the timer,
  or <code>false</code> if the message had already been delivered, or was not a
  timer.</p>
<p><em>See also:</em> <a href="#notify_after/5" class="seealso">notify_after/5</a>.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>pre_gen_auth (precursors-server) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>pre_gen_auth</h1>
<h2 class="modsummary">Gen_event manager and behavior definition for authentication  
backends.</h2>
<div class="description">
<p>Gen_event manager and behavior definition for authentication  
backends.  Can itself be an authentication backend.  As such, the  
gen_event callback functions have two modes:  callback wrapper and  
direct responder.  Callback wrapping is simply to enforce behavior on  
other modules.  The actually implementation of the authentication  
backends could be something completely different (gen_server is a solid  
choice).</p>
 
  <p>There are 4 callbacks in the behavior.</p>
 
  <p><em>init(InitArgs) -&gt; {ok, BackendInfo}</em></p>
 
  <p>Types:  </p><list>
  <item><p>InitArgs :: any()</p></item>
  <item><p>BackendInfo :: any()</p></item>
  </list>
 
  <p>BackendInfo is used for subsequent <code>handle_authentication/3</code> and
  <code>get_user/2</code> calls.</p>
 
  <p><em>handle_authentication(Username, Password, BackendInfo) -&gt; Authy</em></p>
 
  <p>Types: </p><list>
  <item><p>Username :: string()</p></item>
  <item><p>Password :: string()</p></item>
  <item><p>BackendInfo :: any()</p></item>
  <item><p>Authy :: 'allow' | {'deny', Reason} | 'undefined' | Error</p></item>
  <item><p>Reason :: string()</p></item>
  <item><p>Error :: any()</p></item>
  </list>
 
  <p>When a user needs to be authenticated, each authentication backend in
  order of priority.  <code>Password</code> is plaintext.  <code>BackendInfo</code> what was
  returned from the init function.  If a backend returns <code>Error</code> 3 times,  
that backend is removed.</p>
 
  <p><em>get_user(Username, BackendInfo) -&gt;  UserInfo</em></p>
 
  <p>Types:  </p><list>
  <item><p>Username :: string()</p></item>
  <item><p>BackendInfo :: any()</p></item>
  <item><p>UserInfo :: any()</p></item>
  </list>
 
  <p>Return any information the backend may have on the user.  <code>undefined</code> is  
taken to mean there was no information.</p>
 
  <p><em>terminate(Cause, BackendInfo) -&gt; any()</em></p>
 
  <p>Types: </p><list>
  <item><p>Cause :: any()</p></item>
  <item><p>BackendInfo :: any()</p></item>
  </list>
 
  <p>The return value is ignored.  When the authentication system is ending,
  or the authentication backend is removed from service, this is called
  with the <code>Cause</code>.  <code>BackendInfo</code> is what was returned from the init
  function.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-backend">backend() = {<a href="#type-callback_module" class="seealso">callback_module()</a>, <a href="#type-priority" class="seealso">priority()</a>, <a href="#type-start_args" class="seealso">start_args()</a>}</h3></div>
    <div class="type"><h3 id="type-backends">backends() = [<a href="#type-backend" class="seealso">backend()</a>]</h3></div>
    <div class="type"><h3 id="type-callback_module">callback_module() = atom()</h3></div>
    <div class="type"><h3 id="type-priority">priority() = integer()</h3></div>
    <div class="type"><h3 id="type-start_args">start_args() = any()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/0">start_link() -&gt; {ok, pid()}</h3>


<div class="description">

<p>Starts the authentication system with only the local auther.</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(Auths::backends()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Starts the authentication system with a list of the given authers.</p>
</div></div>
<div class="function">
<h3 id="authenticate/1">authenticate(Username::string(), Password::string()) -&gt; {allow, binary()} | {deny, string()}</h3>


<div class="description">

<p>Query authentication backends to see if a user is allowed or not.
  Authentication backends are queried in order of priority, lowest to
  highest.  Query stops at the first backend that returns a definitive
  allow or deny.</p>
</div></div>
<div class="function">
<h3 id="get_user/1">get_user(Username::string(), Handler::atom(), Priority::integer()) -&gt; any()</h3>


<div class="description">

<p>As the specific authentication backend for all information they
  have on the given user.</p>
</div></div>
<div class="function">
<h3 id="add_backend/1">add_backend(Callback::atom(), Priority::integer(), Args::any()) -&gt; ok | {'EXIT', any()} | {error, any()}</h3>


<div class="description">

<p>Add a backend to an already running authentication manager.</p>
</div></div>
<div class="function">
<h3 id="remove_backend/1">remove_backend(Callback::atom(), Priority::integer()) -&gt; ok</h3>


<div class="description">

<p>Removes a backend from the list.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ws_handler (erlwars_ang) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>ws_handler</h1>
<h2 class="modsummary">
   Este módulo implementa el servidor web al que se conecta el cliente web durante el juego erlwars.</h2>
<div class="description">
<p>
   Este módulo implementa el servidor web al que se conecta el cliente web durante el juego erlwars.
   Utiliza cowboy y el protocolo websocket para la comunicación entre el cliente y el servidor. Está
   basado en el behaviour cowboy_websocket_handler proporcionado por cowboy.
   <em><marker id="Información_adicional">Información adicional</marker></em>
   </p><list>
   <item><p><a href="../https///github.com/extend/cowboy/blob/master/manual/cowboy_websocket_handler.html#md" class="seealso">https://github.com/extend/cowboy/blob/master/manual/cowboy_websocket_handler.md</a></p></item>
   <item><p><a href="../https///github.com/extend/cowboy/blob/master/manual/cowboy_req.html#md" class="seealso">https://github.com/extend/cowboy/blob/master/manual/cowboy_req.md</a></p></item>
   </list></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="init/1">ws_handler:init(X1::{TransportName::atom(), ProtocolName::atom()}, _Req::req() (see module cowboy_req), _Opts::any()) -&gt; {atom(), atom(), atom()}</h3>


<div class="description">

<p>
   Esta función actualiza el protocolo a cowboy_websocket.
   <em><marker id="Parámetros_de_entrada">Parámetros de entrada</marker></em>
   </p><list>
   <item><p><em>TransportName</em>: El atom tcp.</p></item>
   <item><p><em>ProtocolName</em>: El atom http.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   </list><p>
   <em><marker id="Valor_de_retorno">Valor de retorno</marker></em>
   </p><list>
   <item><p>Retorna la tupla {upgrade, protocol, cowboy_websocket}.</p></item>
   </list>
</div></div>
<div class="function">
<h3 id="websocket_init/1">ws_handler:websocket_init(TransportName::atom(), Req::req() (see module cowboy_req), _Opts::any()) -&gt; {atom(), req() (see module cowboy_req), atom()}</h3>


<div class="description">

<p>
   Esta función inicializa el estado para esta sesión.
   Es invocada antes de que la actualización a WebSocket ocurra. Puede ser usada para negociar extensiones del
   protocolo websocket con el cliente.
   <em><marker id="Parámetros_de_entrada">Parámetros de entrada</marker></em>
   </p><list>
   <item><p><em>TransportName</em>: El atom tcp.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   </list><p>
   <em><marker id="Valor_de_retorno">Valor de retorno</marker></em>
   </p><list>
   <item><p>Retorna la tupla {ok, Req, undefined_state}.</p></item>
   </list>
</div></div>
<div class="function">
<h3 id="websocket_handle/1">ws_handler:websocket_handle(MensajeDesconocido::{Text::atom(), Msg::binary()}, Req::req() (see module cowboy_req), State::any()) -&gt; {Reply::atom(), {Text::atom(), Content::binary()}, Req::req() (see module cowboy_req), State::any()}</h3>


<div class="description">

<p>
   Esta función maneja los datos recibidos desde la conexión WebSocket. Se invoca cada vez que se reciben datos
   por la conexión.
   <em><marker id="Parámetros_de_entrada">Parámetros de entrada</marker></em>
   </p><list>
   <item><p><em>Text</em>: El atom text.</p></item>
   <item><p><em>Msg</em>: El mensaje recibido en binario.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   <item><p><em>Req</em>: any().</p></item>
   </list><p>
   <em><marker id="Valor_de_retorno">Valor de retorno</marker></em>
   </p><list>
   <item><p><em>Reply</em>: El atom reply.</p></item>
   <item><p><em>Content</em>: El contenido de la respuesta en binario.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   <item><p><em>State</em>: any().</p></item>
   </list>
</div></div>
<div class="function">
<h3 id="websocket_info/1">ws_handler:websocket_info(Info::{TipoMensaje::atom(), Ref::reference(), Msg::any()}, Req::req() (see module cowboy_req), State::any()) -&gt; {Reply::atom(), {Text::atom(), Content::binary()}, Req::req() (see module cowboy_req), State::any()}</h3>


<div class="description">

<p>
   Esta función se invoca cada vez que este proceso (servidor web) recibe un mensaje Erlang.
   En concreto, se emplea para reenviar los mensajes Erlang, recibidos por este proceso, al
   cliente web. Recepción de mensajes asíncronos y reenvío.
   <em><marker id="Parámetros_de_entrada">Parámetros de entrada</marker></em>
   </p><list>
   <item><p><em>TipoMensaje</em>: Identifica el tipo de mensaje que se enviará al cliente web.</p></item>
   <item><p><em>Ref</em>: Referencia que permite identificar el mensaje concreto.</p></item>
   <item><p><em>Msg</em>: any().</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   <item><p><em>State</em>: any().</p></item>
   </list><p>
   <em><marker id="Valor_de_retorno">Valor de retorno</marker></em>
   </p><list>
   <item><p><em>Reply</em>: El atom reply.</p></item>
   <item><p><em>Content</em>: El contenido de la respuesta en binario.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   <item><p><em>State</em>: any().</p></item>
   </list>
</div></div>
<div class="function">
<h3 id="websocket_terminate/1">ws_handler:websocket_terminate(_Reason::tuple(), _Req::req() (see module cowboy_req), _State::any()) -&gt; atom()</h3>


<div class="description">

<p>
   Cierra la conexión y termina el proceso.
   <em><marker id="Parámetros_de_entrada">Parámetros de entrada</marker></em>
   </p><list>
   <item><p><em>Reason</em>: Razón por la que se termina la conexión.</p></item>
   <item><p><em>Req</em>: cowboy_req:req().</p></item>
   <item><p><em>State</em>: any().</p></item>
   </list><p>
   <em><marker id="Valor_de_retorno">Valor de retorno</marker></em>
   </p><list>
   <item><p>Retorna el átomo ok.</p></item>
   </list>
</div></div></div>

<authors>

<aname>Alejandro Pernas Pan</aname>
<email>alejandro.pernas@udc.es</email>
<aname>Laura Otero Méndez</aname>
<email>inslom01@udc.es﻿</email>
<aname>Javier Toja Alamancos</aname>
<email>insjta00@udc.es﻿</email>
<aname>Sergio Cores Acha</aname>
<email>sergio.cores@udc.es</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_core_bg_manager (riak_core) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_core_bg_manager</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-concurrency_limit">concurrency_limit() = integer() &gt;= 0 | infinity</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/0">start_link() -&gt; {ok, pid()} | ignore | {error, term}</h3>


<div class="description">

<p>Starts the server</p>
</div></div>
<div class="function">
<h3 id="get_lock/1">get_lock(Type::any()) -&gt; ok | max_concurrency</h3>


<div class="description">

<p>Acquire a concurrency lock of the given type, if available,
       and associate the lock with the calling process.</p>
</div></div>
<div class="function">
<h3 id="get_lock/1-1">get_lock(Type::any(), Pid::pid() | [{atom(), any()}]) -&gt; ok | max_concurrency</h3>


<div class="description">

<p>Acquire a concurrency lock of the given type, if available,
       and associate the lock with the provided pid or metadata. If metadata
       is provided the lock is associated with the calling process</p>
</div></div>
<div class="function">
<h3 id="get_lock/1-2">get_lock(Type::any(), Pid::pid(), Info::[{atom(), any()}]) -&gt; ok | max_concurrency</h3>


<div class="description">

<p>Acquire a concurrency lock of the given type, if available,
       and associate the lock with the provided pid and metadata.</p>
</div></div>
<div class="function">
<h3 id="lock_count/0">lock_count() -&gt; integer()</h3>


<div class="description">

<p>Return the current concurrency count for all lock types</p>
</div></div>
<div class="function">
<h3 id="lock_count/1">lock_count(Type::any()) -&gt; integer()</h3>


<div class="description">

<p>Return the current concurrency count of the given lock type.</p>
</div></div>
<div class="function">
<h3 id="lock_types/0">lock_types() -&gt; [{any(), boolean(), concurrency_limit()}]</h3>


<div class="description">

<p>Return list of lock types and associated info. To be returned in this list
       a lock type must have had its concurrency set or have been enabled/disabled.</p>
</div></div>
<div class="function">
<h3 id="all_locks/0">all_locks() -&gt; [{any(), pid(), reference(), [{atom(), any()}]}]</h3>


<div class="description">

<p>Returns all currently held locks</p>
</div></div>
<div class="function">
<h3 id="query_locks/1">query_locks(Query::[{atom(), any()}]) -&gt; [{any(), pid(), reference(), [{atom(), any()}]}]</h3>


<div class="description">

<p>Queries the currently held locks returning any locks that match the given criteria.
       If no criteria is present then all held locks are returned. The query is a proplist of
       2-tuples. The keys 'pid' and 'type', have special meaning. If they are keys in the
       query proplists, only locks matching the corresponding pid or lock type are
       returned. All other pairs are compared for equality against the proplist passed as the third
       argument to get_lock/3. The returned value is a list of 4-tuples. The first element
       is the lock type; the second, the pid holding the lock; the third, the lock refernce,
       and the fourth is the metadata passed to get_lock/3.</p>
</div></div>
<div class="function">
<h3 id="enable/0">enable() -&gt; ok</h3>


<div class="description">

<p>Enable handing out of any locks</p>
</div></div>
<div class="function">
<h3 id="disable/0">disable() -&gt; ok</h3>


<div class="description">

<p>Disable handing out of any locks</p>
</div></div>
<div class="function">
<h3 id="enable/1">enable(Type::any()) -&gt; ok</h3>


<div class="description">

<p>Enable handing out of locks of the given type.</p>
</div></div>
<div class="function">
<h3 id="disable/1">disable(Type::any()) -&gt; ok</h3>


<div class="description">

<p>same as <code>disable(Type, false)</code></p>
</div></div>
<div class="function">
<h3 id="disable/1-1">disable(Type::any(), Kill::boolean()) -&gt; ok</h3>


<div class="description">

<p>Disable handing out of locks of the given type. If <code>Kill</code> is <code>true</code> any processes
       holding locks for the given type will be killed with reaseon <code>max_concurrency</code></p>
</div></div>
<div class="function">
<h3 id="concurrency_limit/1">concurrency_limit(Type::any()) -&gt; concurrency_limit()</h3>


<div class="description">

<p>Get the current maximum concurrency for the given lock type.</p>
</div></div>
<div class="function">
<h3 id="set_concurrency_limit/1">set_concurrency_limit(Type::any(), Limit::concurrency_limit()) -&gt; concurrency_limit()</h3>


<div class="description">

<p>same as <code>set_concurrency_limit(Type, Limit, false)</code></p>
</div></div>
<div class="function">
<h3 id="set_concurrency_limit/1-1">set_concurrency_limit(Type::any(), Limit::concurrency_limit(), Kill::boolean()) -&gt; concurrency_limit()</h3>


<div class="description">

<p>Set a new maximum concurrency for the given lock type and return
       the previous maximum or default. If more locks are held than the new
       limit how they are handled depends on the value of <code>Kill</code>. If <code>true</code>,
       then the extra locks are released by killing processes with reason <code>max_concurrency</code>.
       If <code>false</code>, then the processes holding the extra locks are aloud to do so until they
       are released.</p>
</div></div>
<div class="function">
<h3 id="concurrency_limit_reached/1">concurrency_limit_reached(Type::any()) -&gt; boolean()</h3>


<div class="description">

<p>Returns true if the number of held locks is at the limit for the given lock type</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

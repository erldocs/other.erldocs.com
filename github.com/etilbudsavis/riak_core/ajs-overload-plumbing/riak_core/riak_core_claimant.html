<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_core_claimant (riak_core) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_core_claimant</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-action">action() = leave<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| remove<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {replace, node()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {force_replace, node()}</h3></div>
    <div class="type"><h3 id="type-riak_core_ring">riak_core_ring() = <a href="riak_core_ring.html#type-riak_core_ring" class="seealso">riak_core_ring:riak_core_ring()</a></h3></div>
    <div class="type"><h3 id="type-ring_transition">ring_transition() = {<a href="#type-riak_core_ring" class="seealso">riak_core_ring()</a>, <a href="#type-riak_core_ring" class="seealso">riak_core_ring()</a>}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/0">start_link() -&gt; term()
</h3>


<div class="description">

<p>Spawn and register the riak_core_claimant server</p>
</div></div>
<div class="function">
<h3 id="plan/0">plan() -&gt; {error, term()} | {ok, [action()], [ring_transition()]}</h3>


<div class="description">

<p>Determine how the cluster will be affected by the staged changes,
       returning the set of pending changes as well as a list of ring
       modifications that correspond to each resulting cluster transition
       (eg. the initial transition that applies the staged changes, and
       any additional transitions triggered by later rebalancing).</p>
</div></div>
<div class="function">
<h3 id="commit/0">commit() -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Commit the set of staged cluster changes, returning true on success.
       A commit is only allowed to succeed if the ring is ready and if the
       current set of changes matches those computed by the most recent
       call to plan/0.</p>
</div></div>
<div class="function">
<h3 id="leave_member/1">leave_member(Node) -&gt; term()
</h3>


<div class="description">

<p>Stage a request for <code>Node</code> to leave the cluster. If committed, <code>Node</code>
       will handoff all of its data to other nodes in the cluster and then
       shutdown.</p>
</div></div>
<div class="function">
<h3 id="remove_member/1">remove_member(Node) -&gt; term()
</h3>


<div class="description">

<p>Stage a request for <code>Node</code> to be forcefully removed from the cluster.
       If committed, all partitions owned by <code>Node</code> will immediately be
       re-assigned to other nodes. No data on <code>Node</code> will be transfered to
       other nodes, and all replicas on <code>Node</code> will be lost.</p>
</div></div>
<div class="function">
<h3 id="replace/2">replace(Node, NewNode) -&gt; term()
</h3>


<div class="description">

<p>Stage a request for <code>Node</code> to be replaced by <code>NewNode</code>. If committed,
       <code>Node</code> will handoff all of its data to <code>NewNode</code> and then shutdown.
       The current implementation requires <code>NewNode</code> to be a fresh node that
       is joining the cluster and does not yet own any partitions of its own.</p>
</div></div>
<div class="function">
<h3 id="force_replace/2">force_replace(Node, NewNode) -&gt; term()
</h3>


<div class="description">

<p>Stage a request for <code>Node</code> to be forcefully replaced by <code>NewNode</code>.
       If committed, all partitions owned by <code>Node</code> will immediately be
       re-assigned to <code>NewNode</code>. No data on <code>Node</code> will be transfered,
       and all replicas on <code>Node</code> will be lost. The current implementation
       requires <code>NewNode</code> to be a fresh node that is joining the cluster
       and does not yet own any partitions of its own.</p>
</div></div>
<div class="function">
<h3 id="resize_ring/1">resize_ring(NewRingSize::integer()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Stage a request to resize the ring. If committed, all nodes
       will participate in resizing operation. Unlike other operations,
       the new ring is not installed until all transfers have completed.
       During that time requests continue to be routed to the old ring.
       After completion, the new ring is installed and data is safely
       removed from partitons no longer owner by a node or present
       in the ring.</p>
</div></div>
<div class="function">
<h3 id="abort_resize/0">abort_resize() -&gt; ok | {error, atom()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="clear/0">clear() -&gt; term()
</h3>


<div class="description">

<p>Clear the current set of staged transfers</p>
</div></div>
<div class="function">
<h3 id="ring_changed/2">ring_changed(Node, Ring) -&gt; term()
</h3>


<div class="description">

<p>This function is called as part of the ring reconciliation logic
       triggered by the gossip subsystem. This is only called on the one
       node that is currently the claimant. This function is the top-level
       entry point to the claimant logic that orchestrates cluster state
       transitions. The current code path:
           riak_core_gossip:reconcile/2
           --&gt; riak_core_ring:ring_changed/2
           -----&gt; riak_core_ring:internal_ring_changed/2
           --------&gt; riak_core_claimant:ring_changed/2</p>
</div></div>
<div class="function">
<h3 id="create_bucket_type/1">create_bucket_type(BucketType::bucket_type() (see module riak_core_bucket_type), Props::[{atom(), any()}]) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>??</p>
</div></div>
<div class="function">
<h3 id="bucket_type_status/1">bucket_type_status(BucketType::bucket_type() (see module riak_core_bucket_type)) -&gt; undefined | created | ready | active</h3>


<div class="description">

<p>??</p>
</div></div>
<div class="function">
<h3 id="activate_bucket_type/1">activate_bucket_type(BucketType::bucket_type() (see module riak_core_bucket_type)) -&gt; ok | {error, undefined | not_ready}</h3>


<div class="description">

<p>??</p>
</div></div>
<div class="function">
<h3 id="get_bucket_type/1">get_bucket_type(BucketType::bucket_type() (see module riak_core_bucket_type), X) -&gt; [{atom(), any()}] | X</h3>


<div class="description">

<p>Lookup the properties for <code>BucketType</code>. If there are no properties or
  the type is inactive, the given <code>Default</code> value is returned.</p>
</div></div>
<div class="function">
<h3 id="get_bucket_type/1-1">get_bucket_type(BucketType::bucket_type() (see module riak_core_bucket_type), X, RequireActive::boolean()) -&gt; [{atom(), any()}] | X</h3>


<div class="description">

<p>Lookup the properties for <code>BucketType</code>. If there are no properties or
  the type is inactive and <code>RequireActive</code> is <code>true</code>, the given <code>Default</code> value is
  returned.</p>
</div></div>
<div class="function">
<h3 id="update_bucket_type/1">update_bucket_type(BucketType::bucket_type() (see module riak_core_bucket_type), Props::[{atom(), any()}]) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>??</p>
</div></div>
<div class="function">
<h3 id="bucket_type_iterator/0">bucket_type_iterator() -&gt; iterator() (see module riak_core_metadata)</h3>


<div class="description">

<p>??</p>
</div></div>
<div class="function">
<h3 id="reassign_indices/1">reassign_indices(CState) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="init/1">init(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_call/3">handle_call(Request, From, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_cast/2">handle_cast(Msg, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_info/2">handle_info(Info, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="terminate/2">terminate(Reason, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="code_change/3">code_change(OldVsn, State, Extra) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

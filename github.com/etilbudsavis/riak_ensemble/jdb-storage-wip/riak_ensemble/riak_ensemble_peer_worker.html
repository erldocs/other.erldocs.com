<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_ensemble_peer_worker (riak_ensemble) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_ensemble_peer_worker</h1>
<h2 class="modsummary">
  Long-lived worker process used by riak_ensemble_peer to handle  
asynchronous work such as K/V gets and puts.</h2>
<div class="description">
<p>
  Long-lived worker process used by <url href="/home/pete/wefwefwef/docs/other/f9cacb4e93c1950f28646dba021b925947d4ddba/repo/jdb-storage-wip/.xml/riak_ensemble/./riak_ensemble_peer.xml">riak_ensemble_peer</url> to handle  
asynchronous work such as K/V gets and puts. The peer maintains a pool  
of workers and routes requests to workers based on object key, ensuring  
that operations that affect the same key are serialized on the same worker.  
Thus, workers also enable partitioned queuing. These workers can also be  
paused and resumed. This is used by the peer when necessary to enforce  
necessary barriers. For example, a leader will pause all workers before  
attempting to change ensemble membership, then resume workers after. This  
prevents workers from issuing requests during a changing ownership set,  
since those requests will likely be rejected.</p>
 
  <p>Note: pausing/resuming is best-effort. A worker currently involved
  in a request will not pause until after completing/failing the request.
  Thus, pause/resume is not designed to provide guarantees for correctness,
  but rather as a tool for optimization (eg. to prevent issues requests
  that will likely fail because some other correctness mechanism rejects them).</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/1">start(ETS::eid() (see module ets)) -&gt; {ok, pid()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="pause_workers/1">pause_workers(Workers::[pid()], ETS::tid() (see module ets)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="unpause_workers/1">unpause_workers(Workers::[pid()], ETS::tid() (see module ets)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="loop/1">loop(ETS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="maybe_pause/1">maybe_pause(ETS) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

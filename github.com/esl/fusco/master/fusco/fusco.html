<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>fusco (fusco) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>fusco</h1>
<h2 class="modsummary">Fast and Ultra Slim Connection Oriented HTTP Client.</h2>
<div class="description">
<p>Fast and Ultra Slim Connection Oriented HTTP Client
  </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-body">body() = binary() | undefined | pid()</h3></div>
    <div class="type"><h3 id="type-destination">destination() = {string(), integer() &gt;= 1, boolean()}</h3></div>
    <div class="type"><h3 id="type-header">header() = binary()</h3></div>
    <div class="type"><h3 id="type-headers">headers() = [{<a href="#type-header" class="seealso">header()</a>, iodata()}]</h3></div>
    <div class="type"><h3 id="type-host">host() = string()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {integer(), integer(), integer(), integer()}</h3></div>
    <div class="type"><h3 id="type-invalid_option">invalid_option() = any()</h3></div>
    <div class="type"><h3 id="type-method">method() = iodata()</h3></div>
    <div class="type"><h3 id="type-option">option() = {connect_timeout, timeout()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {send_retry, integer() >= 0}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {connect_options, <a href="#type-socket_options" class="seealso">socket_options()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {use_cookies, boolean()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {proxy, string()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {proxy_ssl_options, <a href="#type-socket_options" class="seealso">socket_options()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#type-invalid_option" class="seealso">invalid_option()</a></h3></div>
    <div class="type"><h3 id="type-options">options() = [<a href="#type-option" class="seealso">option()</a>]</h3></div>
    <div class="type"><h3 id="type-port_num">port_num() = 1..65535</h3></div>
    <div class="type"><h3 id="type-pos_timeout">pos_timeout() = integer() &gt;= 1 | infinity</h3></div>
    <div class="type"><h3 id="type-result">result() = {ok,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{binary(), binary()},<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-headers" class="seealso">headers()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-body" class="seealso">body()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-pos_timeout" class="seealso">pos_timeout()</a>}}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {error, atom()}</h3></div>
    <div class="type"><h3 id="type-socket">socket() = term()</h3></div>
    <div class="type"><h3 id="type-socket_options">socket_options() = [{atom(), term()} | atom()]</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/2">start(Destination, Options) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="start_link/2">start_link(Destination, Options) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="connect/1">connect(Client) -&gt; term()
</h3>


<div class="description">

<p>Starts a Client.</p>
</div></div>
<div class="function">
<h3 id="disconnect/1">disconnect(Client::pid()) -&gt; ok</h3>


<div class="description">

<p>Stops a Client.</p>
</div></div>
<div class="function">
<h3 id="request/1">request(Client::pid(), Path::iodata(), Method::method(), Hdrs::headers(), Body::iodata(), Timeout::pos_timeout()) -&gt; result()</h3>


<div class="description">

<p>Makes a request using a client already connected.</p>
</div></div>
<div class="function">
<h3 id="request/7">request(Client, Path::Host, Method, Hdrs, Body::RequestBody, SendRetry::RetryCount, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>Host = string()</code></li><li><code>Method = string() | atom()</code></li><li><code>Hdrs = [{Header, Value}]</code></li><li><code>Header = string() | binary() | atom()</code></li><li><code>Value = string() | binary()</code></li><li><code>RequestBody = iodata()</code></li><li><code>RetryCount = integer()</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Result = {ok, {{StatusCode, ReasonPhrase}, Hdrs, ResponseBody}} | {error, Reason}</code></li><li><code>StatusCode = integer()</code></li><li><code>ReasonPhrase = string()</code></li><li><code>ResponseBody = binary() | pid() | undefined</code></li><li><code>Reason = connection_closed | connect_timeout | timeout</code></li></ul>
<div class="description">

<p>Sends a request with a body.</p>
 
  <p>Instead of building and parsing URLs the target server is specified with
  a host, port, weither SSL should be used or not and a path on the server.
  For instance, if you want to request http://example.com/foobar you would
  use the following:<br />
  <code>Host</code> = <code>"example.com"</code><br />
  <code>Port</code> = <code>80</code><br />
  <code>Ssl</code> = <code>false</code><br />
  <code>Path</code> = <code>"/foobar"</code><br />
  <code>Path</code> must begin with a forward slash <code>/</code>.</p>
 
  <p><code>Method</code> is either a string, stating the HTTP method exactly as in the
  protocol, i.e: <code>"POST"</code> or <code>"GET"</code>. It could also be an atom, which is  
then coverted to an uppercase (if it isn't already) string.</p>
 
  <p><code>Hdrs</code> is a list of headers to send. Mandatory headers such as
  <code>Host</code>, <code>Content-Length</code> or <code>Transfer-Encoding</code> (for some requests)  
are added automatically.</p>
 
  <p><code>Body</code> is the entity to send in the request. Please don't include entity
  bodies where there shouldn't be any (such as for <code>GET</code>).</p>
 
  <p><code>Timeout</code> is the timeout for the request in milliseconds.</p>
 
  <p><code>Options</code> is a list of options.</p>
 
  <p>Options:</p>
 
  <p><code>{connect_timeout, Milliseconds}</code> specifies how many milliseconds the  
client can spend trying to establish a connection to the server. This  
doesn't affect the overall request timeout. However, if it's longer than  
the overall timeout it will be ignored. Also note that the TCP layer my  
choose to give up earlier than the connect timeout, in which case the  
client will also give up. The default value is infinity, which means that  
it will either give up when the TCP stack gives up, or when the overall  
request timeout is reached.</p>
 
  <p><code>{connect_options, Options}</code> specifies options to pass to the socket at
  connect time. This makes it possible to specify both SSL options and
  regular socket options, such as which IP/Port to connect from etc.
  Some options must not be included here, namely the mode, <code>binary</code>
  or <code>list</code>, <code>{active, boolean()}</code>, <code>{active, once}</code> or <code>{packet, Packet}</code>.  
These options would confuse the client if they are included.  
Please note that these options will only have an effect on *new*  
connections, and it isn't possible for different requests  
to the same host uses different options unless the connection is closed  
between the requests. Using HTTP/1.0 or including the "Connection: close"  
header would make the client close the connection after the first  
response is received.</p>
 
  <p><code>{send_retry, N}</code> specifies how many times the client should retry
  sending a request if the connection is closed after the data has been
  sent. The default value is <code>1</code>.</p>
 
  <p><code>{proxy, ProxyUrl}</code> if this option is specified, a proxy server is used as  
an intermediary for all communication with the destination server. The link  
to the proxy server is established with the HTTP CONNECT method (RFC2817).  
Example value: {proxy, "http://john:doe@myproxy.com:3128"}</p>
 
  <p><code>{proxy_ssl_options, SslOptions}</code> this is a list of SSL options to use for
  the SSL session created after the proxy connection is established. For a
  list of all available options, please check OTP's ssl module manpage.</p>
</div></div>
<div class="function">
<h3 id="init/1">init(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_call/3">handle_call(X1, From, Client_state) -&gt; term()
</h3>


<div class="description">

<p>This function fills in the Client record used in the requests and obtains
  the socket.</p>
</div></div></div>

<authors>

<aname>Oscar Hellstr√∂m</aname>
<email>oscar@hellstrom.st</email>
<aname>Diana Parra Corbacho</aname>
<email>diana.corbacho@erlang-solutions.com</email>
<aname>Ramon Lastres Guerrero</aname>
<email>ramon.lastres@erlang-solutions.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>session_presence (controller_app) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>session_presence</h1>
<h2 class="modsummary">Manages the session presence.</h2>
<div class="description">
<p>Manages the session presence.
   Stores all session in a mnesia table.
  </p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="init/0">init() -&gt; ok | {aborted, Reason}</h3>


<div class="description">

<p>
  Initializes the mnesia table
  if there is an item <code>{backend_nodes, [ nodes() ]</code> in the app.config,
  init will ping them and try to replicate the session table from the first
  one that reacts. Only if that list does not exist or no one reacts to a ping,
  a local session table will be created.
  This local table can furtheron be used by other starting backends as a
  replication source
 </p>
</div></div>
<div class="function">
<h3 id="add/1">add(UserId::integer(), SessionId::string(), ClientType::im | mail | web) -&gt; ok | {error, Reason}</h3>


<div class="description">

<p>
  Adds a user to the session presence.
 </p>
</div></div>
<div class="function">
<h3 id="remove/1">remove(UserId::integer(), SessionId::string()) -&gt; ok | {error, not_online} | {error, Reason}</h3>


<div class="description">

<p>
  Removes a user from the session presence.
 </p>
</div></div>
<div class="function">
<h3 id="handle_corpse/1">handle_corpse(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="is_online/1">is_online(UserId::integer()) -&gt; boolean()</h3>


<div class="description">

<p>
  Checks if a user is online
 </p>
</div></div>
<div class="function">
<h3 id="get_session_id/1">get_session_id(UserId::integer()) -&gt; {ok, string()} | {error, not_online}</h3>


<div class="description">

<p>
  Gets the session id for a user.
 </p>
</div></div>
<div class="function">
<h3 id="get_all/0">get_all() -&gt; [{integer(), string(), im | mail | web}]</h3>


<div class="description">

<p>
  Gets user id and session id of all online users, example:
  [{UserId, SessionId, ClientType}] = get_all()
 </p>
</div></div>
<div class="function">
<h3 id="get_all_by_type/1">get_all_by_type(ClientType::im | mail | web) -&gt; [{integer(), string()}]</h3>


<div class="description">

<p>
  Gets user id and session id of all online users by their
  interface type, example:
  [{UserId, SessionId}] = get_all_by_type(ClientType)
 </p>
</div></div>
<div class="function">
<h3 id="count_all/0">count_all() -&gt; integer()</h3>


<div class="description">

<p>
  Gives number of all online users, example:
  Number = count_all()
 </p>
</div></div>
<div class="function">
<h3 id="count_all_by_type/1">count_all_by_type(ClientType::im | mail | client) -&gt; integer()</h3>


<div class="description">

<p>
  Gives number of all online users of particular interface, example:
  Number = count_all_by_type(ClientType)
 </p>
</div></div></div>

<authors>

<aname>Andre Hilsendeger</aname>
<email>Andre.Hilsendeger@gmail.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

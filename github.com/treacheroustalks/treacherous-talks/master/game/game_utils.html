<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>game_utils (game) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>game_utils</h1>
<h2 class="modsummary">Provides common utility functions for the game application.</h2>
<div class="description">
<p>Provides common utility functions for the game application</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="update_game/1">update_game(ID::integer(), Game::#game{}) -&gt; {ok, ID} | Error</h3>


<div class="description">

<p>
  Updates a game with the given ID with the given game record in the database.
  Only if game in not waiting, use this function. Otherwise use reconfig_game
   to update game record.</p>
</div></div>
<div class="function">
<h3 id="get_game_player/1">get_game_player(Game::#game{}) -&gt; {ok, GamePlayer::#game_player{}} | Error</h3>


<div class="description">

<p>creates a game_players record from the given game record</p>
</div></div>
<div class="function">
<h3 id="get_keyprefix/2">get_keyprefix(X1::{id, ID::integer()} | {game_current, Current::#game_current{}}) -&gt; KeyPrefix::string() | {error, notfound}</h3>


<div class="description">

<p>Builds a keyprefix, based on the current game
  example output: "123451-1903-fall-order_phase"</p>
</div></div>
<div class="function">
<h3 id="get_current_game/1">get_current_game(ID::integer()) -&gt; {ok, CurrentGame::#game_current{}} | Error</h3>


<div class="description">

<p>Returns the country atom which a user is playing in a game</p>
</div></div>
<div class="function">
<h3 id="get_game_current_key/1">get_game_current_key(ID::integer()) -&gt; binary()</h3>


<div class="description">

<p>Returns the current game key</p>
</div></div>
<div class="function">
<h3 id="get_game_state/1">get_game_state(GameID::integer()) -&gt; {ok, GameState::#game_state{}} | Error</h3>


<div class="description">

<p>Returns the game state of the game with id ID</p>
</div></div>
<div class="function">
<h3 id="get_all_orders/1">get_all_orders(ID::integer()) -&gt; OrderList::[tuple()]</h3>


<div class="description">

<p>
  Gets all orders in the current season for a given game ID.</p>
</div></div>
<div class="function">
<h3 id="get_game_order/1">get_game_order(ID) -&gt; [tuple()]</h3>


<div class="description">

<p>Gets the game orders for a given key
  Key: "3457892458-1901-fall-order_phase-england"</p>
</div></div>
<div class="function">
<h3 id="userlist/1">userlist(Game::#game{}) -&gt; CountryUserList::[tuple()]</h3>


<div class="description">

<p>
  Creates pairs of users and their usernames</p>
</div></div>
<div class="function">
<h3 id="get_default_map/0">get_default_map() -&gt; Map::term()</h3>


<div class="description">

<p>
  Creates a standard map</p>
</div></div>
<div class="function">
<h3 id="delete_map/1">delete_map(Map::digraph()) -&gt; ok</h3>


<div class="description">

<p>
  Deletes a map</p>
</div></div>
<div class="function">
<h3 id="to_mapterm/1">to_mapterm(RuleHandle) -&gt; term()
</h3>


<div class="description">

<p>
  Converts a handle of a digraph map into interpretable erlang terms</p>
</div></div>
<div class="function">
<h3 id="to_rule_map/1">to_rule_map(MapTerm) -&gt; term()
</h3>


<div class="description">

<p>
  Converts a map in erlang terms into a map handle, which can be used
  by the rule engine</p>
</div></div>
<div class="function">
<h3 id="get_keys/1">get_keys(Field::any(), Val::any()) -&gt; {ok, Keys::list()} | {error, Error}</h3>


<div class="description">

<p>
  Gets keys, Field is a field in a record and Val its value.</p>
</div></div>
<div class="function">
<h3 id="get_db_obj/1">get_db_obj(Bucket::binary(), Key::any(), Options::[any()]) -&gt; {ok, DBObj::any()} | Other</h3>


<div class="description">

<p>Gets and object from the database, according to the given
  bucket and key.</p>
</div></div>
<div class="function">
<h3 id="update_db_obj/1">update_db_obj(OldObject::any(), NewValue::any(), Options::[any()]) -&gt; {ok, NewValue}</h3>


<div class="description">

<p>Updates a database object with a new value</p>
</div></div>
<div class="function">
<h3 id="translate_game_order/1">translate_game_order(GameId::integer(), GameOrderList::[tuple()], Country::country()) -&gt; [tuple()]</h3>


<div class="description">

<p>
    to translate the pasred user entry for order to agree with our rule engine</p>
</div></div>
<div class="function">
<h3 id="is_power_user/1">is_power_user(Role::atom()) -&gt; boolean()</h3>


<div class="description">

<p>
  Checks if a user role is a power user (moderator or operator)</p>
</div></div>
<div class="function">
<h3 id="get_game_msg_tree/1">get_game_msg_tree(GameId) -&gt; term()
</h3>


<div class="description">

<p>  
Get a hierachical tree,  
so that operator UI can use this tree to render in-game message navigator</p>
 
  <p>Output Example:
  {ok, {year, [{1901,
           [{spring_order_phase,
             [england,germany]},
            {spring-retreat_phase,
             [english,germany,austria]}
           ]
          },
          {1902,
           [{spring_order_phase,
             [english,germany]}]}]}}</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>squeue (sbroker) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>squeue</h1>
<h2 class="modsummary">
  This module provides sojourn-time based active queue management with a
  similar API to OTP's queue module.</h2>
<div class="description">
<p>
  This module provides sojourn-time based active queue management with a
  similar API to OTP's <code>queue</code> module.</p>
 
  <p>A subset of the <code>squeue</code> API is a subset of the <code>queue</code> module's API with one
  exception: when <code>{value, Item}</code> is returned by <code>queue</code>, <code>squeue</code> returns
  <code>{SojournTime, Item}</code>, where <code>SojournTime</code> (<code>non_neg_integer()</code>) is the  
sojourn time of the item (or length of time an item waited in the queue).</p>
 
  <p><code>squeue</code> also provides an optional first argument to some functions in common
  with <code>queue</code>: <code>Time</code>. This argument is of type <code>non_neg_integer()</code> and sets
  the current time of the queue, if <code>Time</code> is greater than (or equal) to
  the queue's previous time. When the <code>Time</code> argument is included items
  may be dropped by the queue's management algorithm. The dropped items
  will be included in the return value when the queue itself is also
  returned. The dropped items are a list of the form: <code>[{SojournTime, Item}]</code>,
  which is ordered with the item with the greatest <code>SojournTime</code> (i.e. the  
oldest) at the head.</p>
 
  <p><code>squeue</code> includes 3 queue management algorithms: <code>squeue_naive</code>,
  <code>squeue_timeout</code>, <code>squeue_codel</code>.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-squeue">squeue() = <a href="#type-squeue" class="seealso">squeue</a>(term())</h3></div>
    <div class="type"><h3 id="type-squeue">squeue() = <a href="#type-squeue" class="seealso">squeue</a>(term())</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/0">new() -&gt; S</h3>

<ul class="type">
<li><code>S = squeue()</code></li></ul>
<div class="description">

<p>Returns an empty queue, <code>S</code>, with the <code>squeue_naive</code> management
  algorithm, and time of <code>0</code>.</p>
</div></div>
<div class="function">
<h3 id="new/1">new(Time) -&gt; S</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>S = squeue()</code></li></ul>
<div class="description">

<p>Returns a tuple containing an empty list of dropped items, <code>Drops</code>, and
  an empty queue, <code>S</code>, with the <code>squeue_naive</code> management algorithm, and time
  of <code>Time</code>.</p>
</div></div>
<div class="function">
<h3 id="new/2">new(Module, Args) -&gt; S</h3>

<ul class="type">
<li><code>Module = module()</code></li><li><code>Args = any()</code></li><li><code>S = squeue()</code></li></ul>
<div class="description">

<p>Returns an empty queue, <code>S</code>, with the <code>Module</code> management algorithm
  started with arguments <code>Args</code> and time of <code>0</code>.</p>
</div></div>
<div class="function">
<h3 id="new/3">new(Time, Module, Args) -&gt; S</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>Module = module()</code></li><li><code>Args = any()</code></li><li><code>S = squeue()</code></li></ul>
<div class="description">

<p>Returns a tuple containing an empty list of dropped items, <code>Drops</code>, and
  an empty queue, <code>S</code>, with the <code>Module</code> management algorithm started with
  arguments <code>Args</code> and time of <code>Time</code>.</p>
</div></div>
<div class="function">
<h3 id="is_queue/1">is_queue(Term) -&gt; Bool</h3>

<ul class="type">
<li><code>Term = any()</code></li><li><code>Bool = boolean()</code></li></ul>
<div class="description">

<p>Tests if a term, <code>Term</code>, is an <code>squeue</code> queue, returns <code>true</code> if is,
  otherwise <code>false</code>.</p>
</div></div>
<div class="function">
<h3 id="len/1">len(S) -&gt; Len</h3>

<ul class="type">
<li><code>S = squeue()</code></li><li><code>Len = non_neg_integer()</code></li></ul>
<div class="description">

<p>Returns the length of the queue, <code>S</code>.</p>
</div></div>
<div class="function">
<h3 id="in/2">in(Item, S) -&gt; {Drops, NS}</h3>

<ul class="type">
<li><code>S = squeue(Item)</code></li><li><code>Drops = [{SojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Drop items, <code>Drops</code>, from the queue, <code>S</code>, and then inserts the item,
  <code>Item</code>, at the tail of queue, <code>S</code>. Returns <code>{Drops, NS}</code>, where <code>Drops</code> is
  the list of dropped items and their sojourn times and <code>NS</code> is the resulting
  queue without <code>Drops</code> and with <code>Item</code>.</p>
</div></div>
<div class="function">
<h3 id="in/3">in(Time, Item, S) -&gt; {Drops, NS}</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>S = squeue(Item)</code></li><li><code>Drops = [{SojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Advances the queue, <code>S</code>, to time <code>Time</code> and drops item, then inserts
  the item, <code>Item</code>, at the tail of queue, <code>S</code>. Returns a tuple containing the
  dropped items and their sojourn times, <code>Drops</code>, and resulting queue, <code>NS</code>.</p>
 
  <p>If <code>Time</code> is less than the current time of the queue time, the current time
  is used instead.</p>
</div></div>
<div class="function">
<h3 id="out/1">out(S) -&gt; {Result, Drops, NS}</h3>

<ul class="type">
<li><code>S = squeue(Item)</code></li><li><code>Result = empty | {SojournTime::non_neg_integer(), Item}</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Drops items, <code>Drops</code>, from the queue, <code>S</code>, and then removes the item,
  <code>Item</code>, from the head of the remaining queue. Returns
  <code>{{SojournTime, Item}, Drops, NS}</code>, where <code>SojournTime</code> is the time length of
  time <code>Item</code> spent in the queue, <code>Drops</code> is the list of dropped items and
  their sojourn times and <code>NS</code> is the resulting queue without <code>Drops</code> and
  <code>Item</code>. If <code>S</code> is empty after dropping items <code>{empty, Drops, S}</code> is returned.</p>
 
  <p>This function is different from <code>queue:out/1</code>, as the sojourn time
  is included in the result in the place of the atom <code>value</code> and the return
  value is a 3-tuple with the drop items, <code>Drops</code>, instead of a 2-tuple.</p>
</div></div>
<div class="function">
<h3 id="out/2">out(Time, S) -&gt; {Result, Drops, NS}</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>S = squeue(Item)</code></li><li><code>Result = empty | {SojournTime::non_neg_integer(), Item}</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Advances the queue, <code>S</code>, to time <code>Time</code> and drops items, <code>Drops</code>, then
  removes the item, <code>Item</code>, from the head of queue, <code>S</code>. Returns
  <code>{{SojournTime, Item}, Drops, NS}</code>, where <code>SojournTime</code> is the time length of
  time <code>Item</code> spent in the queue, <code>Drops</code> is the list of dropped items and
  their sojourn times, and <code>NS</code> is the resulting queue without the removed and
  dropped items, If the queue is empty after dropping items
  <code>{empty, Drops, NS}</code> is returned.</p>
 
  <p>This function is slightly different from <code>queue:out/1</code>, as the sojourn time
  is included in the result in the place of the atom <code>value</code> and items can be  
dropped.</p>
 
  <p>If <code>Time</code> is less than the current time of the queue time, the current time
  is used instead.</p>
</div></div>
<div class="function">
<h3 id="out_r/1">out_r(S) -&gt; {Result, Drops, NS}</h3>

<ul class="type">
<li><code>S = squeue(Item)</code></li><li><code>Result = empty | {SojournTime::non_neg_integer(), Item}</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Drops items, <code>Drops</code>, from the queue, <code>S</code>, and then removes the item,
  <code>Item</code>, from the tail of the remaining queue. Returns
  <code>{{SojournTime, Item}, Drops, NS}</code>, where <code>SojournTime</code> is the time length of
  time <code>Item</code> spent in the queue, <code>Drops</code> is the list of dropped items and
  their sojourn times and <code>NS</code> is the resulting queue without <code>Drops</code> and
  <code>Item</code>. If <code>S</code> is empty after dropping items <code>{empty, Drops, S}</code> is returned.</p>
 
  <p>This function is different from <code>queue:out_r/1</code>, as the sojourn time
  is included in the result in the place of the atom <code>value</code> and the return
  value is a 3-tuple with the drop items, <code>Drops</code>, instead of a 2-tuple.</p>
</div></div>
<div class="function">
<h3 id="out_r/2">out_r(Time, S) -&gt; {Result, Drops, NS}</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>S = squeue(Item)</code></li><li><code>Result = empty | {SojournTime::non_neg_integer(), Item}</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Advances the queue, <code>S</code>, to time <code>Time</code> and drops items, <code>Drops</code>, then
  removes the item, <code>Item</code>, from the tail of queue, <code>S</code>. Returns
  <code>{{SojournTime, Item}, Drops, NS}</code>, where <code>SojournTime</code> is the time length of
  time <code>Item</code> spent in the queue, <code>Drops</code> is the list of dropped items and
  their sojourn times and <code>NS</code> is the resulting queue without the removed and
  dropped items, If the queue is empty after dropping items
  <code>{empty, Drops, NS}</code> is returned.</p>
 
  <p>This function is slightly different from <code>queue:out_r/1</code>, as the sojourn time
  is included in the result in the place of the atom <code>value</code> and items can be  
dropped.</p>
 
  <p>If <code>Time</code> is less than the current time of the queue time, the current time
  is used instead.</p>
</div></div>
<div class="function">
<h3 id="to_list/1">to_list(S) -&gt; List</h3>

<ul class="type">
<li><code>S = squeue(Item)</code></li><li><code>List = [Item]</code></li></ul>
<div class="description">

<p>Returns a list of items, <code>List</code>, in the queue, <code>S</code>.</p>
 
  <p>The order of items in <code>List</code> matches their order in the queue, <code>S</code>, so that
  the item at the head of the queue is at the head of the list.</p>
</div></div>
<div class="function">
<h3 id="join/2">join(S1, S2) -&gt; NS</h3>

<ul class="type">
<li><code>S1 = squeue(Item)</code></li><li><code>S2 = squeue(Item)</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Joins two queues, <code>S1</code> and <code>S2</code>, into one queue, <code>NS</code>, with the items in
  <code>S1</code> at the head and the items in <code>S2</code> at the tail.</p>
 
  <p>This function raises the error <code>badtime</code> if any item in queue <code>S1</code> was added
  after any item in queue <code>S2</code>.</p>
 
  <p>This function raises the error <code>badtime</code> if the current time of the queues,
  <code>S1</code> and <code>S2</code>, are not the same.</p>
</div></div>
<div class="function">
<h3 id="filter/2">filter(Filter, S) -&gt; {Drops, NS}</h3>

<ul class="type">
<li><code>Filter = (Item) -&gt; Bool::boolean() | [Item]</code></li><li><code>S = squeue(Item)</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Applys a fun, <code>Filter</code>, to all items in the queue, <code>S</code>, and returns the
  resulting queue, <code>NS</code>.</p>
 
  <p>If <code>Filter(Item)</code> returns <code>true</code>, the item appears in the new queue.</p>
 
  <p>If <code>Filter(Item)</code> returns <code>false</code>, the item does not appear in the new  
queue.</p>
 
  <p>If <code>Filter(Item)</code> returns a list of items, these items appear in the new
  queue with all items having the start time of the origin item, <code>Item</code>.</p>
</div></div>
<div class="function">
<h3 id="filter/3">filter(Time, Filter, S) -&gt; {Drops, NS}</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>Filter = (Item) -&gt; Bool::boolean() | [Item]</code></li><li><code>S = squeue(Item)</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue(Item)</code></li></ul>
<div class="description">

<p>Advances the queue, <code>S</code>, to time <code>Time</code>  and drops items, then applys a
  fun, <code>Filter</code>, to all remaining items in the queue. Returns a tuple
  containing the dropped items and their sojourn times, <code>Drops</code>, and the new
  queue, <code>NS</code>.</p>
 
  <p>If <code>Filter(Item)</code> returns <code>true</code>, the item appears in the new queue.</p>
 
  <p>If <code>Filter(Item)</code> returns <code>false</code>, the item does not appear in the new  
queue.</p>
 
  <p>If <code>Filter(Item)</code> returns a list of items, these items appear in the new
  queue with all items having the start time of the origin item, <code>Item</code>.</p>
 
  <p>If <code>Time</code> is less than the current time of the queue time, the current time
  is used instead.</p>
</div></div>
<div class="function">
<h3 id="time/1">time(S) -&gt; Time</h3>

<ul class="type">
<li><code>S = squeue()</code></li><li><code>Time = non_neg_integer()</code></li></ul>
<div class="description">

<p>Returns the current time , <code>Time</code>, of the queue, <code>S</code>.</p>
</div></div>
<div class="function">
<h3 id="timeout/2">timeout(Time, S) -&gt; {Drops, NS}</h3>

<ul class="type">
<li><code>Time = non_neg_integer()</code></li><li><code>S = squeue(Item)</code></li><li><code>Drops = [{DropSojournTime::non_neg_integer(), Item}]</code></li><li><code>NS = squeue()</code></li></ul>
<div class="description">

<p>Advances the queue, <code>S</code>, to time <code>Time</code> and drops item. Returns a tuple
  containing the dropped items and their sojourn times, <code>Drops</code>, and resulting
  queue, <code>NS</code>.</p>
 
  <p>If <code>Time</code> is less than the current time of the queue time, the current time
  is used instead.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>leader_cron_task (leader_cron) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>leader_cron_task</h1>
<h2 class="modsummary">   
The leader_cron_task module provides different methods for scheduling   
a task to be executed periodically in the future.</h2>
<div class="description">
<p>   
The leader_cron_task module provides different methods for scheduling   
a task to be executed periodically in the future. The supported methods   
are one shot, sleeper, and cron mode.</p>
  
   <p>A oneshot schedule executes a task once after sleeping a specified   
number of milliseconds or at a given datetime.</p>
  
   <p><code>
   {oneshot, 60000} % execute task once after waiting a minute
   {oneshot, {{2012, 2, 23}, {1, 0, 0}}} % execute task on Feb 23, 2012 at 1 am
   </code></p>
  
   <p>A sleeper mode schedule repeatedly executes a task then sleeps for a   
specified number of milliseconds before repeating the task.</p>
  
   <p><code>{sleeper, 5000} % execute task then wait 5 seconds before the
   next execution</code></p>
  
   <p>A cron mode schedule acts similarly to Unix cron. The schedule is   
defined by the cron tuple</p>
  
   <p><code>{cron, {Minute, Hour, DayOfMonth, Month, DayOfWeek}}</code></p>
  
   <p>The valid range of values for these fields are</p>
  
   <pre class="sh_erlang">
   Field         Valid Range
   ------------  -------------------
   minute        0 - 59
   hour          0 - 23
   day of month  1 - 31
   month         1 - 12
   day of week   0 - 6 (Sunday is 0) </pre>
  
   <p>The semantics of these fields align with Unix cron. Each field   
specifies which values in the range are valid for task execution. The   
values can be given as a range, a list or the atom 'all'.</p>
  
   <pre class="sh_erlang">
   Field Spec                     Example            Unix Cron
   -----------------------------  -----------------  ---------
   all                            all                *
   {integer(), integer{}}         {1, 5}             1-5
   [integer()]                    [1, 3, 7]          1,3,7
  
   # old range and list format is also supported
   {range, integer(), integer()}  {range, 1, 5}      1-5
   {list, [integer()]}            {list, [1, 3, 7]}  1,3,7</pre>
  
   <p>If the day of month is set to a day which does not exist in the current   
month (such as 31 for February) the day is skipped. Setting day of month   
to 31 does _not_ mean the last day of the month. This aligns with Unix   
cron.</p>
  
   <p>Specified dates and times are all handled in UTC.</p>
  
   When a task takes longer than the time to the next valid period (or
   periods) the overlapped periods are skipped.
  </div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-cron">cron() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{cron,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Minute :: <a href="#type-cronspec" class="seealso">cronspec()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hour :: <a href="#type-cronspec" class="seealso">cronspec()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DayOfMonth :: <a href="#type-cronspec" class="seealso">cronspec()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Month :: <a href="#type-cronspec" class="seealso">cronspec()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;DayOfWeek :: <a href="#type-cronspec" class="seealso">cronspec()</a>}}</h3></div>
    <div class="type"><h3 id="type-cronspec">cronspec() = all | [<a href="#type-rangespec" class="seealso">rangespec()</a> | <a href="#type-listspec" class="seealso">listspec()</a>]</h3></div>
    <div class="type"><h3 id="type-datetime">datetime() = <a href="calendar.html#type-datetime" class="seealso">calendar:datetime()</a></h3></div>
    <div class="type"><h3 id="type-execargs">execargs() = <a href="#type-mfargs" class="seealso">mfargs()</a> | <a href="#type-funcargs" class="seealso">funcargs()</a></h3></div>
    <div class="type"><h3 id="type-funcargs">funcargs() = {Function :: function(), Args :: [term()]}</h3></div>
    <div class="type"><h3 id="type-listspec">listspec() = {list, Values :: [integer()]}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| [integer()]<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| integer()</h3></div>
    <div class="type"><h3 id="type-mfargs">mfargs() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Module :: atom(), Function :: atom(), Args :: [term()]}</h3></div>
    <div class="type"><h3 id="type-oneshot">oneshot() = {oneshot, Millis :: integer() >= 1 | <a href="#type-datetime" class="seealso">datetime()</a>}</h3></div>
    <div class="type"><h3 id="type-rangespec">rangespec() = {range, Min :: integer(), Max :: integer()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {Min :: integer(), Max :: integer()}</h3></div>
    <div class="type"><h3 id="type-schedule">schedule() = <a href="#type-oneshot" class="seealso">oneshot()</a> | <a href="#type-sleeper" class="seealso">sleeper()</a> | <a href="#type-cron" class="seealso">cron()</a></h3></div>
    <div class="type"><h3 id="type-sleeper">sleeper() = {sleeper, Millis :: integer() &gt;= 1}</h3></div>
    <div class="type"><h3 id="type-status">status() = waiting | running | done | error</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/2">start_link(Schedule, Exec) -&gt; {ok, pid()} | {error, Reason}</h3>

<ul class="type">
<li><code>Schedule = schedule()</code></li><li><code>Exec = execargs()</code></li><li><code>Reason = term()</code></li></ul>
<div class="description">

<p>
  Creates a linked process which schedules the function in the
  specified module with the given arguments to be run according
  to the given schedule.
 </p>
</div></div>
<div class="function">
<h3 id="status/1">status(Pid::pid()) -&gt; {Status, ScheduleTime, TaskPid}</h3>

<ul class="type">
<li><code>Status = status()</code></li><li><code>ScheduleTime = datetime() | pos_integer() | {error, Reason}</code></li><li><code>Reason = term()</code></li><li><code>TaskPid = pid()</code></li></ul>
<div class="description">

<p>
  Gets the current status of the task and the trigger time. If running
  the trigger time denotes the time the task started. If waiting the
  time denotes the next time the task will run. If done the time the
  task ran. If error the cause of the error.
 </p>
</div></div>
<div class="function">
<h3 id="stop/1">stop(Pid::pid()) -&gt; ok</h3>


<div class="description">

<p>
  Stops the task.
 </p>
</div></div></div>

<authors>

<aname>Jeremy Raymond</aname>
<email>jeraymond@gmail.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_kv_index_fsm (riak_core) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_kv_index_fsm</h1>
<h2 class="modsummary">The index fsm manages the execution of secondary index queries.</h2>
<div class="description">
<p>The index fsm manages the execution of secondary index queries.</p>
 
       <p>The index fsm creates a plan to achieve coverage       
of the cluster using the minimum       
possible number of VNodes, sends index query       
commands to each of those VNodes, and compiles the       
responses.</p>
 
       <p>The number of VNodes required for full
       coverage is based on the number
       of partitions, the number of available physical
       nodes, and the bucket n_val.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="use_ack_backpressure/0">use_ack_backpressure() -&gt; boolean()</h3>


<div class="description">

<p>Returns <code>true</code> if the new ack-based backpressure index
  protocol should be used.  This decision is based on the
  <code>index_backpressure</code> setting in <code>riak_kv</code>'s application
  environment.</p>
</div></div>
<div class="function">
<h3 id="req/1">req(Bucket::binary(), ItemFilter::term(), Query::term()) -&gt; term()</h3>


<div class="description">

<p>Construct the correct index command record.</p>
</div></div>
<div class="function">
<h3 id="init/2">init(From, X2) -&gt; term()
</h3>


<div class="description">

<p>Return a tuple containing the ModFun to call per vnode,
  the number of primary preflist vnodes the operation
  should cover, the service to use to check for available nodes,
  and the registered name to use to access the vnode master process.</p>
</div></div>
<div class="function">
<h3 id="process_results/2">process_results(X1, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="finish/2">finish(X1, StateData) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

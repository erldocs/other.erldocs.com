<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>lasp_core (lasp) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>lasp_core</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-actor">actor() = term()</h3></div>
    <div class="type"><h3 id="type-args">args() = list()</h3></div>
    <div class="type"><h3 id="type-func">func() = atom()</h3></div>
    <div class="type"><h3 id="type-id">id() = binary()</h3></div>
    <div class="type"><h3 id="type-metadata">metadata() = <a href="orddict.html#type-orddict" class="seealso">orddict:orddict()</a></h3></div>
    <div class="type"><h3 id="type-operation">operation() = {atom(), <a href="#type-value" class="seealso">value()</a>} | {atom(), <a href="#type-value" class="seealso">value()</a>, <a href="#type-value" class="seealso">value()</a>}</h3></div>
    <div class="type"><h3 id="type-pending_threshold">pending_threshold() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{threshold, read | wait, pid(), <a href="#type-type" class="seealso">type()</a>, <a href="#type-threshold" class="seealso">threshold()</a>}</h3></div>
    <div class="type"><h3 id="type-store">store() = <a href="ets.html#type-tid" class="seealso">ets:tid()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="eleveldb.html#type-db_ref" class="seealso">eleveldb:db_ref()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| atom()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| reference()<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| pid()</h3></div>
    <div class="type"><h3 id="type-threshold">threshold() = <a href="#type-value" class="seealso">value()</a> | {strict, <a href="#type-value" class="seealso">value()</a>}</h3></div>
    <div class="type"><h3 id="type-type">type() = lasp_ivar | lasp_orset | lasp_orset_gbtree</h3></div>
    <div class="type"><h3 id="type-value">value() = term()</h3></div>
    <div class="type"><h3 id="type-var">var() = {<a href="#type-id" class="seealso">id()</a>, <a href="#type-type" class="seealso">type()</a>, <a href="#type-metadata" class="seealso">metadata()</a>, <a href="#type-value" class="seealso">value()</a>}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/1">start(Identifier::atom()) -&gt; {ok, store()} | {error, term()}</h3>


<div class="description">

<p>Initialize the storage backend.</p>
</div></div>
<div class="function">
<h3 id="filter/1">filter(Id::id(), Function::function(), AccId::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Filter values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a filter over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared
       variables.
 </p>
</div></div>
<div class="function">
<h3 id="fold/1">fold(Id::id(), Function::function(), AccId::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Fold values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a fold over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared
       variables.
 </p>
</div></div>
<div class="function">
<h3 id="map/1">map(Id::id(), Function::function(), AccId::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Map values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a map over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared
       variables.
 </p>
</div></div>
<div class="function">
<h3 id="intersection/1">intersection(Left::id(), Right::id(), Intersection::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the intersection of two sets.</p>
 
       <p>Computes the intersection of two sets and bind the result
       to a third.
 </p>
</div></div>
<div class="function">
<h3 id="union/1">union(Left::id(), Right::id(), Union::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the union of two sets.</p>
 
       <p>Computes the union of two sets and bind the result
       to a third.
 </p>
</div></div>
<div class="function">
<h3 id="product/1">product(Left::id(), Right::id(), Product::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the cartesian product of two sets.</p>
 
       <p>Computes the cartestian product of two sets and bind the result
       to a third.
 </p>
</div></div>
<div class="function">
<h3 id="read/1">read(Id::id(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Perform a read for a particular identifier.</p>
 
       <p>Given an <code>Id</code>, perform a blocking read until the variable is
       bound.
 </p>
</div></div>
<div class="function">
<h3 id="read/1-1">read(Id::id(), Threshold::value(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Perform a monotonic read read for a particular identifier.</p>
 
       <p>Given an <code>Id</code>, perform a blocking read until the variable is       
bound.</p>
 
       <p>This operation blocks until <code>Threshold</code> has been reached.
 </p>
</div></div>
<div class="function">
<h3 id="read_any/1">read_any(Reads::[{id(), value()}], Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Perform a monotonic read for a series of given idenfitiers --
       first response wins.
 </p>
</div></div>
<div class="function">
<h3 id="declare/1">declare(Store::store()) -&gt; {ok, id()}</h3>


<div class="description">

<p>Declare a dataflow variable in a provided by identifer.</p>
</div></div>
<div class="function">
<h3 id="declare/1-1">declare(Type::type(), Store::store()) -&gt; {ok, id()}</h3>


<div class="description">

<p>Declare a dataflow variable, as a given type.</p>
</div></div>
<div class="function">
<h3 id="declare/1-2">declare(Id::id(), Type::type(), Store::store()) -&gt; {ok, id()}</h3>


<div class="description">

<p>Declare a dataflow variable in a provided by identifer.</p>
</div></div>
<div class="function">
<h3 id="declare/1-3">declare(Id::id(), Type::type(), MetadataFun::function(), Store::store()) -&gt; {ok, id()}</h3>


<div class="description">

<p>Declare a dataflow variable in a provided by identifer.</p>
</div></div>
<div class="function">
<h3 id="bind_to/1">bind_to(Id::id(), TheirId::id(), Store::store()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Define a dataflow variable to be bound to another dataflow
       variable.
 </p>
</div></div>
<div class="function">
<h3 id="thread/1">thread(Module::module(), Function::func(), Args::args(), Store::store()) -&gt; ok</h3>


<div class="description">

<p>Spawn a function.</p>
 
       <p>Spawn a process executing <code>Module:Function(Args)</code>.
 </p>
</div></div>
<div class="function">
<h3 id="wait_needed/1">wait_needed(Id::id(), Store::store()) -&gt; {ok, threshold()}</h3>


<div class="description">

<p>Pause execution until value requested with given threshold.</p>
 
       <p>Pause execution of calling thread until a read operation is
       issued for the given <code>Id</code>.  Used to introduce laziness into a
       computation.
 </p>
</div></div>
<div class="function">
<h3 id="wait_needed/1-1">wait_needed(Id::id(), Threshold::threshold(), Store::store()) -&gt; {ok, threshold()}</h3>


<div class="description">

<p>Pause execution until value requested with given threshold.</p>
 
       <p>Pause execution of calling thread until a read operation is
       issued for the given <code>Id</code>.  Used to introduce laziness into a       
computation.</p>
 
       <p>This operation blocks until <code>Threshold</code> has been requested.
 </p>
</div></div>
<div class="function">
<h3 id="update/1">update(Id::id(), Operation::operation(), Actor::actor(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Update a dataflow variable given an operation.</p>
 
       <p>Similar to <a href="#update/5" class="seealso">update/5</a>.</p>
 
       <p>Read the given <code>Id</code> and update it given the provided
       <code>Operation</code>, which should be valid for the type of CRDT stored
       at the given <code>Id</code>.
 </p>
</div></div>
<div class="function">
<h3 id="update/1-1">update(Id::id(), Operation::operation(), Actor::actor(), MetadataFun::function(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="bind/1">bind(Id::id(), Value::value(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Define a dataflow variable to be bound a value.</p>
</div></div>
<div class="function">
<h3 id="bind/1-1">bind(Id::id(), Value::value(), MetadataFun::function(), Store::store()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Define a dataflow variable to be bound a value.</p>
</div></div>
<div class="function">
<h3 id="read/1-2">read(Id::id(), Threshold0::value(), Store::store(), Self::pid(), ReplyFun::function(), BlockingFun::function()) -&gt; {ok, var()}</h3>


<div class="description">

<p>Perform a read (or monotonic read) for a particular identifier.</p>
 
       <p>Given an <code>Id</code>, perform a blocking read until the variable is       
bound.</p>
 
       <p>Perform a read -- reads will either block until the <code>Threshold</code>
       is met, or the variable is bound.  Reads will be performed
       against the <code>Store</code> provided.  When the process should register
       itself for notification of the variable being bound, it should
       supply the process identifier for notifications as <code>Self</code>.
       Finally, the <code>ReplyFun</code> and <code>BlockingFun</code> functions will be
       executed in the event that the reply is available immediately,
       or it will have to wait for the notification, in the event the
       variable is unbound or has not met the threshold yet.
 </p>
</div></div>
<div class="function">
<h3 id="bind_to/1-1">bind_to(AccId::id(), Id::id(), Store::store(), BindFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Define a dataflow variable to be bound to another dataflow       
variable.</p>
 
       <p>This version, performs a partial bind to another dataflow       
variable.</p>
 
       <p><code>FetchFun</code> is used to specify how to find the target identifier,       
given it is located in another data store.</p>
 
       <p><code>FromPid</code> is sent a message with the target identifiers value,
       if the target identifier is already bound.
 </p>
</div></div>
<div class="function">
<h3 id="bind_to/5">bind_to(AccId, Id, Store, BindFun, ReadFun) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="fold/1-1">fold(Id::id(), Function::function(), AccId::id(), Store::store(), BindFun::function(), ReadFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Fold values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a fold over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared       
variables.</p>
 
       <p>Similar to <a href="#fold/4" class="seealso">fold/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="product/1-1">product(Left::id(), Right::id(), AccId::id(), Store::store(), BindFun::function(), ReadLeftFun::function(), ReadRightFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the cartesian product of two sets.</p>
 
       <p>Computes the cartestian product of two sets and bind the result       
to a third.</p>
 
       <p>Similar to <a href="#product/4" class="seealso">product/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="intersection/1-1">intersection(Left::id(), Right::id(), AccId::id(), Store::store(), BindFun::function(), ReadLeftFun::function(), ReadRightFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the intersection of two sets.</p>
 
       <p>Computes the intersection of two sets and bind the result       
to a third.</p>
 
       <p>Similar to <a href="#intersection/4" class="seealso">intersection/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="union/1-1">union(Left::id(), Right::id(), AccId::id(), Store::store(), BindFun::function(), ReadLeftFun::function(), ReadRightFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Compute the union of two sets.</p>
 
       <p>Computes the union of two sets and bind the result       
to a third.</p>
 
       <p>Similar to <a href="#union/4" class="seealso">union/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="map/1-1">map(Id::id(), Function::function(), AccId::id(), Store::store(), BindFun::function(), ReadFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Lap values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a map over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared       
variables.</p>
 
       <p>Similar to <a href="#map/4" class="seealso">map/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="filter/1-1">filter(Id::id(), Function::function(), AccId::id(), Store::store(), BindFun::function(), ReadFun::function()) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Filter values from one lattice into another.</p>
 
       <p>Applies the given <code>Function</code> as a filter over the items in <code>Id</code>,
       placing the result in <code>AccId</code>, both of which need to be declared       
variables.</p>
 
       <p>Similar to <a href="#filter/4" class="seealso">filter/4</a>, however, provides an override
       function for the <code>BindFun</code>, which is responsible for binding the
       result, for instance, when it's located in another table.
 </p>
</div></div>
<div class="function">
<h3 id="wait_needed/1-2">wait_needed(Id::id(), Threshold::threshold(), Store::store(), Self::pid(), ReplyFun::function(), BlockingFun::function()) -&gt; {ok, threshold()}</h3>


<div class="description">

<p>Callback wait_needed function for lasp_vnode, where we       
change the reply and blocking replies.</p>
 
       <p>Similar to <a href="#wait_needed/2" class="seealso">wait_needed/2</a>.</p>
 
       <p><code>BlockingFun</code> is used to override the handling of waiting for a       
read operation to trigger on something that is waiting (lazy).</p>
 
       <p><code>ReplyFun</code> is used to override the function which is used to       
notify waiting processes, for instance, if they are running on       
another node.</p>
 
       <p>This operation blocks until <code>Threshold</code> has been requested.
 </p>
</div></div>
<div class="function">
<h3 id="reply_to_all/1">reply_to_all(List::[pid() | pending_threshold()], Result::term()) -&gt; {ok, [pending_threshold()]}</h3>


<div class="description">

<p>Given a group of processes which are blocking on reads, notify
       them of bound values or met thresholds.
 </p>
</div></div>
<div class="function">
<h3 id="reply_to_all/1-1">reply_to_all(T::[pid() | pending_threshold()], StillWaiting0::[pending_threshold()], Result::term()) -&gt; {ok, [pending_threshold()]}</h3>


<div class="description">

<p>Given a group of processes which are blocking on reads, notify
       them of bound values or met thresholds.
 </p>
</div></div>
<div class="function">
<h3 id="write/1">write(Type::type(), Value::value(), Key::id(), Store::store()) -&gt; ok</h3>


<div class="description">

<p>Send responses to waiting threads, via messages.</p>
 
       <p>Perform the following operations:</p>
 
       <p>* Reply to all waiting threads via message.
       * Perform binding of any variables which are partially bound.
       * Mark variable as bound.
       * Check thresholds and send notifications, if required.
 </p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

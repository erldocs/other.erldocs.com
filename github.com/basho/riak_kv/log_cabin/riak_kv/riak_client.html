<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_client (riak_kv) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_client</h1>
<h2 class="modsummary">object used for access into the riak system.</h2>
<div class="description">
<p>object used for access into the riak system</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-riak_client">riak_client() = term()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/2">new(Node, ClientId) -&gt; riak_client()</h3>


<div class="description">

<p>Return a riak client instance.</p>
</div></div>
<div class="function">
<h3 id="get/1">get(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), THIS::riak_client()) -&gt; {ok, riak_object() (see module riak_object)} | {error, notfound} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, {r_val_unsatisfied, R::integer(), Replies::integer()}} | {error, Err::term()}</h3>


<div class="description">

<p>Fetch the object at Bucket/Key.  Return a value as soon as the default
       R-value for the nodes have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="get/1-1">get(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), Options::options(), THIS::riak_client()) -&gt; {ok, riak_object() (see module riak_object)} | {error, notfound} | {error, {deleted, vclock()}} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, {r_val_unsatisfied, R::integer(), Replies::integer()}} | {error, Err::term()}</h3>


<div class="description">

<p>Fetch the object at Bucket/Key.  Return a value as soon as R-value for the nodes
       have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="get/1-2">get(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), R::integer(), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; {ok, riak_object() (see module riak_object)} | {error, notfound} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, {r_val_unsatisfied, R::integer(), Replies::integer()}} | {error, Err::term()}</h3>


<div class="description">

<p>Fetch the object at Bucket/Key.  Return a value as soon as R
       nodes have responded with a value or error, or TimeoutMillisecs passes.</p>
</div></div>
<div class="function">
<h3 id="put/1">put(RObj::riak_object() (see module riak_object), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, timeout} | {error, {n_val_violation, N::integer()}}</h3>


<div class="description">

<p>Store RObj in the cluster.
       Return as soon as the default W value number of nodes for this bucket
       nodes have received the request.</p>
</div></div>
<div class="function">
<h3 id="put/1-1">put(RObj::riak_object() (see module riak_object), Options::options() (see module riak_kv_put_fsm), THIS::riak_client()) -&gt; ok | {ok, details()} | {ok, riak_object() (see module riak_object)} | {ok, riak_object() (see module riak_object), details()} | {error, notfound} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, Err::term()} | {error, Err::term(), details()}</h3>


<div class="description">

<p>Store RObj in the cluster.
Robj = {r_object, ...} will break if layout of #r_object{} changes</p>
</div></div>
<div class="function">
<h3 id="put/1-2">put(RObj::riak_object() (see module riak_object), W::integer(), RW::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, timeout} | {error, {n_val_violation, N::integer()}}</h3>


<div class="description">

<p>Store RObj in the cluster.
       Return as soon as at least W nodes have received the request, and
       at least DW nodes have stored it in their storage backend.</p>
</div></div>
<div class="function">
<h3 id="put/1-3">put(RObj::riak_object() (see module riak_object), W::integer(), RW::integer(), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, timeout} | {error, {n_val_violation, N::integer()}}</h3>


<div class="description">

<p>Store RObj in the cluster.
       Return as soon as at least W nodes have received the request, and
       at least DW nodes have stored it in their storage backend, or
       TimeoutMillisecs passes.</p>
</div></div>
<div class="function">
<h3 id="put/1-4">put(RObj::riak_object() (see module riak_object), W::integer(), RW::integer(), TimeoutMillisecs::integer(), Options::list(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, timeout} | {error, {n_val_violation, N::integer()}}</h3>


<div class="description">

<p>Store RObj in the cluster.
       Return as soon as at least W nodes have received the request, and
       at least DW nodes have stored it in their storage backend, or
       TimeoutMillisecs passes.</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as RW
       nodes have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="delete/1-1">delete(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), RW::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as W/DW (or RW)
       nodes have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="delete/1-2">delete(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), RW::integer(), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as W/DW (or RW)
       nodes have responded with a value or error, or TimeoutMillisecs passes.</p>
</div></div>
<div class="function">
<h3 id="delete_vclock/1">delete_vclock(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), VClock::vclock() (see module vclock), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as W/DW (or RW)
       nodes have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="delete_vclock/1-1">delete_vclock(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), VClock::vclock() (see module vclock), RW::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as W/DW (or RW)
       nodes have responded with a value or error.</p>
</div></div>
<div class="function">
<h3 id="delete_vclock/1-2">delete_vclock(Bucket::bucket() (see module riak_object), Key::key() (see module riak_object), VClock::vclock() (see module vclock), RW::integer(), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; ok | {error, too_many_fails} | {error, notfound} | {error, timeout} | {error, {n_val_violation, N::integer()}} | {error, Err::term()}</h3>


<div class="description">

<p>Delete the object at Bucket/Key.  Return a value as soon as W/DW (or RW)
       nodes have responded with a value or error, or TimeoutMillisecs passes.</p>
</div></div>
<div class="function">
<h3 id="list_keys/1">list_keys(Bucket::bucket() (see module riak_object), THIS::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.</p>
</div></div>
<div class="function">
<h3 id="list_keys/1-1">list_keys(Bucket::bucket() (see module riak_object), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.</p>
</div></div>
<div class="function">
<h3 id="list_keys/1-2">list_keys(Bucket::bucket() (see module riak_object), Filter::term(), TimeoutMillisecs::integer(), X4::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.</p>
</div></div>
<div class="function">
<h3 id="stream_list_keys/2">stream_list_keys(Bucket, THIS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stream_list_keys/3">stream_list_keys(Bucket, Timeout, THIS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stream_list_keys/1">stream_list_keys(Input::bucket() (see module riak_object), TimeoutMillisecs::integer(), Client::pid(), X4::riak_client()) -&gt; {ok, ReqId::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.
       The list will not be returned directly, but will be sent
       to Client in a sequence of {ReqId, {keys,Keys}} messages
       and a final {ReqId, done} message.
       None of the Keys lists will be larger than the number of
       keys in Bucket on any single vnode.</p>
</div></div>
<div class="function">
<h3 id="filter_keys/1">filter_keys(Bucket::bucket() (see module riak_object), Fun::function(), THIS::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket,
       filtered at the vnode according to Fun, via lists:filter.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.</p>
</div></div>
<div class="function">
<h3 id="filter_keys/1-1">filter_keys(Bucket::bucket() (see module riak_object), Fun::function(), TimeoutMillisecs::integer(), THIS::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List the keys known to be present in Bucket,
       filtered at the vnode according to Fun, via lists:filter.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after a put or delete.</p>
</div></div>
<div class="function">
<h3 id="list_buckets/1">list_buckets(THIS::riak_client()) -&gt; {ok, [Bucket::bucket() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List buckets known to have keys.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after any operation that
       either adds the first key or removes the last remaining key from
       a bucket.</p>
</div></div>
<div class="function">
<h3 id="list_buckets/1-1">list_buckets(Timeout::timeout(), THIS::riak_client()) -&gt; {ok, [Bucket::bucket() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List buckets known to have keys.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after any operation that
       either adds the first key or removes the last remaining key from
       a bucket.</p>
</div></div>
<div class="function">
<h3 id="list_buckets/1-2">list_buckets(TimeoutMillisecs::integer(), Filter::term(), THIS::riak_client()) -&gt; {ok, [Bucket::bucket() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List buckets known to have keys.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after any operation that
       either adds the first key or removes the last remaining key from
       a bucket.</p>
</div></div>
<div class="function">
<h3 id="list_buckets/4">list_buckets(Filter, Timeout, Type, X4) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="filter_buckets/1">filter_buckets(Fun::function(), THIS::riak_client()) -&gt; {ok, [Bucket::bucket() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Return a list of filtered buckets.</p>
</div></div>
<div class="function">
<h3 id="stream_list_buckets/1">stream_list_buckets(THIS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stream_list_buckets/2">stream_list_buckets(Timeout, THIS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stream_list_buckets/3">stream_list_buckets(Filter, Timeout, THIS) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stream_list_buckets/1-1">stream_list_buckets(FilterFun::function(), TimeoutMillisecs::integer(), Client::pid(), THIS::riak_client()) -&gt; {ok, [Bucket::bucket() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>List buckets known to have keys.
       Key lists are updated asynchronously, so this may be slightly
       out of date if called immediately after any operation that
       either adds the first key or removes the last remaining key from
       a bucket.</p>
</div></div>
<div class="function">
<h3 id="stream_list_buckets/5">stream_list_buckets(Filter, Timeout, Client, Type, X5) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_index/1">get_index(Bucket::binary(), Query::query_def() (see module riak_index), THIS::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Run the provided index query.</p>
</div></div>
<div class="function">
<h3 id="get_index/1-1">get_index(Bucket::binary(), Query::query_def() (see module riak_index), TimeoutMillisecs::integer(), X4::riak_client()) -&gt; {ok, [Key::key() (see module riak_object)]} | {error, timeout} | {error, Err::term()}</h3>


<div class="description">

<p>Run the provided index query.</p>
</div></div>
<div class="function">
<h3 id="stream_get_index/1">stream_get_index(Bucket::binary(), Query::query_def() (see module riak_index), THIS::riak_client()) -&gt; {ok, ReqId::term(), FSMPid::pid()} | {error, Reason::term()}</h3>


<div class="description">

<p>Run the provided index query, return a stream handle.</p>
</div></div>
<div class="function">
<h3 id="stream_get_index/1-1">stream_get_index(Bucket::binary(), Query::query_def() (see module riak_index), Opts::proplist() (see module proplists), X4::riak_client()) -&gt; {ok, ReqId::term(), FSMPid::pid()} | {error, Reason::term()}</h3>


<div class="description">

<p>Run the provided index query, return a stream handle.</p>
</div></div>
<div class="function">
<h3 id="set_bucket/1">set_bucket(BucketName::bucket() (see module riak_object), BucketProps::[BucketProp::{atom(), term()}], X3::riak_client()) -&gt; ok</h3>


<div class="description">

<p>Set the given properties for Bucket.
       This is generally best if done at application start time,
       to ensure expected per-bucket behavior.
  See riak_core_bucket for expected useful properties.</p>
</div></div>
<div class="function">
<h3 id="get_bucket/1">get_bucket(BucketName::bucket() (see module riak_object), X2::riak_client()) -&gt; [BucketProp::{atom(), term()}]</h3>


<div class="description">

<p>Get all properties for Bucket.
  See riak_core_bucket for expected useful properties.</p>
</div></div>
<div class="function">
<h3 id="reset_bucket/1">reset_bucket(BucketName::bucket() (see module riak_object), X2::riak_client()) -&gt; ok</h3>


<div class="description">

<p>Reset properties for this Bucket to the default values</p>
</div></div>
<div class="function">
<h3 id="reload_all/1">reload_all(Module::atom(), X2::riak_client()) -&gt; term()</h3>


<div class="description">

<p>Force all Riak nodes to reload Module.
       This is used when loading new modules for map/reduce functionality.</p>
</div></div>
<div class="function">
<h3 id="remove_from_cluster/1">remove_from_cluster(ExitingNode::atom(), X2::riak_client()) -&gt; term()</h3>


<div class="description">

<p>Cause all partitions owned by ExitingNode to be taken over
       by other nodes.</p>
</div></div>
<div class="function">
<h3 id="get_stats/2">get_stats(X1, X2) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_client_id/1">get_client_id(X1) -&gt; term()
</h3>


<div class="description">

<p>Return the client id being used for this client</p>
</div></div>
<div class="function">
<h3 id="ensemble/1">ensemble(BKey) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

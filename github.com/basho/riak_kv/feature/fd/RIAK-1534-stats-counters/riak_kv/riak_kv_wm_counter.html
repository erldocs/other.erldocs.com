<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_kv_wm_counter (riak_kv) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_kv_wm_counter</h1>
<h2 class="modsummary">Resource for serving Counters over HTTP.</h2>
<div class="description">
<p>Resource for serving Counters over HTTP.</p>
 
  <p>Available operations:</p>
 
  <p><code>POST /buckets/Bucket/counters/Key</code></p>
 
    <p>Increment the counter at <code>Bucket</code>, <code>Key</code> by
    the integer amount of the request body. If the request body cannot be
    parsed (by Erlang's <code>list_to_integer/1</code>) then a <code>400 bad request</code>    
is the result.</p>
 
    <p>The following query params are accepted (see <url href="/home/pete/wefwefwef/docs/other/c94408376b755f24b026086c91fef124/repo/feature/fd/RIAK-1534-stats-counters/.xml/riak_kv/./riak_kv_wm_object.xml">riak_kv_wm_object</url> docs, too):</p>
 
    <taglist>
      <dt>w</dt><item><p>The write quorum. See below for defaults and values.</p></item>
      <dt>pw</dt><item><p>The primary write quorum. See below for defaults and values.</p></item>
      <dt>dw</dt><item><p>The durable write quorum. See below for default and values.</p></item>
      <dt>returnvalue</dt><item><p>Boolean. Default is <code>false</code> if not provided. When <code>true</code>
                              the response body will be the value of the counter.</p></item>
    </taglist>
 
   <p><code>GET /buckets/Bucket/counters/Key</code></p>
 
     <p>Get the current value of the counter at <code>Bucket</code>, <code>Key</code>. Result is a text/plain
     body with an integer value, or <code>not_found</code> if no counter exists at that resource location.</p>
 
     <p>The following query params are accepted:</p>
 
     <taglist>
       <dt>r</dt><item><p>Read quorum. See below for defaults and values.</p></item>
       <dt>pr</dt><item><p>Primary read quorum. See below for defaults and values.</p></item>
       <dt>basic_quorum</dt><item><p>Boolean. Return as soon as a quorum of responses are received
                                if true. Default is the bucket default, if absent.</p></item>
       <dt>notfound_ok</dt><item><p>Boolean. A <code>not_found` response from a vnode counts toward
                               `r</code> quorum if true. Default is the bucket default, if absent.</p></item>
     </taglist>
 
    <p><em><marker id="Quorum_values_(r/pr/w/pw/dw)">Quorum values (r/pr/w/pw/dw)</marker></em>
      </p><taglist>
        <dt>default</dt><item><p>Whatever the bucket default is. This is the value used
                           for any absent value.</p></item>
       <dt>quorum</dt><item><p>(Bucket N val / 2) + 1</p></item>
       <dt>all</dt><item><p>All replicas must respond</p></item>
       <dt>one</dt><item><p>Any one response is enough</p></item>
       <dt>Integer</dt><item><p>That specific number of vnodes must respond. Must be <code>=&lt;</code> N</p></item>
     </taglist><p>
  Please see <url href="http://docs.basho.com">http://docs.basho.com</url> for details of all the quorum values and there effect.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-context">context() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#ctx{api_version = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucket = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;key = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;client = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;r = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;w = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;dw = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;rw = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pr = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pw = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;basic_quorum = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notfound_ok = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prefix = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;riak = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doc = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketprops = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;method = any(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;counter_op = integer() | undefined,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;security = any()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="ping/2">ping(ReqData, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="init/1">init(Props::proplist() (see module proplists)) -&gt; {ok, context()}</h3>


<div class="description">

<p>Initialize this resource.  This function extracts the
       'prefix' and 'riak' properties from the dispatch args.</p>
</div></div>
<div class="function">
<h3 id="service_available/2">service_available(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="is_authorized/2">is_authorized(ReqData, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="forbidden/2">forbidden(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="allowed_methods/2">allowed_methods(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="malformed_request/2">malformed_request(RD, Ctx0) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="content_types_provided/2">content_types_provided(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="resource_exists/2">resource_exists(RD, Ctx0) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="post_is_create/2">post_is_create(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="process_post/2">process_post(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="accept_doc_body/2">accept_doc_body(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="to_text/2">to_text(RD, Ctx) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>slide (riak_core) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>slide</h1>
<h2 class="modsummary">Keep track of thing in a sliding time window.</h2>
<div class="description">
<p>Keep track of thing in a sliding time window.  The idea here       
is that you have some reading to take several times.       
Occasionally, you want to compute some aggregation of those       
readings for the last N seconds.</p>
 
       <p>For example, you might read the weight of cars passing a point       
in the road.  You want to compute some statistics every hour.       
You could:</p>
 
       <p>%% create a new slide, with an hour window       
T0 = slide:fresh(60*60)</p>
 
       <p>%% update it every time a car passes       
T1 = slide:update(T0, Weight, slide:moment())</p>
 
       <p>%% eventually ask for stats       
{NumberOfCars, TotalWeight} = slide:sum(TN, slide:moment())       
{NumberOfCars, AverageWeight} = slide:mean(TN, slide:moment())       
{NumberOfCars, {MedianWeight,                       
NinetyFivePercentWeight,                       
NinetyNinePercentWeight,                       
HeaviestWeight} = slide:nines(TN, slide:moment())</p>
 
       <p>The slide module attempts to be tunably efficient by exposing
       the ability to determine how often to "prune" readings.  By default,
       readings are pruned whenever a reading is made with a timestamp
       that is two window-lengths newer than the oldest timestamp in the
       slide.  At that point, all readings older than one window-length away
       from the latest reading will be removed.  Use a different value
       for the Trigger parameter of fresh/2 to change when pruning is
       triggered.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="fresh/0">fresh() -&gt; slide()</h3>


<div class="description">
<p>Equivalent to <a href="#fresh/1" class="seealso">fresh(60)</a>.</p>
</div></div>
<div class="function">
<h3 id="fresh/1">fresh(Window::integer()) -&gt; slide()</h3>


<div class="description">
<p>Equivalent to <a href="#fresh/2" class="seealso">fresh(Window, Window * 2)</a>.</p>
</div></div>
<div class="function">
<h3 id="fresh/1-1">fresh(Window::integer(), Trigger::integer()) -&gt; slide()</h3>


<div class="description">

<p>Create an empty slide for tracking Window-seconds worth of
       readings, and pruning those readings after Trigger seconds.</p>
</div></div>
<div class="function">
<h3 id="moment/0">moment() -&gt; integer()</h3>


<div class="description">

<p>Get the current time in seconds.</p>
</div></div>
<div class="function">
<h3 id="update/1">update(S::slide(), Reading::term()) -&gt; slide()</h3>


<div class="description">
<p>Equivalent to <a href="#update/3" class="seealso">update(S, Reading, moment())</a>.</p>
</div></div>
<div class="function">
<h3 id="update/1-1">update(S::slide(), Reading::term(), Moment::integer()) -&gt; slide()</h3>


<div class="description">

<p>Store a new reading.  The current list of readings will be
       pruned if Moment is as new as or newer than the most recent
       reading stored, and more than Trigger seconds newer than the
       oldest reading stored.</p>
</div></div>
<div class="function">
<h3 id="sum/1">sum(Slide::slide()) -&gt; {Count::integer(), Sum::integer()}</h3>


<div class="description">

<p>Sum of readings from now through Window seconds ago.  Return is
       number of readings in the range and the sum of those readings.</p>
</div></div>
<div class="function">
<h3 id="sum/1-1">sum(Slide::slide(), Moment::integer()) -&gt; {Count::integer(), Sum::integer()}</h3>


<div class="description">

<p>Sum of readings from Moment through Window seconds before Moment.
       Return is number of readings in the range and the sum of those
       readings.</p>
</div></div>
<div class="function">
<h3 id="sum/1-2">sum(Slide::slide(), Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), Sum::integer()}</h3>


<div class="description">

<p>Sum of readings from Moment through Seconds seconds before
       Moment.  Return is number of readings in the range and the sum
       of those readings.</p>
</div></div>
<div class="function">
<h3 id="mean/1">mean(Slide::slide()) -&gt; {Count::integer(), Mean::number()}</h3>


<div class="description">

<p>Mean of readings from now through Window seconds ago.  Return is
       number of readings in the range and the mean of those readings.</p>
</div></div>
<div class="function">
<h3 id="mean/1-1">mean(Slide::slide(), Moment::integer()) -&gt; {Count::integer(), Mean::number()}</h3>


<div class="description">

<p>Mean of readings from Moment through Window seconds before Moment.
       Return is number of readings in the range and the mean of those
       readings.</p>
</div></div>
<div class="function">
<h3 id="mean/1-2">mean(S::slide(), Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), Mean::number()}</h3>


<div class="description">

<p>Mean of readings from Moment through Seconds seconds before
       Moment.  Return is number of readings in the range and the mean
       of those readings.</p>
</div></div>
<div class="function">
<h3 id="nines/1">nines(Slide::slide()) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</h3>


<div class="description">

<p>Median, 95%, 99%, and 100% readings from now through Window
   seconds ago.  Return is number of readings in the range and the
   nines of those readings.</p>
</div></div>
<div class="function">
<h3 id="nines/1-1">nines(Slide::slide(), Moment::integer()) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</h3>


<div class="description">

<p>Median, 95%, 99%, and 100% readings from Moment through Window
       seconds before Moment.  Return is number of readings in the
       range and the nines of those readings.</p>
</div></div>
<div class="function">
<h3 id="nines/1-2">nines(Slide::slide(), Moment::integer(), Seconds::integer()) -&gt; {Count::integer(), {Median::number(), NinetyFive::number(), NinetyNine::number(), Hundred::number()}}</h3>


<div class="description">

<p>Median, 95%, 99%, and 100% readings from Moment through
       Seconds seconds before Moment.  Return is number of readings
       in the range and the nines of those readings.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>ranch_listener (ranch) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>ranch_listener</h1>
<h2 class="modsummary">Public API for managing listeners.</h2>
<div class="description">
<p>Public API for managing listeners.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="add_connection/1">add_connection(ServerPid::pid(), Pool::atom(), ConnPid::pid(), OptsVsn::non_neg_integer()) -&gt; ok | {upgrade, any(), non_neg_integer()}</h3>


<div class="description">

<p>Add a connection to the given pool in the listener.</p>
 
  <p>Pools of connections are used to restrict the maximum number of connections
  depending on their type. By default, Ranch add all connections to the
  pool <em>default</em>. It also checks for the maximum number of connections  
in that pool before accepting again. This function only returns when there  
is free space in the pool.</p>
 
  <p>When a process managing a connection dies, the process is removed from the
  pool. If the socket has been sent to another process, it is up to the
  protocol code to inform the listener of the new <em>ConnPid</em> by removing  
the previous and adding the new one.</p>
 
  <p>This function also returns whether the protocol options have been modified.
  If so, then an {upgrade, ProtoOpts, OptsVsn} will be returned instead of
  the atom 'ok'. The acceptor can then continue with the new protocol options.</p>
</div></div>
<div class="function">
<h3 id="move_connection/1">move_connection(ServerPid::pid(), DestPool::atom(), ConnPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Move a connection from one pool to another.</p>
</div></div>
<div class="function">
<h3 id="remove_connection/1">remove_connection(ServerPid::pid(), ConnPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Remove the given connection from its pool.</p>
</div></div>
<div class="function">
<h3 id="check_upgrades/1">check_upgrades(ServerPid::pid(), OptsVsn::non_neg_integer()) -&gt; ok | {upgrade, any(), non_neg_integer()}</h3>


<div class="description">

<p>Return whether a protocol upgrade is required.</p>
</div></div>
<div class="function">
<h3 id="get_protocol_options/1">get_protocol_options(ServerPid::pid()) -&gt; {ok, any()}</h3>


<div class="description">

<p>Return the current protocol options.</p>
</div></div>
<div class="function">
<h3 id="set_protocol_options/1">set_protocol_options(ServerPid::pid(), ProtoOpts::any()) -&gt; ok</h3>


<div class="description">

<p>Upgrade the protocol options.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

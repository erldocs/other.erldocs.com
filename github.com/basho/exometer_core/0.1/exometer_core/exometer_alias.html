<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>exometer_alias (exometer_core) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>exometer_alias</h1>
<h2 class="modsummary">API and behaviour for metrics instances  
This module implements an alias registry for exometer metrics.</h2>
<div class="description">
<p>API and behaviour for metrics instances  
This module implements an alias registry for exometer metrics.  
An alias can be either an atom or a binary, and maps to an  
entry+datapoint pair. The registry is an ordered set with binary keys,  
enabling straight lookup, prefix match/fold and regexp fold.</p>
 
  <p>The purpose of the registry is to support mapping of 'legacy names'
  to exometer metrics, where the legacy names don't conform to the
  exometer naming standard.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-acc">acc() = any()</h3></div>
    <div class="type"><h3 id="type-alias">alias() = atom() | binary()</h3></div>
    <div class="type"><h3 id="type-dp">dp() = <a href="exometer.html#type-datapoint" class="seealso">exometer:datapoint()</a></h3></div>
    <div class="type"><h3 id="type-fold_fun">fold_fun() = fun((<a href="#type-alias" class="seealso">alias()</a>, <a href="#type-name" class="seealso">name()</a>, <a href="#type-dp" class="seealso">dp()</a>, <a href="#type-acc" class="seealso">acc()</a>) -> <a href="#type-acc" class="seealso">acc()</a>)</h3></div>
    <div class="type"><h3 id="type-name">name() = <a href="exometer.html#type-name" class="seealso">exometer:name()</a></h3></div>
    <div class="type"><h3 id="type-reason">reason() = any()</h3></div>
    <div class="type"><h3 id="type-regexp">regexp() = iodata() | <a href="re.html#type-mp" class="seealso">re:mp()</a></h3></div>
    <div class="type"><h3 id="type-stat_map">stat_map() = [{<a href="#type-name" class="seealso">name()</a>, [{<a href="#type-dp" class="seealso">dp()</a>, <a href="#type-alias" class="seealso">alias()</a>}]}]</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/1">new(Alias::alias(), Entry::name(), DP::dp()) -&gt; ok | {error, reason()}</h3>


<div class="description">

<p>Create a new alias.</p>
 
  <p>This function maps an alias to an entry name and datapoint.  
Each alias maps to exactly one entry+datapoint pair. The entry does  
not need to exist when the alias is registered.</p>
 
  <p>The function raises an exception if the arguments are of the wrong
  type, and returns <code>{error, exists}</code> if the alias has already been
  registered.</p>
</div></div>
<div class="function">
<h3 id="load/1">load(Fun::() -&gt; stat_map()) -&gt; ok</h3>


<div class="description">

<p>Load a list of mappings between entry+datapoint pairs and aliases.</p>
 
  <p>This operation will overwrite any aliases with the same name that
  already exist. The argument is a fun (zero arity) that returns a list of
  <code>{EntryName, [{DataPoint, Alias}]}</code> tuples.</p>
</div></div>
<div class="function">
<h3 id="unload/1">unload(Fun::() -&gt; stat_map()) -&gt; ok</h3>


<div class="description">

<p>Unload a list of mappings.</p>
 
  <p>A mapping will only be deleted if the given alias+entry+datapoint matches
  what is in the registry. The argument is of the same type as for
  <a href="#load/1" class="seealso">load/1</a>.</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(Alias::alias()) -&gt; ok</h3>


<div class="description">

<p>Delete an alias, if it exists in the registry.</p>
 
  <p>This function will delete an alias if it exists in the registry. It will
  return <code>ok</code> signaling that after completion, the alias is no longer in
  the registry.</p>
</div></div>
<div class="function">
<h3 id="resolve/1">resolve(Alias::alias()) -&gt; {name(), dp()} | error</h3>


<div class="description">

<p>Look up an alias in the registry and return corresponding mapping.</p>
 
  <p>This function returns <code>{EntryName, Datapoint}</code> corresponding to the given
  alias, or <code>error</code> if no corresponding mapping exists.</p>
</div></div>
<div class="function">
<h3 id="reverse_map/1">reverse_map(Name::name() | '_', Datapoint::dp() | '_') -&gt; [{alias(), name(), dp()}]</h3>


<div class="description">

<p>List all aliases mapped to the given entry+datapoint pair(s).</p>
 
  <p>Match spec-style wildcards can be used for <code>Name</code> and/or <code>Datapoint</code>.</p>
</div></div>
<div class="function">
<h3 id="get_value/1">get_value(Alias::alias()) -&gt; {ok, any()} | {error, any()}</h3>


<div class="description">

<p>Resolve the given alias and return corresponding metric and value.</p>
 
  <p>The function returns <code>{ok, Value}</code> or <code>{error, not_found}</code> depending on
  whether there is a 'live' mapping (i.e. the entry refered to by the alias
  also exists.)</p>
</div></div>
<div class="function">
<h3 id="update/1">update(Alias::alias(), Value::any()) -&gt; ok | {error, any()}</h3>


<div class="description">

<p>Resolves the given alias and updates the corresponding entry (if any).</p>
 
  <p>This function can be seen as a wrapper to <a href="exometer.html#update/2" class="seealso">exometer:update/2</a>.
  Although the alias maps to a given datapoint, the entry itself is updated,
  so any alias mapping to the same entry can be used with the same result.</p>
</div></div>
<div class="function">
<h3 id="prefix_match/1">prefix_match(Pattern::binary()) -&gt; [{alias(), name(), dp()}]</h3>


<div class="description">

<p>List all aliases matching the given prefix.</p>
 
  <p>Even if the alias is an atom, prefix matching will be performed.
  Note that the referenced entries may not yet be created.</p>
</div></div>
<div class="function">
<h3 id="prefix_foldl/1">prefix_foldl(Prefix::binary(), F::fold_fun(), Acc::acc()) -&gt; acc()</h3>


<div class="description">

<p>Fold (ascending order) over the aliases matching <code>Prefix</code>.</p>
 
  <p>The fold function is called with <code>F(Alias, Entry, Datapoint)</code>.
  Note that the referenced entry may not yet be created.</p>
</div></div>
<div class="function">
<h3 id="prefix_foldr/1">prefix_foldr(Pattern::binary(), F::fold_fun(), Acc::acc()) -&gt; acc()</h3>


<div class="description">

<p>Fold (descending order) over the aliases matching <code>Prefix</code>.</p>
 
  <p>The fold function is called with <code>F(Alias, Entry, Datapoint)</code>.
  Note that the referenced entry may not yet be created.</p>
</div></div>
<div class="function">
<h3 id="regexp_foldl/1">regexp_foldl(Regexp::regexp(), F::fold_fun(), Acc::acc()) -&gt; acc()</h3>


<div class="description">

<p>Fold (ascending order) over the aliases matching <code>Regexp</code>.</p>
 
  <p>The fold function is called with <code>F(Alias, Entry, Datapoint)</code>.  
Note that the referenced entry may not yet be created.</p>
 
  <p>In order to avoid scanning the whole registry, a prefix is extracted
  from the regular expression. For a non-empty prefix, make sure to anchor
  the regular expression to the beginning of the name (e.g. <code>"^my_stats.*"</code>).</p>
</div></div>
<div class="function">
<h3 id="regexp_foldr/1">regexp_foldr(Pattern::regexp(), F::fold_fun(), Acc::acc()) -&gt; acc()</h3>


<div class="description">

<p>Fold (descending order) over the aliases matching <code>Regexp</code>.</p>
 
  <p>The fold function is called with <code>F(Alias, Entry, Datapoint)</code>.  
Note that the referenced entry may not yet be created.</p>
 
  <p>In order to avoid scanning the whole registry, a prefix is extracted
  from the regular expression. For a non-empty prefix, make sure to anchor
  the regular expression to the beginning of the name (e.g. <code>"^my_stats.*"</code>).</p>
</div></div>
<div class="function">
<h3 id="start_link/0">start_link() -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>riak_kv_mapreduce (riak_kv) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>riak_kv_mapreduce</h1>
<h2 class="modsummary">Convenience functions for defining common map/reduce phases.</h2>
<div class="description">
<p>Convenience functions for defining common map/reduce phases.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="map_identity/1">map_identity(Acc::boolean()) -&gt; map_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a map phase that simply returns
       each object it's handed.  That is:
       Client:mapred(BucketKeys, [map_identity(true)]).
       Would return all of the objects named by BucketKeys.</p>
</div></div>
<div class="function">
<h3 id="map_identity/1-1">map_identity(RiakObject::riak_object() (see module riak_object), X2::term(), X3::term()) -&gt; [riak_object() (see module riak_object)]</h3>


<div class="description">

<p>map phase function for map_identity/1</p>
</div></div>
<div class="function">
<h3 id="map_object_value/1">map_object_value(Acc::boolean()) -&gt; map_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a map phase that simply returns
       the values of the objects from the input to the phase.
       That is:
       Client:mapred(BucketKeys, [map_object_value(true)]).
       Would return a list that contains the value of each
       object named by BucketKeys.</p>
</div></div>
<div class="function">
<h3 id="map_object_value/1-1">map_object_value(NF::riak_object() (see module riak_object), KD::term(), Action::term()) -&gt; [term()]</h3>


<div class="description">

<p>map phase function for map_object_value/1
       If the RiakObject is the tuple {error, notfound}, the
       behavior of this function is defined by the Action argument.
       Values for Action are:
         <code>&lt;&lt;"filter_notfound"&gt;&gt;</code> : produce no output (literally [])
         <code>&lt;&lt;"include_notfound"&gt;&gt;</code> : produce the not-found as the result
                                    (literally [{error, notfound}])
         <code>&lt;&lt;"include_keydata"&gt;&gt;</code> : produce the keydata as the result
                                   (literally [KD])
         <code>{struct,[{&lt;&lt;"sub"&gt;&gt;,term()}]}</code> : produce term() as the result
                                           (literally term())
       The last form has a strange stucture, in order to allow
       its specification over the HTTP interface
       (as JSON like ..."arg":{"sub":1234}...).</p>
</div></div>
<div class="function">
<h3 id="map_object_value_list/1">map_object_value_list(Acc::boolean) -&gt; map_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a map phase that returns the values of
       the objects from the input to the phase.  The difference
       between this phase and that of map_object_value/1 is that
       this phase assumes that the value of the riak object is
       a list.  Thus, if the input objects to this phase have values
       of [a,b], [c,d], and [e,f], the output of this phase is
       [a,b,c,d,e,f].</p>
</div></div>
<div class="function">
<h3 id="map_object_value_list/1-1">map_object_value_list(NF::riak_object() (see module riak_object), KD::term(), Action::term()) -&gt; [term()]</h3>


<div class="description">

<p>map phase function for map_object_value_list/1
       See map_object_value/3 for a description of the behavior of
       this function with the RiakObject is {error, notfound}.</p>
</div></div>
<div class="function">
<h3 id="reduce_identity/1">reduce_identity(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that simply returns
       back [Bucket, Key] for each BKey it's handed.</p>
</div></div>
<div class="function">
<h3 id="reduce_identity/1-1">reduce_identity(List::[term()], X2::term()) -&gt; [term()]</h3>


<div class="description">

<p>map phase function for reduce_identity/1</p>
</div></div>
<div class="function">
<h3 id="reduce_set_union/1">reduce_set_union(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that produces the
       union-set of its input.  That is, given an input of:
          [a,a,a,b,c,b]
       this phase will output
          [a,b,c]</p>
</div></div>
<div class="function">
<h3 id="reduce_set_union/1-1">reduce_set_union(List::[term()], X2::term()) -&gt; [term()]</h3>


<div class="description">

<p>reduce phase function for reduce_set_union/1</p>
</div></div>
<div class="function">
<h3 id="reduce_sum/1">reduce_sum(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that produces the
       sum of its inputs.  That is, given an input of:
          [1,2,3]
       this phase will output
          [6]</p>
</div></div>
<div class="function">
<h3 id="reduce_sum/1-1">reduce_sum(List::[number()], X2::term()) -&gt; [number()]</h3>


<div class="description">

<p>reduce phase function for reduce_sum/1</p>
</div></div>
<div class="function">
<h3 id="reduce_plist_sum/1">reduce_plist_sum(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that expects a proplist or
       a list of proplists.  where all values are numbers, and
       produces a proplist where all values are the sums of the
       values of each property from input proplists.</p>
</div></div>
<div class="function">
<h3 id="reduce_plist_sum/1-1">reduce_plist_sum(PList::[{term(), number()} | [{term(), number()}]], X2::term()) -&gt; [{term(), number()}]</h3>


<div class="description">

<p>reduce phase function for reduce_plist_sum/1</p>
</div></div>
<div class="function">
<h3 id="reduce_sort/1">reduce_sort(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that sorts its
       inputs in ascending order using lists:sort/1.</p>
</div></div>
<div class="function">
<h3 id="reduce_sort/1-1">reduce_sort(List::[term()], X2::term()) -&gt; [term()]</h3>


<div class="description">

<p>reduce phase function for reduce_sort/1</p>
</div></div>
<div class="function">
<h3 id="reduce_count_inputs/1">reduce_count_inputs(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that counts its       
inputs.  Inputs to this phase must not be integers, or       
they will confuse the counting.  The output of this       
phase is a list of one integer.</p>
 
       <p>The original purpose of this function was to count
       the results of a key-listing.  For example:
 </p><pre class="sh_erlang">       [KeyCount] = C:mapred(&lt;&lt;"my_bucket"&gt;&gt;,
                             [riak_kv_mapreduce:reduce_count_inputs(true)]).</pre><p>
       KeyCount will contain the number of keys found in "my_bucket".</p>
</div></div>
<div class="function">
<h3 id="reduce_count_inputs/1-1">reduce_count_inputs(Results::[term() | integer()], X2::term()) -&gt; [integer()]</h3>


<div class="description">

<p>reduce phase function for reduce_count_inputs/1</p>
</div></div>
<div class="function">
<h3 id="reduce_string_to_integer/1">reduce_string_to_integer(Acc::boolean()) -&gt; reduce_phase_spec()</h3>


<div class="description">

<p>Produces a spec for a reduce phase that converts
       its inputs to integers. Inputs can be either Erlang
       strings or binaries.</p>
</div></div>
<div class="function">
<h3 id="reduce_string_to_integer/1-1">reduce_string_to_integer(List::[number()], X2::term()) -&gt; [number()]</h3>


<div class="description">

<p>reduce phase function for reduce_sort/1</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

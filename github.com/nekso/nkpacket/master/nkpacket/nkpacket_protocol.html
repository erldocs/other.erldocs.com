<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>nkpacket_protocol (nkpacket) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>nkpacket_protocol</h1>
<h2 class="modsummary">Protocol behaviour
  This module shows the behaviour that NkPACKET protocols must follow
  All functions are optional.</h2>
<div class="description">
<p>Protocol behaviour
  This module shows the behaviour that NkPACKET protocols must follow
  All functions are optional. The implementation in this module shows the
  default behaviour</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-conn_state">conn_state() = term()</h3></div>
    <div class="type"><h3 id="type-listen_state">listen_state() = term()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="behavior_info/1">behavior_info(X1) -&gt; term()
</h3>


<div class="description">

<p>No mandatory functions</p>
</div></div>
<div class="function">
<h3 id="transports/1">transports(X1::scheme() (see module nklib)) -&gt; [transport() (see module nkpacket)]</h3>


<div class="description">

<p>If you implement this function, it must return, for any supported scheme,
  the list of supported transports.</p>
</div></div>
<div class="function">
<h3 id="default_port/1">default_port(X1::transport() (see module nkpacket)) -&gt; port_number() (see module inet) | invalid</h3>


<div class="description">

<p>If you implement this function, it will be used to find the default port
  for this transport. If not implemented, port '0' will use any port for
  listener transports, and will fail for outbound connections.</p>
</div></div>
<div class="function">
<h3 id="unparse/1">unparse(X1::term(), X2::nkport() (see module nkpacket)) -&gt; {ok, incoming() (see module nkpacket)} | continue | {error, term()}</h3>


<div class="description">

<p>Implement this function to provide a 'quick' unparse function,
  in case you don't need the connection state to perform the unparse.
  Do not implement it or return 'continue' to call conn_unparse/2</p>
</div></div>
<div class="function">
<h3 id="conn_init/1">conn_init(X1::nkport() (see module nkpacket)) -&gt; {ok, conn_state()} | {stop, term()}</h3>


<div class="description">

<p>Called when the connection starts</p>
</div></div>
<div class="function">
<h3 id="conn_parse/1">conn_parse(Msg::incoming() (see module nkpacket), ConnState::conn_state()) -&gt; {ok, conn_state()} | {bridge, nkport() (see module nkpacket)} | {stop, Reason::term(), conn_state()}</h3>


<div class="description">

<p>This function is called when a new message arrives to the connection</p>
</div></div>
<div class="function">
<h3 id="conn_unparse/1">conn_unparse(Term::term(), ConnState::conn_state()) -&gt; {ok, incoming() (see module nkpacket), conn_state()} | {error, term(), conn_state()} | {stop, Reason::term()}</h3>


<div class="description">

<p>This function is called when a new message must be send to the connection</p>
</div></div>
<div class="function">
<h3 id="conn_bridge/1">conn_bridge(Data::incoming() (see module nkpacket), Type::up | down, ConnState::conn_state()) -&gt; {ok, incoming() (see module nkpacket), conn_state()} | {skip, conn_state()} | {stop, term(), conn_state()}</h3>


<div class="description">

<p>This function is called on incoming data for bridged connections</p>
</div></div>
<div class="function">
<h3 id="conn_handle_call/1">conn_handle_call(Msg::term(), From::{pid(), term()}, ListenState::conn_state()) -&gt; {ok, conn_state()} | {stop, Reason::term(), conn_state()}</h3>


<div class="description">

<p>Called when the connection received a gen_server:call/2,3</p>
</div></div>
<div class="function">
<h3 id="conn_handle_cast/1">conn_handle_cast(Msg::term(), ListenState::conn_state()) -&gt; {ok, conn_state()} | {stop, Reason::term(), conn_state()}</h3>


<div class="description">

<p>Called when the connection received a gen_server:cast/2</p>
</div></div>
<div class="function">
<h3 id="conn_handle_info/1">conn_handle_info(Msg::term(), ListenState::conn_state()) -&gt; {ok, conn_state()} | {stop, Reason::term(), conn_state()}</h3>


<div class="description">

<p>Called when the connection received an erlang message</p>
</div></div>
<div class="function">
<h3 id="conn_stop/1">conn_stop(Reason::term(), State::conn_state()) -&gt; ok</h3>


<div class="description">

<p>Called when the connection stops</p>
</div></div>
<div class="function">
<h3 id="listen_init/1">listen_init(X1::nkport() (see module nkpacket)) -&gt; listen_state()</h3>


<div class="description">

<p>Called when the listening transport starts</p>
</div></div>
<div class="function">
<h3 id="listen_parse/1">listen_parse(Ip::ip_address() (see module inet), Port::port_number() (see module inet), Msg::binary(), ListenState::listen_state()) -&gt; {ok, listen_state()} | {stop, Reason::term(), listen_state()}</h3>


<div class="description">

<p>This function is called only for UDP transports using no_connections=&gt;true</p>
</div></div>
<div class="function">
<h3 id="listen_handle_call/1">listen_handle_call(Msg::term(), From::{pid(), term()}, ListenState::listen_state()) -&gt; {ok, listen_state()} | {stop, Reason::term(), listen_state()}</h3>


<div class="description">

<p>Called when the listening transport received a gen_server:call/2,3</p>
</div></div>
<div class="function">
<h3 id="listen_handle_cast/1">listen_handle_cast(Msg::term(), ListenState::listen_state()) -&gt; {ok, listen_state()} | {stop, Reason::term(), listen_state()}</h3>


<div class="description">

<p>Called when the listening transport received a gen_server:cast/2</p>
</div></div>
<div class="function">
<h3 id="listen_handle_info/1">listen_handle_info(Msg::term(), ListenState::listen_state()) -&gt; {ok, listen_state()} | {stop, Reason::term(), listen_state()}</h3>


<div class="description">

<p>Called when the listening transport received an erlang message</p>
</div></div>
<div class="function">
<h3 id="listen_stop/1">listen_stop(Reason::term(), State::listen_state()) -&gt; ok</h3>


<div class="description">

<p>Called when the listening transport stops</p>
</div></div>
<div class="function">
<h3 id="http_init/1">http_init(NkPort::nkport() (see module nkpacket), Req::req() (see module cowboy_req), Env::env() (see module cowboy_middleware)) -&gt; {ok, Req::req() (see module cowboy_req), Env::env() (see module cowboy_middleware), Middlewares::[module()]} | {stop, req() (see module cowboy_req)}</h3>


<div class="description">

<p>This callback is called for the http/https "pseudo" transports.
  It is used by the built-in http protocol, nkpacket_protocol_http.erl</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

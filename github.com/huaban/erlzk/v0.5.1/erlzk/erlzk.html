<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>erlzk (erlzk) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>erlzk</h1>
<h2 class="modsummary">Convenience API to connect / disconnect to and to communicate with ZooKeeper.</h2>
<div class="description">
<p>Convenience API to connect / disconnect to and to communicate with ZooKeeper.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-acl">acl() = {[<a href="#type-perms" class="seealso">perms()</a>], <a href="#type-scheme" class="seealso">scheme()</a>, <a href="#type-id" class="seealso">id()</a>}</h3></div>
    <div class="type"><h3 id="type-create_mode">create_mode() = persistent<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| p<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ephemeral<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| e<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| persistent_sequential<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ps<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| ephemeral_sequential<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| es</h3></div>
    <div class="type"><h3 id="type-id">id() = string()</h3></div>
    <div class="type"><h3 id="type-op">op() = {create,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nonempty_string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;binary(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[<a href="#type-acl" class="seealso">acl()</a>],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-create_mode" class="seealso">create_mode()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {delete, nonempty_string(), integer()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {set_data, nonempty_string(), binary(), integer()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {check, nonempty_string(), integer()}</h3></div>
    <div class="type"><h3 id="type-op_result">op_result() = {create, nonempty_string()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {delete}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {set_data,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#stat{czxid = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mzxid = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ctime = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mtime = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;version = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cversion = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;aversion = undefined | integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ephemeral_owner = undefined<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;data_length = undefined<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;num_children = undefined<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pzxid = undefined | integer() >= 0}}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {check}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {error, atom()}</h3></div>
    <div class="type"><h3 id="type-options">options() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{chroot, nonempty_string()} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{disable_watch_auto_reset, true | false} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{auth_data, [{Scheme :: nonempty_string(), Id :: binary()}]} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{monitor, pid()}]</h3></div>
    <div class="type"><h3 id="type-perms">perms() = r | w | c | d | a</h3></div>
    <div class="type"><h3 id="type-scheme">scheme() = nonempty_string()</h3></div>
    <div class="type"><h3 id="type-server_list">server_list() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;[{Host :: nonempty_string(), Port :: integer() >= 1}]</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/0">start() -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Start the application.</p>
</div></div>
<div class="function">
<h3 id="stop/0">stop() -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Stop the application.</p>
</div></div>
<div class="function">
<h3 id="connect/1">connect(ServerList::server_list(), Timeout::pos_integer()) -&gt; {ok, pid()} | {error, atom()}</h3>


<div class="description">

<p>Connect to ZooKeeper.</p>
<p><em>See also:</em> <a href="#connect/4" class="seealso">connect/4</a>.</p>
</div></div>
<div class="function">
<h3 id="connect/1-1">connect(ServerList::server_list(), Timeout::pos_integer(), Options::options()) -&gt; {ok, pid()} | {error, atom()}</h3>


<div class="description">

<p>Connect to ZooKeeper.</p>
<p><em>See also:</em> <a href="#connect/4" class="seealso">connect/4</a>.</p>
</div></div>
<div class="function">
<h3 id="connect/2">connect(ServerName::{local, Name::atom()} | {global, GlobalName::term()} | {via, Module::atom(), ViaName::term()}, ServerList::server_list(), Timeout::pos_integer(), Options::options()) -&gt; {ok, pid()} | {error, atom()}</h3>


<div class="description">

<p>Connect to ZooKeeper.</p>
 
  <p>Timeout in milliseconds, Options contains:</p>
 
  <p><em>chroot</em>: specify a node under which erlzk will operate on</p>
 
  <p><em>disable_watch_auto_reset</em>: whether disable reset watches after the connection timeout, default is false</p>
 
  <p><em>auth_data</em>: the auths need to be added after connected</p>
 
  <p><em>monitor</em>: a process receiving the message of connection state changing</p>
</div></div>
<div class="function">
<h3 id="kill_session/1">kill_session(Pid::pid()) -&gt; ok</h3>


<div class="description">

<p>Cause the session to terminate while retaining connection.
   (useful when testing session restart behaviour).</p>
</div></div>
<div class="function">
<h3 id="close/1">close(Pid::pid()) -&gt; ok</h3>


<div class="description">

<p>Disconnect to ZooKeeper.</p>
</div></div>
<div class="function">
<h3 id="create/1">create(Pid::pid(), Path::iodata()) -&gt; {ok, Path::nonempty_string()} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path of the node.</p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create/1-1">create(Pid::pid(), Path::iodata(), Data::binary()) -&gt; {ok, Path::nonempty_string()} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path of the node.</p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create/1-2">create(Pid::pid(), Path::iodata(), Data::binary(), Acl::acl()) -&gt; {ok, Path::nonempty_string()} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path of the node.</p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create/1-3">create(Pid::pid(), Path::iodata(), Data::binary(), Acl::acl(), CreateMode::create_mode()) -&gt; {ok, Path::nonempty_string()} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path of the node.</p>
 
  <p>Create a node with the given path in ZooKeeper, node data will be the given Data,  
node acl will be the given acl, and create mode affect the creation of node.  
An ephemeral node will be removed by the ZooKeeper automatically when the  
connection associated with the creation of the node expires.</p>
 
  <p>The create mode can also specify to create a sequential node.  
The actual path name of a sequential node will be the given path plus a  
suffix "i" where i is the current sequential number of the node.  
The sequence number is always fixed length of 10 digits, 0 padded.  
Once such a node is created, the sequential number will be incremented by one.</p>
 
  <p>If the path is not start with "/" or end with "/" or contains illegal characters,  
will return {error, bad_arguments}.</p>
 
  <p>{error, node_exists} will be returned if a node with the same actual path already exists.</p>
 
  <p>{error, no_node} will be returned if the parent node does not exist.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, invalid_acl} will be returned if the acl is empty or invalid.</p>
 
  <p>{error, no_children_for_ephemerals} will be returned if the parent node of the given  
path is ephemeral, because an ephemeral node can't have children.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, will trigger all the watches left on the
  node of the given path by <a href="#exists/3" class="seealso">exists/3</a> and <a href="#get_data/3" class="seealso">get_data/3</a>,
  and the watches left on the parent node by <a href="#get_children/3" class="seealso">get_children/3</a>.</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(Pid::pid(), Path::iodata()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Delete the node with the given path.</p>
<p><em>See also:</em> <a href="#delete/3" class="seealso">delete/3</a>.</p>
</div></div>
<div class="function">
<h3 id="delete/1-1">delete(Pid::pid(), Path::iodata(), Version::integer()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Delete the node with the given path.</p>
 
  <p>The call will succeed if such a node exists, and the given version matches the node's version  
(if the given version is -1, it matches any node's versions).</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, bad_version} will be returned if the given version does not match the node's version.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, not_empty} will be returned if the node has children.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, will trigger all the watches left on the node of
  the given path by <a href="#exists/3" class="seealso">exists/3</a> and <a href="#get_data/3" class="seealso">get_data/3</a> and <a href="#get_children/3" class="seealso">get_children/3</a>,
  and the watches left on the parent node by <a href="#get_children/3" class="seealso">get_children/3</a>.</p>
</div></div>
<div class="function">
<h3 id="exists/1">exists(Pid::pid(), Path::iodata()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Checks the existence of the node of the given path, return the stat of the node.</p>
<p><em>See also:</em> <a href="#exists/3" class="seealso">exists/3</a>.</p>
</div></div>
<div class="function">
<h3 id="exists/1-1">exists(Pid::pid(), Path::iodata(), Watcher::pid()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Checks the existence of the node of the given path, return the stat of the node.</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, a watch will be left on the node with the given path.
  The watch will be triggered by a successful operation that <a href="#set_data/4" class="seealso">set_data/4</a> on the node,
  or <a href="#create/5" class="seealso">create/5</a> / <a href="#delete/3" class="seealso">delete/3</a> the node.</p>
</div></div>
<div class="function">
<h3 id="get_data/1">get_data(Pid::pid(), Path::iodata()) -&gt; {ok, {Data::binary(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Return the data and the stat of the node of the given path.</p>
<p><em>See also:</em> <a href="#get_data/3" class="seealso">get_data/3</a>.</p>
</div></div>
<div class="function">
<h3 id="get_data/1-1">get_data(Pid::pid(), Path::iodata(), Watcher::pid()) -&gt; {ok, {Data::binary(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Return the data and the stat of the node of the given path.</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, a watch will be left on the node with the given path.
  The watch will be triggered by a successful operation that <a href="#set_data/4" class="seealso">set_data/4</a> on the node,
  or <a href="#create/5" class="seealso">create/5</a> / <a href="#delete/3" class="seealso">delete/3</a> the node.</p>
</div></div>
<div class="function">
<h3 id="set_data/1">set_data(Pid::pid(), Path::iodata(), Data::binary()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Set the data for the node of the given path, return the stat of the node.</p>
<p><em>See also:</em> <a href="#set_data/4" class="seealso">set_data/4</a>.</p>
</div></div>
<div class="function">
<h3 id="set_data/1-1">set_data(Pid::pid(), Path::iodata(), Data::binary(), Version::integer()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Set the data for the node of the given path, return the stat of the node.</p>
 
  <p>The call will succeed if such a node exists, and the given version matches the node's version  
(if the given version is -1, it matches any node's versions).</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, bad_version} will be returned if the given version does not match the node's version.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, will trigger all the watches on the node of the given path
  left by <a href="#exists/3" class="seealso">exists/3</a> and <a href="#get_data/3" class="seealso">get_data/3</a> calls.</p>
</div></div>
<div class="function">
<h3 id="get_acl/1">get_acl(Pid::pid(), Path::iodata()) -&gt; {ok, {Acl::[acl()], Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Get the ACL of the node of the given path, return the ACL and the stat of the node.</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
</div></div>
<div class="function">
<h3 id="set_acl/1">set_acl(Pid::pid(), Path::iodata(), Acl::acl()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Set the ACL of the node of the given path, return the ACL and the stat of the node.</p>
<p><em>See also:</em> <a href="#set_acl/4" class="seealso">set_acl/4</a>.</p>
</div></div>
<div class="function">
<h3 id="set_acl/1-1">set_acl(Pid::pid(), Path::iodata(), Acl::acl(), Version::integer()) -&gt; {ok, Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}} | {error, atom()}</h3>


<div class="description">

<p>Set the ACL of the node of the given path, return the ACL and the stat of the node.</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, bad_version} will be returned if the given version does not match the node's version.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the acl is empty or invalid, will return {error, invalid_acl}.</p>
</div></div>
<div class="function">
<h3 id="get_children/1">get_children(Pid::pid(), Path::iodata()) -&gt; {ok, Children::[nonempty_string()]} | {error, atom()}</h3>


<div class="description">

<p>Return the list of the children of the node of the given path.</p>
<p><em>See also:</em> <a href="#get_children/3" class="seealso">get_children/3</a>.</p>
</div></div>
<div class="function">
<h3 id="get_children/1-1">get_children(Pid::pid(), Path::iodata(), Watcher::pid()) -&gt; {ok, Children::[nonempty_string()]} | {error, atom()}</h3>


<div class="description">

<p>Return the list of the children of the node of the given path.</p>
 
  <p>{error, no_node} will be returned if the node does not exist.</p>
 
  <p>{error, no_auth} will be returned if no authority.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If the call is successful, a watch will be left on the node with the given path.
  The watch will be triggered by a successful operation that <a href="#delete/3" class="seealso">delete/3</a> the node of the given path
  or <a href="#create/5" class="seealso">create/5</a> / <a href="#delete/3" class="seealso">delete/3</a> a child under the node.</p>
 
  <p>The list of children returned is not sorted and no guarantee is provided
  as to its natural or lexical order.</p>
</div></div>
<div class="function">
<h3 id="sync/1">sync(Pid::pid(), Path::iodata()) -&gt; {ok, Path::nonempty_string()} | {error, atom()}</h3>


<div class="description">

<p>Flushes channel between process and leader.</p>
 
  <p>{error, closed} will be returned during reconnecting.</p>
 
  <p>If it is important that multiple client read the same value, call this function before read.</p>
</div></div>
<div class="function">
<h3 id="get_children2/1">get_children2(Pid::pid(), Path::iodata()) -&gt; {ok, {Children::[nonempty_string()], Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Return the list of the children and the stat of the node of the given path.</p>
<p><em>See also:</em> <a href="#get_children/3" class="seealso">get_children/3</a>.</p>
</div></div>
<div class="function">
<h3 id="get_children2/1-1">get_children2(Pid::pid(), Path::iodata(), Watcher::pid()) -&gt; {ok, {Children::[nonempty_string()], Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Return the list of the children and the stat of the node of the given path.</p>
<p><em>See also:</em> <a href="#get_children/3" class="seealso">get_children/3</a>.</p>
</div></div>
<div class="function">
<h3 id="multi/1">multi(Pid::pid(), Ops::[op()]) -&gt; {ok, [op_result()]} | {error, {atom(), [op_result()]}}</h3>


<div class="description">

<p>Executes multiple ZooKeeper operations or none of them.</p>
 
  <p>Use <a href="#op/1" class="seealso">op/1</a> to constructe operations.</p>
 
  <p>On success, a list of results is returned.</p>
 
  <p>On failure, a tuple contains first error code and a list of results is returned, or
  {error, closed} will be returned during reconnecting.</p>
</div></div>
<div class="function">
<h3 id="create2/1">create2(Pid::pid(), Path::iodata()) -&gt; {ok, {Path::nonempty_string(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path and the stat of the node.</p>
 
  <p>ATTENTION: ZooKeeper latest stable v3.4.6 removed create2 function, but it works fine in
  v3.4.5 or current developing v3.5.0 (ZooKeeper added it again).
 </p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create2/1-1">create2(Pid::pid(), Path::iodata(), Data::binary()) -&gt; {ok, {Path::nonempty_string(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path and the stat of the node.</p>
 
  <p>ATTENTION: ZooKeeper latest stable v3.4.6 removed create2 function, but it works fine in
  v3.4.5 or current developing v3.5.0 (ZooKeeper added it again).
 </p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create2/1-2">create2(Pid::pid(), Path::iodata(), Data::binary(), Acl::acl()) -&gt; {ok, {Path::nonempty_string(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path and the stat of the node.</p>
 
  <p>ATTENTION: ZooKeeper latest stable v3.4.6 removed create2 function, but it works fine in
  v3.4.5 or current developing v3.5.0 (ZooKeeper added it again).
 </p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="create2/1-3">create2(Pid::pid(), Path::iodata(), Data::binary(), Acl::acl(), CreateMode::create_mode()) -&gt; {ok, {Path::nonempty_string(), Stat::#stat{czxid=undefined | non_neg_integer(), mzxid=undefined | non_neg_integer(), ctime=undefined | non_neg_integer(), mtime=undefined | non_neg_integer(), version=undefined | non_neg_integer(), cversion=undefined | non_neg_integer(), aversion=undefined | non_neg_integer(), ephemeral_owner=undefined | non_neg_integer(), data_length=undefined | non_neg_integer(), num_children=undefined | non_neg_integer(), pzxid=undefined | non_neg_integer()}}} | {error, atom()}</h3>


<div class="description">

<p>Create a node with the given path, return the actual path and the stat of the node.</p>
 
  <p>ATTENTION: ZooKeeper latest stable v3.4.6 removed create2 function, but it works fine in
  v3.4.5 or current developing v3.5.0 (ZooKeeper added it again).
 </p>
<p><em>See also:</em> <a href="#create/5" class="seealso">create/5</a>.</p>
</div></div>
<div class="function">
<h3 id="add_auth/1">add_auth(Pid::pid(), Username::nonempty_string(), Password::nonempty_string()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Add the specified scheme and auth information to this connection.</p>
 
  <p>If using <em>digest</em> scheme, the auth information is the username:password in binary,  
or username and password in clear text directly.</p>
 
  <p>If using <em>ip</em> scheme, the auth information is the form addr/bits where the most significant bits of addr are
  matched against the most significant bits of the client host IP.</p>
</div></div>
<div class="function">
<h3 id="generate_digest/1">generate_digest(Username::nonempty_string(), Password::nonempty_string()) -&gt; EncodedString::nonempty_string()</h3>


<div class="description">

<p>Generate Username:base64 encoded SHA1 Password digest string</p>
</div></div>
<div class="function">
<h3 id="op/1">op(X1) -&gt; term()
</h3>


<div class="description">

<p>Construtes a single operation in a multi-operation transaction.</p>
 
  <p>Each operation can be a <em>create</em>, <em>set_data</em> or <em>delete</em> or can just be a version <em>check</em>.</p>
 
  <p>Accept a tuple as parameters, including a operation atom and args, the format of the args is the  
same as the function of the corresponding operation, except no pid.</p>
 
  <p><em>check</em> accept the Path of a node (nonempty_string()) and the Version of the node (non_neg_integer())
 </p>
<p><em>See also:</em> <a href="#create/2" class="seealso">create/2</a>, <a href="#create/3" class="seealso">create/3</a>, <a href="#create/4" class="seealso">create/4</a>, <a href="#create/5" class="seealso">create/5</a>, <a href="#delete/2" class="seealso">delete/2</a>, <a href="#delete/3" class="seealso">delete/3</a>, <a href="#set_data/3" class="seealso">set_data/3</a>, <a href="#set_data/4" class="seealso">set_data/4</a>.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

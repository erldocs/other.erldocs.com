<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>single_conn_tcp_client (erl_single_conn_tcp_client) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>single_conn_tcp_client</h1>
<h2 class="modsummary">.</h2>
<div class="description">
<p>Dependencies: lager</p>
  
   <p>This TCP client is built around a few key requirements around maintaining   
a single, persistent connection to one out of multiple endpoints.</p>
  
   <p>1. Single, persistent TCP connection to one of the endpoints.   
2. One request at a time; queue multiple requests.   
3. Send timeout specified on each call allowing for different send timeouts      
for different messages.   
4. Automatic (re) connect; connection logic is abstracted behind the      
send API.   
5. Endpoint failover; a list of endpoints is configured,      
and if we cannot reconnect to an endpoint we try the next one.   
6. Configurable timeouts for reconnection timeout and interval.   
7. Queue send requests during reconnection attempts. If a request cannot be      
sent over TCP due to connection being down, we keep it until its send      
timeout is reached. If a reconection occurs, we sequentially go through      
the queue in order.</p>
  
   NOTE: Make sure the timeout for each request is big enough to avoid ever
         getting a response after a request timeout, as such late responses
         could be sent as reply to a following, possibly queued, request.
         This case is intentionally not handled by this client, as it would
         require packet inspection.
  </div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="send/1">send(Msg::binary(), Timeout::pos_integer()) -&gt; timeout | {ok, Response::binary()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="start_link/0">start_link() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="stop/0">stop() -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="init/1">init(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_call/3">handle_call(Call, From, S) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_cast/2">handle_cast(Cast, S) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_info/2">handle_info(Info, S) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="terminate/2">terminate(Reason, S) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="code_change/3">code_change(OldVsn, S, Extra) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Gustav Simonsson</aname>
<email>gustav.simonsson@gmail.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

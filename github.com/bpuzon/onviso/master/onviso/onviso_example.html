<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>onviso_example (onviso) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>onviso_example</h1>
<h2 class="modsummary">Onviso_example contains a number of examples on how merging
  using 'onviso:merge/4' can be conducted.</h2>
<div class="description">
<p>Onviso_example contains a number of examples on how merging
  using <a href="onviso.html#merge/4" class="seealso">'onviso:merge/4'</a> can be conducted.
  The examples in this module is by no means conclusive but aims to
  help new users of Onviso or Inviso grasp the possibilities that
  merging traces provides. It is fully possible to build customised
  profiling tools and property checking tools based solely on the traces
  generated and the merge function.</p>
 
  <p>Please have a look at the source code of this file to understand the
  examples.</p>
 
   <p>Version: 1.0</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="profiling_count_function_calls/1">profiling_count_function_calls(Ref::integer()) -&gt; {ok, integer()}</h3>


<div class="description">

<p>This example implements a function call counter based on traces  
generated. All results are stored as tuples in the handler data,  
which is a list.</p>
 
  <p>Each trace is evaluated using a separate internal function. Since
  the format of the incoming traces are not always the same, the
  <code>workerfun</code> must match several heads. Everything which is
  not a function call is however ignored.</p>
</div></div>
<div class="function">
<h3 id="profiling_count_function_calls_shell/1">profiling_count_function_calls_shell(Ref::integer()) -&gt; {ok, integer()}</h3>


<div class="description">

<p>Same as the example above except that it sends all traces to
  the shell when merging is complete. Note that merging and sending
  traces to shell is not the same as directly relaying them to to a
  collector node. Here the merging will take place as defined first.</p>
</div></div>
<div class="function">
<h3 id="profiling_time_function_calls/1">profiling_time_function_calls(Ref::integer()) -&gt; {ok, integer()}</h3>


<div class="description">

<p>This example demonstrates how traces and their return signals  
can be used to implement a simple profiler by measuring the execution  
time of each function call.</p>
 
  <p>This is done by storing each 'call' and the time when it was
  generated and comparing it with the 'return_from' trace's time. The
  list of processed calls are stored in a record which is passed in
  as the handler data. </p>
 
  <pre class="sh_erlang">
  -record(mdata, {calls, results}).
  </pre>
 
  <p>
  The same record also stores the evaluated results in a separate list.</p>
  <p>Although the <code>WorkFun</code> doesn't necessarily classify as
  beautiful code, it demonstrates that quite a lot can be done without
  help from external modules or functions. </p>
 
  <p><em>Note:</em> this may neither be the most accurate nor
  most efficient way of profiling function calls. </p>
</div></div>
<div class="function">
<h3 id="node_trace_counter/1">node_trace_counter(Ref::integer()) -&gt; {ok, integer()}</h3>


<div class="description">

<p>This function summarises the traces by node.</p>
</div></div>
<div class="function">
<h3 id="overload_protection/0">overload_protection() -&gt; {ok, integer()}</h3>


<div class="description">

<p>In this example, a trace is set-up with overload protection
  activated. The <a href="overload_handler.html" class="seealso">'overload_handler'</a> module
  provides the three functions required when activating overload protection.</p>
</div></div></div>

<authors>

<aname>Aniko Nagyne Vig</aname>
<email>aniko@erlang-consulting.com</email>
<aname>Marcus Ljungblad, Erlang Training and Consulting Ltd</aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

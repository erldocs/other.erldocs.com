<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>kvdb_conf (kvdb) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>kvdb_conf</h1>
<h2 class="modsummary">   
API to store NETCONF-style config data in kvdb.</h2>
<div class="description">
<p>   
API to store NETCONF-style config data in kvdb</p>
  
   <p>identifiers are stored as a structured key (binary)   
delimited by:</p>
  
   <p>Example:
   <code>{system,[{services, [{ssh,[...]}]}]}</code> would be stored as</p>
  
   <p>{"system", []}   
{"system*services", []}   
{"system*services*ssh", []}</p>
  
   Netconf identifiers can consist of alphanumerics, '-', '_' or '.'.
   The '*' as delimiter is chosen so that a "wildcard" character can be
   used that is greater than the delimiter, but smaller than any identifier
   character.</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-attrs">attrs() = [{atom(), any()}]</h3></div>
    <div class="type"><h3 id="type-conf_node">conf_node() = {<a href="#type-key" class="seealso">key()</a>, <a href="#type-attrs" class="seealso">attrs()</a>, <a href="#type-data" class="seealso">data()</a>, <a href="#type-conf_tree" class="seealso">conf_tree()</a>}</h3></div>
    <div class="type"><h3 id="type-conf_obj">conf_obj() = {<a href="#type-key" class="seealso">key()</a>, <a href="#type-attrs" class="seealso">attrs()</a>, <a href="#type-data" class="seealso">data()</a>}</h3></div>
    <div class="type"><h3 id="type-conf_tree">conf_tree() = [<a href="#type-conf_node" class="seealso">conf_node()</a> | <a href="#type-conf_obj" class="seealso">conf_obj()</a>]</h3></div>
    <div class="type"><h3 id="type-data">data() = binary()</h3></div>
    <div class="type"><h3 id="type-key">key() = binary()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="open/1">open(File) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="open/2">open(File, Options) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="options/1">options(File) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_table/1">add_table(T) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_table/2">add_table(T, Opts) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="close/0">close() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="read/1">read(Key::key()) -&gt; {ok, conf_obj()} | {error, any()}</h3>


<div class="description">

<p>Reads a configuration object from the database</p>
 
  <p>The returned item is always the single node. See read_tree(Prefix) on how to read an
  entire tree structure.</p>
</div></div>
<div class="function">
<h3 id="read/2">read(Tab, Key) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="write/1">write(Obj::conf_obj()) -&gt; ok</h3>


<div class="description">

<p>Writes a configuration object into the database.</p>
 
  <p>Each node or leaf in the tree is stored as a separate object, so updating or inserting
  a node or leaf in the tree is a very cheap operation.</p>
</div></div>
<div class="function">
<h3 id="write/2">write(Tab, Obj) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="update_counter/2">update_counter(K, Incr) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="update_counter/3">update_counter(Tab, K, Incr) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete/1">delete(K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete/2">delete(Tab, K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete_all/1">delete_all(Prefix) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete_all/2">delete_all(Tab, Prefix) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="all/0">all() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="all/1">all(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first/0">first() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="last/0">last() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next/1">next(K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="prev/1">prev(K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first/1">first(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="last/1">last(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next/2">next(Tab, K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="prev/2">prev(Tab, K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first_tree/0">first_tree() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first_tree/1">first_tree(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="last_tree/0">last_tree() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="last_tree/1">last_tree(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next_tree/1">next_tree(K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next_tree/2">next_tree(Tab, K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next_at_level/1">next_at_level(K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="next_at_level/2">next_at_level(Tab, K) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first_top_key/0">first_top_key() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="first_top_key/1">first_top_key(Tab) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="read_tree/1">read_tree(Prefix::binary()) -&gt; conf_tree()</h3>


<div class="description">

<p>Read a configuration (sub-)tree matching Prefix.</p>
 
  <p>This function does a prefix match on the configuration database, and builds a tree
  from the result. The empty binary will result in the whole tree being built.</p>
</div></div>
<div class="function">
<h3 id="read_tree/2">read_tree(Tab, Prefix) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="make_tree/1">make_tree(Objs::[conf_obj()]) -&gt; conf_tree()</h3>


<div class="description">

<p>Converts an ordered list of configuration objects into a configuration tree.</p>
</div></div>
<div class="function">
<h3 id="split_key/1">split_key(K::binary()) -&gt; [binary()]</h3>


<div class="description">

<p>Splits a <code>kvdb_conf` key into a list of key parts
 
  Example: `split_key(&lt;&lt;"a*b*c"&gt;&gt;) -&gt; [&lt;&lt;"a"&gt;&gt;,&lt;&lt;"b"&gt;&gt;,&lt;&lt;"c"&gt;&gt;].</code></p>
</div></div>
<div class="function">
<h3 id="join_key/1">join_key(T::[binary()]) -&gt; binary()</h3>


<div class="description">

<p>Creates a kvdb_conf key out of a list of key parts</p>
 
  <p>(See <a href="#split_key/1" class="seealso">split_key/1</a>).</p>
 
  <p>Example: <code>join_key([&lt;&lt;"a"&gt;&gt;, &lt;&lt;"b"&gt;&gt;, &lt;&lt;"c"&gt;&gt;]) -&gt; &lt;&lt;"a*b*c"&gt;&gt;</code></p>
</div></div>
<div class="function">
<h3 id="flatten_tree/1">flatten_tree(Tree::conf_tree()) -&gt; [conf_obj()]</h3>


<div class="description">

<p>Converts a configuration tree into an ordered list of configuration objects.</p>
</div></div>
<div class="function">
<h3 id="store_tree/1">store_tree(Tree::conf_tree()) -&gt; ok</h3>


<div class="description">

<p>Store a configuration tree in the database.</p>
 
  <p>Each node in the tree will be stored as a separate object in the database.
 </p>
</div></div>
<div class="function">
<h3 id="store_tree/2">store_tree(Tab, Tree) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Ulf Wiger</aname>
<email>ulf@wiger.net</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

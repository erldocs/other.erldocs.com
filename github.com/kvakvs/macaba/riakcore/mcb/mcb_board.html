<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>mcb_board (mcb) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>mcb_board</h1>
<h2 class="modsummary">Board data model, is used by board client (macaba_board_cli) and then
   formatted to HTML or JSON etc.</h2>
<div class="description">
<p>Board data model, is used by board client (macaba_board_cli) and then
   formatted to HTML or JSON etc</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/0">start() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_thread/3">add_thread(BoardId, ThreadId, Pinned) -&gt; term()
</h3>


<div class="description">

<p>Modifies board dynamic and registers new thread in it, based on Pinned
  parameter, thread is stored in either pinned_threads or threads</p>
</div></div>
<div class="function">
<h3 id="get_boards/0">get_boards() -&gt; [#mcb_board{board_id=undefined | binary(), category=undefined | binary(), title=undefined | binary(), short_name=undefined | binary(), anonymous_name=undefined | binary(), max_threads=integer(), max_thread_posts=integer(), max_thread_post_lock=integer(), poster_id=binary(), poster_id_sage_text=any()}]</h3>


<div class="description">

<p>Returns list of configured boards</p>
</div></div>
<div class="function">
<h3 id="get_site_config/0">get_site_config() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_site_config/1">set_site_config(Site) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get/1">get(BoardId::binary()) -&gt; {ok, #mcb_board{board_id=undefined | binary(), category=undefined | binary(), title=undefined | binary(), short_name=undefined | binary(), anonymous_name=undefined | binary(), max_threads=integer(), max_thread_posts=integer(), max_thread_post_lock=integer(), poster_id=binary(), poster_id_sage_text=any()}} | {error, not_found}</h3>


<div class="description">

<p>Returns board by name</p>
</div></div>
<div class="function">
<h3 id="get_threads/1">get_threads(BoardId::binary()) -&gt; {ok, [#mcb_thread{thread_id=undefined | binary(), board_id=undefined | binary(), hidden=boolean(), pinned=boolean(), read_only=boolean()}], [#mcb_thread{thread_id=undefined | binary(), board_id=undefined | binary(), hidden=boolean(), pinned=boolean(), read_only=boolean()}]} | {error, any()}</h3>


<div class="description">

<p>Returns list of threads in board (only info headers, no contents!), also
  a proplist with board contents (first post and X last posts - configurable)</p>
</div></div>
<div class="function">
<h3 id="next_post_id/1">next_post_id(BoardId) -&gt; term()
</h3>


<div class="description">

<p>Generates new post_id for creating thread on the board</p>
</div></div>
<div class="function">
<h3 id="get_dynamic/1">get_dynamic(BoardId) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_dynamic_riak/1">get_dynamic_riak(BoardId) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="load_board_dynamics/0">load_board_dynamics() -&gt; term()
</h3>


<div class="description">

<p>May be SLOW! Enumerates RIAK keys in board bucket, and calculates thread
  lists for boards. Do this only on one node of the macaba cluster.
  This is called from macaba_masternode:handle_leader_call after startup been
  finished, call initiated by macaba_startup temporary module</p>
</div></div>
<div class="function">
<h3 id="touch_board_dynamic/1">touch_board_dynamic(Mcb_board_dynamic::#mcb_board_dynamic{board_id=undefined | binary(), last_post_id=integer(), pinned_threads=[binary()], threads=[binary()], last_modified=undefined | datetime() (see module calendar), etag=binary()}) -&gt; #mcb_board_dynamic{board_id=undefined | binary(), last_post_id=integer(), pinned_threads=[binary()], threads=[binary()], last_modified=undefined | datetime() (see module calendar), etag=binary()}</h3>


<div class="description">

<p>Updates last_modified and etag for Board Dynamic
  You have to update board dynamic if board is changed</p>
</div></div></div>

<authors>

<aname>Dmytro Lytovchenko</aname>
<email>kvakvs@yandex.ru</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

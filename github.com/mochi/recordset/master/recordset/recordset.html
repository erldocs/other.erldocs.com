<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>recordset (recordset) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>recordset</h1>
<h2 class="modsummary">An optionally fixed-sized ordered set of complex terms, including  
Erlang records.</h2>
<div class="description">
<p>An optionally fixed-sized ordered set of complex terms, including  
Erlang records.</p>
 
  <p><em>Rationale</em></p>
 
  <p>A <code>recordset</code> provides 3 unique properties not found with
  <code>ordsets</code>.</p>
 
  <list>
  <item>User defined identity of elements. <p>
 
    One of the most useful features of a set is that each item only exists in
    the set once.  However both <code>sets</code> and <code>ordsets</code>
    require that the entire term match (<code>=:=</code>) or compare equal
    (<code>==</code>) respectively.  This requirement can be too strict for
    certain types of data (such as a set of 10 high scores with only a single
    score per user.)  <code>recordset</code> allows you to define a 2-arity
    function which will be used to compare the identity of two elements in
    the set.
 
    <h3>Example</h3>
 
    This <code>IdentityFun</code> compares 2 <code>#score{}</code> records
    and determines that they are the same if and only if they were created by
    the same player.  If two elements are the same, only one of them is
    allowed to exist in the list.
 
    <pre class="sh_erlang">
      fun(#score{player=A}, #score{player=B}) -&gt;
          A =:= B
      end.
    </pre>
 
  </p></item>
 
  <item>User defined sorting of elements. <p>
 
    The most useful feature of <code>ordsets</code> is that they are indeed
    ordered.  However as with identity of elements, the sorting of elements
    is based on the entirety of the terms in the set.  <code>recordset</code>
    allows you to define another 2-arity function which will be used to sort
    the elements.
 
    <h3>Example</h3>
 
    This <code>SortFun</code> will cause <code>#score{}</code> records
    to be sorted by score in ascending order.  So that when converted to a
    list the lowest scores will be at the front of the list.
 
    <pre class="sh_erlang">
      fun(#score{score=A}, #score{score=B}) -&gt;
          A &lt; B
      end.
    </pre>
 
  </p></item>
  <item>Optionally fixed size. <p>
 
    <code>sets</code>, <code>ordsets</code>, and by default
    <code>recordset</code> will also grow in size as items are added to the
    set.  However it may be desirable to store a fixed number of elements
    (such as 50 or 100 highest scores.)  In which case <code>recordset</code>
    can be given a <code>max_size</code>, and once more than
    <code>max_size</code> items are added to the set items which sort lowest
    based on the supplied <code>SortFun</code> will be removed.
 
  </p></item>
  </list><p>
 </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-cmp_fun">cmp_fun() = {fun((term(), term()) -&gt; boolean())}</h3></div>
    <div class="type"><h3 id="type-op">op() = <a href="statebox.html#type-op" class="seealso">statebox:op()</a></h3></div>
    <div class="type"><h3 id="type-option">option() = {atom(), term()}</h3></div>
    <div class="type"><h3 id="type-recordset">recordset()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="new/1">new(IdentityFun::cmp_fun(), SortFun::cmp_fun()) -&gt; recordset()</h3>


<div class="description">
<p>Equivalent to <a href="#new/3" class="seealso">new(IdentityFun, SortFun, [])</a>.</p>
</div></div>
<div class="function">
<h3 id="new/1-1">new(IdentityFun::cmp_fun(), SortFun::cmp_fun(), Options::[option()]) -&gt; recordset()</h3>


<div class="description">

<p>Create an empty <code>recordset</code>.
  Options:
  </p><taglist>
   <dt><code>max_size</code></dt>
   <item><p>Specifies the maximum number of elements that will exist in the set.
   </p></item>
  </taglist>
</div></div>
<div class="function">
<h3 id="is_recordset/1">is_recordset(Recordset::any()) -&gt; boolean()</h3>


<div class="description">

<p>Return <code>true</code> if the argument is a <code>recordset</code>,
       <code>false</code> otherwise.</p>
</div></div>
<div class="function">
<h3 id="from_list/1">from_list(List::[term()], IdentityFun::cmp_fun(), SortFun::cmp_fun(), Options::[option()]) -&gt; recordset()</h3>


<div class="description">
<p>Equivalent to <a href="#from_list/2" class="seealso">from_list(List,
	  recordset:new(IdentityFun, SortFun, Options))</a>.</p>
</div></div>
<div class="function">
<h3 id="from_list/1-1">from_list(List::[term()], RecordSet::recordset()) -&gt; recordset()</h3>


<div class="description">

<p>Populate the specified <code>RecordSet</code> with the given
       <code>List</code> of elements.</p>
</div></div>
<div class="function">
<h3 id="to_list/1">to_list(Recordset::recordset()) -&gt; list()</h3>


<div class="description">

<p>Return the elements in the <code>recordset</code> as an ordered list
       of elements.</p>
</div></div>
<div class="function">
<h3 id="size/1">size(Recordset::recordset()) -&gt; integer()</h3>


<div class="description">

<p>Return the current size of the given <code>recordset</code> as an
       integer.</p>
</div></div>
<div class="function">
<h3 id="max_size/1">max_size(Recordset::recordset()) -&gt; undefined | integer()</h3>


<div class="description">

<p>Return the max size as an integer or <code>undefined</code> if this
       <code>recordset</code> is not of a fixed size.</p>
</div></div>
<div class="function">
<h3 id="add/1">add(Term::term(), RecordSet::recordset()) -&gt; recordset()</h3>


<div class="description">

<p>Add <code>Term</code> to the <code>recordset</code>.</p>
 
  <p>If the <code>recordset</code> is fixed-sized and <code>Term</code> is the
  smallest element when <code>SortFun</code> and <code>max_size</code> has
  been exceeded, then <code>Term</code> will not be added to the set.  And if
  <code>Term</code> is not the smallest element in the set, the new smallest  
element will be removed.</p>
 
  <p>If the <code>recordset</code> is not fixed-sized then <code>Term</code>
  will be added to the set as long as <code>IdentityFun</code> does not
  determine that is the same as an existing element and <code>SortFun</code>
  does not determine that it is smaller than the existing element with the
  same identity.</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(Term::term(), RecordSet::recordset()) -&gt; recordset()</h3>


<div class="description">

<p>Remove an element from the <code>recordset</code>.</p>
</div></div>
<div class="function">
<h3 id="statebox_add/1">statebox_add(Term::term()) -&gt; op()</h3>


<div class="description">

<p>Return a <code>statebox:op()</code> which will add the given
       <code>Term</code> to a <code>recordset</code>.</p>
</div></div>
<div class="function">
<h3 id="statebox_delete/1">statebox_delete(Term::term()) -&gt; op()</h3>


<div class="description">

<p>Return a <code>statebox:op()</code> which will delete the given
       <code>Term</code> from a <code>recordset</code>.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

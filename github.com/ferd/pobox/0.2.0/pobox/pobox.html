<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>pobox (pobox) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>pobox</h1>
<h2 class="modsummary">Generic process that acts as an external mailbox and a
  message buffer that will drop requests as required.</h2>
<div class="description">
<p>Generic process that acts as an external mailbox and a
  message buffer that will drop requests as required. For more
  information, see README.txt</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-drop">drop() = integer() &gt;= 0</h3></div>
    <div class="type"><h3 id="type-filter">filter() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fun((Msg :: term(), State :: term()) -><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{{ok, NewMsg :: term()} | drop, State :: term()} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;skip)</h3></div>
    <div class="type"><h3 id="type-in">in() = {post, Msg :: term()}</h3></div>
    <div class="type"><h3 id="type-mail">mail() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{mail,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Self :: pid(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Msgs :: list(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Lost :: <a href="#type-drop" class="seealso">drop()</a>}</h3></div>
    <div class="type"><h3 id="type-max">max() = integer() &gt;= 1</h3></div>
    <div class="type"><h3 id="type-note">note() = {mail, Self :: pid(), new_data}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/1">start_link(Owner::pid(), Size::max(), Type::stack | queue) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Starts a new buffer process. The implementation can either
  be a stack or a queue, depending on which messages will be dropped
  (older ones or newer ones). Note that stack buffers do not guarantee
  message ordering.
  The initial state can be either passive or notify, depending on whether
  the user wants to get notifications of new messages as soon as possible.</p>
</div></div>
<div class="function">
<h3 id="start_link/1-1">start_link(Owner::pid(), Size::max(), Type::stack | queue, StateName::notify | passive) -&gt; {ok, pid()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="start_link/1-2">start_link(Name::term(), Owner::pid(), Size::max(), Type::stack | queue, StateName::notify | passive) -&gt; {ok, pid()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="resize/1">resize(Box::pid(), NewSize::max()) -&gt; ok</h3>


<div class="description">

<p>Allows to take a given buffer, and make it larger or smaller.
  A buffer can be made larger without overhead, but it may take
  more work to make it smaller given there could be a
  need to drop messages that would now be considered overflow.</p>
</div></div>
<div class="function">
<h3 id="active/1">active(Box::pid(), Fun::filter(), State::term()) -&gt; ok</h3>


<div class="description">

<p>Forces the buffer into an active state where it will
  send the data it has accumulated. The fun passed needs to have
  two arguments: A message, and a term for state. The function can return,
  for each element, a tuple of the form {Res, NewState}, where <code>Res</code> can be:
  - <code>{ok, Msg}</code> to receive the message in the block that gets shipped
  - <code>drop</code> to ignore the message
  - <code>skip</code> to stop removing elements from the stack, and keep them for later.</p>
</div></div>
<div class="function">
<h3 id="notify/1">notify(Box::pid()) -&gt; ok</h3>


<div class="description">

<p>Forces the buffer into its notify state, where it will send a single
  message alerting the Owner of new messages before going back to the passive
  state.</p>
</div></div>
<div class="function">
<h3 id="post/1">post(Box::pid(), Msg::term()) -&gt; ok</h3>


<div class="description">

<p>Sends a message to the PO Box, to be buffered.</p>
</div></div></div>

<authors>

<aname>Fred Hebert</aname>
<email>mononcqc@ferd.ca</email>
<aname>Geoff Cant</aname>
<email>nem@erlang.geek.nz</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

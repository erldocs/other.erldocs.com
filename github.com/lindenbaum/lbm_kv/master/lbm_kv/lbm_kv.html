<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>lbm_kv (lbm_kv) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>lbm_kv</h1>
<h2 class="modsummary">   
Provides simple, Mnesia-based, distributed key value tables.</h2>
<div class="description">
<p>   
Provides simple, Mnesia-based, distributed key value tables. When started,   
this application distributes Mnesia over all dynamically connected nodes.</p>
  
   <p>All tables created, have key/value semantic (after all its still Mnesia).
   A new key-value-table can be created locally using <a href="#create/1" class="seealso">create/1</a>. Another
   way to distribute RAM copies of a table is to replicate the table explicitly
   using <a href="#replicate_to/2" class="seealso">replicate_to/2</a>.</p>
  
   <p>A word about when to call <a href="#create/1" class="seealso">create/1</a> or <a href="#replicate_to/2" class="seealso">replicate_to/2</a>:
   When using RAM copies, Mnesia is able to <code>merge</code> schema tables of different
   nodes, as long as one of the schema's to merge is clean (no tables created
   yet). This has implications on the timing of table distribution. The above
   mentioned functions should only be called after the respective nodes
   connected. If e.g. <a href="#create/1" class="seealso">create/1</a> is called on two nodes independently
   before these nodes have a <code>net_kernel</code> connection, the two tables can't be   
merged and will stay independent, resulting in the condition that one of the   
nodes will not be able to take part in Mnesia distribution!</p>
  
   <p>Every connected node has read and write access to all Mnesia tables. There's   
no need to replicate a table locally. This should only be done for   
redundancy reasons.</p>
  
   To be able to use <code>lbm_kv</code> none of the connected nodes is allowed to have
   <code>disk_copies</code> of its <code>schema</code> table, because Mnesia will fail to merge
   schemas on disk nodes (which means that it is likely they can't
   participate). If you need <code>disk_copies</code> (it can be brought to work) you're
   on your own here.</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-key">key() = term()</h3></div>
    <div class="type"><h3 id="type-table">table() = atom()</h3></div>
    <div class="type"><h3 id="type-value">value() = term()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="create/1">create(Table::table()) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>
  Similar to <a href="#replicate_to/2" class="seealso">replicate_to/2</a> on the local node.</p>
</div></div>
<div class="function">
<h3 id="replicate_to/1">replicate_to(Table::table(), Node::node()) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>  
Replicate a RAM copy of a certain table to the given node. If the table  
does not yet exist, it will be created. This can be called multiple times  
(even) with the same node.</p>
 
  <p>The table will be ready for reads and writes when this function returns.</p>
</div></div>
<div class="function">
<h3 id="put/1">put(Table::table(), Key::key(), Value::value()) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Puts a key value pair into a table returning the previous mappings. In case
  of table type <code>set</code> the previous mapping will be overridden if existed.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="put/1-1">put(Table::table(), KeyValues::[{key(), value()}]) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Puts multiple key value pairs into a table returning the previous mappings.
  In case of table type <code>set</code> all previous mappings will be overridden.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="del/1">del(Table::table(), Key::key(), Value::value()) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Deletes the mapping from <code>Key</code> to <code>Val</code> from a table. If the mapping existed  
it will be returned in a list, if the mapping did not exist, the empty list  
is returned.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="del/1-1">del(Table::table(), Keys::[key()]) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>  
Deletes all values for the given list of keys from a table. Previous values  
for the keys will be returned.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="get/1">get(Table::table(), Key::key()) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Similar to <a href="#get/3" class="seealso">get/3</a> with <code>Type</code> set to transaction.</p>
</div></div>
<div class="function">
<h3 id="get/1-1">get(Table::table(), Key::key(), X3::dirty | transaction) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Retrieves the value for the given key from a table. Specifying <code>dirty</code> will  
issue a faster dirty read operation (no isolation/atomicity).</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="get_all/1">get_all(Table::table()) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>  
Retrieves all values from a table.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="update/1">update(Table::table(), Key::key(), Fun::([value()]) -&gt; [value()]) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>
  Updates mappings associated with <code>Key</code>. This function can be used to modify,
  add or delete a mapping to <code>Key</code>.</p>
 
  <p><code>Fun</code> will be called regardless whether a mapping currently exists or not.
  The argument passed to the function is a list containing the values currently
  associated with <code>Key</code>. In case of sets, this will usually be a list with one  
or no entry.</p>
 
  <p>The returned list of values will be the new associations for <code>Key</code>. In case  
of sets returning more than one value will cause all but the last value to  
be ignored. In case the empty list is returned all associations will be  
deleted.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="update_all/1">update_all(Table::table(), Fun::(key(), value()) -&gt; {ok, value()} | any()) -&gt; [{key(), value()}] | {error, term()}</h3>


<div class="description">

<p>  
Updates all mappings of a table. This function can be used to modify or  
delete random mappings.</p>
 
  <p><code>Fun</code> will be invoked consecutively for all table entries. In case of sets
  <code>Fun</code> will be invoked exactly once per contained key. To modify a mapping
  simply return <code>{ok, NewVal}</code>, all other return values will cause the current  
mapping to be deleted.</p>
 
  <p>It is not necessary to have a local RAM copy to call this function.</p>
</div></div>
<div class="function">
<h3 id="info/0">info() -&gt; ok</h3>


<div class="description">

<p>
  Print information about the <code>lbm_kv</code> state to stdout.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

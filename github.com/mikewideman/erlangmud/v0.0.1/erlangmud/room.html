<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>room (erlangmud) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>room</h1>
<h2 class="modsummary">A dungeon room.</h2>
<div class="description">
<p>A dungeon room.   
Rooms are the smallest unit of geographical space in the dungeon. Rooms   
are connected to each other by doors (links to other rooms). Rooms may   
contain characters and/or items, or nothing at all. Rooms act as the liaison   
for communication between characters and other entities of the game by   
directing messages (e.g. game actions) to the concerned parties, as well as   
the publisher of game event messages which are sent to users.</p>
  
   Each room assumes that the atom 'dungeon' is registered as the pid of the
   dungeon module. @see dungeon</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-error">error() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{error,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{notInRoom, Thing :: <a href="#type-thing" class="seealso">thing()</a>} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{multipleMatches | notInRoom, directObject | indirectObject} |<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;doesNotUnderstand}</h3></div>
    <div class="type"><h3 id="type-payload_value">payload_value() = {damage, Damage :: integer() >= 1}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {heal, Heal :: integer() >= 1}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {inc_attack, Attackinc :: integer() >= 1}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {room_content, ContentString :: [string()]}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {atom(), any()}</h3></div>
    <div class="type"><h3 id="type-thing">thing() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#thing_proc{pid = undefined | pid(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;id = reference(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name = undefined | string()}</h3></div>
    <div class="type"><h3 id="type-verb">verb() = attack<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| enter<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| pick_up<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| inc_attack<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| drink<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| heal<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| died<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| atom()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/1">start(Description::string()) -&gt; #room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}</h3>


<div class="description">

<p>Spawn a new room process, initializing it with a given Description.
  Returns the room pid.</p>
</div></div>
<div class="function">
<h3 id="targetAction/1">targetAction(Room_Proc::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, Action::#action{verb=undefined | verb(), subject=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}, object=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()} | #room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, payload=[payload_value()]}) -&gt; {ok, #action{verb=undefined | verb(), subject=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}, object=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()} | #room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, payload=[payload_value()]}} | {error, term()}</h3>


<div class="description">

<p>Target an action to the action's direct object. If the action is valid,
  an Event will be propagated to everything in the room and an ok message will
  be returned. If not, an error message will be returned.
 </p>
<p><em>See also:</em> <a href="player.html#performAction/2" class="seealso">player:performAction/2</a>, <a href="thing.html#receiveEventNotification/2" class="seealso">thing:receiveEventNotification/2</a>.</p>
</div></div>
<div class="function">
<h3 id="targetInput/1">targetInput(Room::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, Input::#input{verb=undefined | verb(), subject=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}, object=undefined | string(), payload=[payload_value()]}) -&gt; ok | {error, atom() | tuple()}</h3>


<div class="description">

<p>Transform user input into a command which represents an Action. Sends
  the Action to the player in order for it to perform the Action.</p>
<p><em>See also:</em> <a href="player.html#performAction/2" class="seealso">player:performAction/2</a>.</p>
</div></div>
<div class="function">
<h3 id="look/1">look(Room_Proc::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}) -&gt; [#thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}]</h3>


<div class="description">

<p>Get a list of all the things in the room.</p>
</div></div>
<div class="function">
<h3 id="broadcast/1">broadcast(Room_Proc::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, Event::#event{verb=undefined | verb(), subject=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}, object=undefined | #thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()} | #room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, payload=[payload_value()]}, Excluded::#thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}) -&gt; any()</h3>


<div class="description">

<p>Broadcast the occurrence of an event to everything in the room.</p>
<p><em>See also:</em> <a href="thing.html#receiveEventNotification/2" class="seealso">thing:receiveEventNotification/2</a>.</p>
</div></div>
<div class="function">
<h3 id="addThing/1">addThing(Room_Proc::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, Thing::#thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}) -&gt; ok</h3>


<div class="description">

<p>Add a thing to the room. Propagate the occurrence of this event to
  everything in the room.</p>
<p><em>See also:</em> <a href="thing.html#receiveEventNotification/2" class="seealso">thing:receiveEventNotification/2</a>.</p>
</div></div>
<div class="function">
<h3 id="leaveGame/1">leaveGame(Room_Proc::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, Player::#thing_proc{pid=undefined | pid(), id=reference(), name=undefined | string()}) -&gt; {error, atom()} | ok</h3>


<div class="description">

<p>Notify the room that a player has left the game.</p>
<p><em>See also:</em> <a href="thing.html#receiveEventNotification/2" class="seealso">thing:receiveEventNotification/2</a>.</p>
</div></div>
<div class="function">
<h3 id="makeDoor/2">makeDoor(Direction::north | east | south | west, ThisRoom::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, OtherRoom::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}) -&gt; error()</h3>


<div class="description">

<p>Connect a Room to another Room (unidirectionally).</p>
</div></div>
<div class="function">
<h3 id="removeDoor/2">removeDoor(Direction::north | east | south | west, ThisRoom::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}, OtherRoom::#room_proc{pid=undefined | pid(), id=reference(), description=undefined | string()}) -&gt; {reference(), {ok} | {error, noDoorToRemove} | {error, incorrectDoorToRemove}}</h3>


<div class="description">

<p>Remove a Room's connection to another Room (unidirectionally).</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

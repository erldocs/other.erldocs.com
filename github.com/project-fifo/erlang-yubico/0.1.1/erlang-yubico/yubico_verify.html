<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>yubico_verify (erlang-yubico) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>yubico_verify</h1>
<h2 class="modsummary">     This module contains the complete 'verify' web service             
client.</h2>
<div class="description">
<p>     This module contains the complete 'verify' web service             
client. The recommended API is NOT in this module (see             
yubico.erl).</p>
  
             <p>The 'http' function will perform a web service request             
using plain text http. The response will be verified             
using HMAC SHA1 and your shared secret (APIkey).</p>
  
             <p>We support querying n servers in parallell. After all             
arguments are checked and the request is created (and             
signed), we will spawn a 'master' process. The master             
process will spawn a 'worker' process for each entry             
in the list of Servers. The masters job is to wait for             
responses from the workers. It will forward any received             
successful response (status=OK) immediately, but store             
all other responses and use them only if necessary.</p>
  
             <p>The master process also provides error isolation for the             
caller. It is spawned using spawn_monitor, and in turn             
spawns all workers with spawn_link. If something goes             
wrong in the master or workers, the caller (your             
program) won't crash but will get a             
{error, yubico_master_process_failed} response.</p>
  
             <p>XXX perhaps the master should set the process flag to             
trap exits? If the master is killed by a defect in a             
worker (i.e. a bug in the HTTP client code), all workers             
will be killed, even if one of the others would have             
resulted in a status=OK response.</p>
  
             Future extensions should be easy. Options is passed
             through to this module, and passed on to the
             HttpClientMod, which is also made configurable by the
             caller to make it easy to add functionality later, or
             for someone else.
  </div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="http/1">http(OTP::nonempty_string(), Id::nonempty_string(), APIkey::apikey() (see module yubico), Servers::[nonempty_string()], WSURL::nonempty_string(), Timeout::non_neg_integer(), Options::yubico_client_options() (see module yubico), LogFun::logfun() (see module yubico_log)) -&gt; {auth, ok} | {bad_auth, bad_auth_code() (see module yubico_response)} | {error, Reason::any()}</h3>


<div class="description">

<p>    Perform a 'verify' Yubico web service request.</p>
 
             <p>OTP: the string outputed by your YubiKey (without             
the ending "\n").</p>
 
             <p>Id: a string with your API key Id (e.g. "87").</p>
 
             <p>APIkey: either your API key as a binary, or in the             
base64-encoded format Yubico supplies it in.</p>
 
             <p>Servers: a list of server names as strings.</p>
 
             <p>WSURL: Where on the Servers the 'verify' WS is located.</p>
 
             <p>Timeout: Timeout in seconds.</p>
 
             <p>Options: List of {Key, Value} options. See module                      
'yubico' documentation for details.</p>
 
           <p>Returns :</p>
 
             <p>ok</p>
</div></div></div>

<authors>

<aname>Fredrik Thulin</aname>
<email>fredrik@thulin.net</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

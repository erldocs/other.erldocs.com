<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>erlcloud_ddb_util (erlcloud) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>erlcloud_ddb_util</h1>
<h2 class="modsummary">  
Helpers for using DynamoDB from Erlang.</h2>
<div class="description">
<p>  
Helpers for using DynamoDB from Erlang.</p>
 
  <p>This is a higher layer API that augments the operations supported
  by erlcloud_ddb2. The functions in this file do not map directly to
  DynamoDB operations. Instead they will perform multiple operations
  in order to implement functionality that isn't available directly
  using the DynamoDB API.
 </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-attr_name">attr_name() = <a href="erlcloud_ddb2.html#type-attr_name" class="seealso">erlcloud_ddb2:attr_name()</a></h3></div>
    <div class="type"><h3 id="type-aws_config">aws_config() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#aws_config{ec2_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3_scheme = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;s3_port = integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sdb_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;elb_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sqs_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mturk_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mon_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mon_port = integer() >= 0 | undefined,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mon_protocol = string() | undefined,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddb_scheme = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddb_host = string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddb_port = integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ddb_retry = <a href="erlcloud_ddb_impl.html#type-retry_fun" class="seealso">erlcloud_ddb_impl:retry_fun()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;access_key_id = string() | undefined | false,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;secret_access_key = string() | undefined | false,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;security_token = string() | undefined,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;timeout = timeout()}</h3></div>
    <div class="type"><h3 id="type-conditions">conditions() = <a href="erlcloud_ddb2.html#type-conditions" class="seealso">erlcloud_ddb2:conditions()</a></h3></div>
    <div class="type"><h3 id="type-ddb_opts">ddb_opts() = <a href="erlcloud_ddb2.html#type-ddb_opts" class="seealso">erlcloud_ddb2:ddb_opts()</a></h3></div>
    <div class="type"><h3 id="type-get_item_opts">get_item_opts() = <a href="erlcloud_ddb2.html#type-get_item_opts" class="seealso">erlcloud_ddb2:get_item_opts()</a></h3></div>
    <div class="type"><h3 id="type-hash_key">hash_key() = <a href="erlcloud_ddb2.html#type-in_attr" class="seealso">erlcloud_ddb2:in_attr()</a></h3></div>
    <div class="type"><h3 id="type-items_return">items_return() = {ok, [<a href="#type-out_item" class="seealso">out_item()</a>]} | {error, term()}</h3></div>
    <div class="type"><h3 id="type-key">key() = <a href="erlcloud_ddb2.html#type-key" class="seealso">erlcloud_ddb2:key()</a></h3></div>
    <div class="type"><h3 id="type-out_item">out_item() = <a href="erlcloud_ddb2.html#type-out_item" class="seealso">erlcloud_ddb2:out_item()</a></h3></div>
    <div class="type"><h3 id="type-q_opts">q_opts() = <a href="erlcloud_ddb2.html#type-q_opts" class="seealso">erlcloud_ddb2:q_opts()</a></h3></div>
    <div class="type"><h3 id="type-table_name">table_name() = <a href="erlcloud_ddb2.html#type-table_name" class="seealso">erlcloud_ddb2:table_name()</a></h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="delete_hash_key/1">delete_hash_key(Table::table_name(), HashKey::hash_key(), RangeKeyName::attr_name()) -&gt; ok | {error, term()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete_hash_key/1-1">delete_hash_key(Table::table_name(), HashKey::hash_key(), RangeKeyName::attr_name(), Opts::ddb_opts()) -&gt; ok | {error, term()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete_hash_key/1-2">delete_hash_key(Table::table_name(), HashKey::hash_key(), RangeKeyName::attr_name(), Opts::ddb_opts(), Config::aws_config()) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Delete all items with the specified table. Table must be a  
hash-and-range primary key table. Opts is currently ignored and is  
provided for future enhancements. This method is not transacted.</p>
 
  <p><em><marker id="Example">Example</marker></em></p>
 
  <p><code>ok = erlcloud_ddb_util:delete_hash_key(&lt;&lt;"tn"&gt;&gt;, {&lt;&lt;"hash-key-name"&gt;&gt;, &lt;&lt;"hash-key-value"&gt;&gt;}, &lt;&lt;"range-key-name"&gt;&gt;, [])),</code>
 </p>
</div></div>
<div class="function">
<h3 id="get_all/1">get_all(Table::table_name(), Keys::[key()]) -&gt; items_return()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_all/1-1">get_all(Table::table_name(), Keys::[key()], Opts::get_item_opts()) -&gt; items_return()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_all/1-2">get_all(Table::table_name(), Keys::[key()], Opts::get_item_opts(), Config::aws_config()) -&gt; items_return()</h3>


<div class="description">

<p>Perform one or more BatchGetItem operations to get all matching  
items. Operations are performed in parallel. Order may not be preserved.  
Getting from only one table is supported.</p>
 
  <p><em><marker id="Example">Example</marker></em></p>
 
  <p><code>{ok, Items} =
      erlcloud_ddb_util:get_all(
        &lt;&lt;"Forum"&gt;&gt;,
        [{&lt;&lt;"Name"&gt;&gt;, {s, &lt;&lt;"Amazon DynamoDB"&gt;&gt;}},
         {&lt;&lt;"Name"&gt;&gt;, {s, &lt;&lt;"Amazon RDS"&gt;&gt;}},
         {&lt;&lt;"Name"&gt;&gt;, {s, &lt;&lt;"Amazon Redshift"&gt;&gt;}}],
        [{attributes_to_get, [&lt;&lt;"Name"&gt;&gt;, &lt;&lt;"Threads"&gt;&gt;, &lt;&lt;"Messages"&gt;&gt;, &lt;&lt;"Views"&gt;&gt;]}]),</code>
 </p>
</div></div>
<div class="function">
<h3 id="q_all/1">q_all(Table::table_name(), Conditions::conditions()) -&gt; items_return()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="q_all/1-1">q_all(Table::table_name(), Conditions::conditions(), Opts::q_opts()) -&gt; items_return()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="q_all/1-2">q_all(Table::table_name(), Conditions::conditions(), Opts::q_opts(), Config::aws_config()) -&gt; items_return()</h3>


<div class="description">

<p>Perform one or more Query operations to get all matching items.</p>
 
  <p><em><marker id="Example">Example</marker></em></p>
 
  <p><code>{ok, Items} =
      erlcloud_ddb_util:q_all(
        &lt;&lt;"Thread"&gt;&gt;,
        [{&lt;&lt;"LastPostDateTime"&gt;&gt;, {{s, &lt;&lt;"20130101"&gt;&gt;}, {s, &lt;&lt;"20130115"&gt;&gt;}}, between},
         {&lt;&lt;"ForumName"&gt;&gt;, {s, &lt;&lt;"Amazon DynamoDB"&gt;&gt;}}],
        [{index_name, &lt;&lt;"LastPostIndex"&gt;&gt;},
         {select, all_attributes},
         {consistent_read, true}]),</code>
 </p>
</div></div></div>

<authors>

<aname>Ransom Richardson</aname>
<email>ransom@ransomr.net</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

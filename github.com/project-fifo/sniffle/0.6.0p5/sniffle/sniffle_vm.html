<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>sniffle_vm (sniffle) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>sniffle_vm</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-backup_opts">backup_opts() = delete | {delete, parent} | xml</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="wipe/1">wipe(UUID::vm_id() (see module fifo)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="sync_repair/1">sync_repair(UUID::vm_id() (see module fifo), Obj::obj() (see module ft_obj)) -&gt; ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="list_/0">list_() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="store/1">store(Vm) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="restore/3">restore(Vm, BID, Hypervisor) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="remove_backup/2">remove_backup(Vm, BID) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="delete_backup/2">delete_backup(VM, BID) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="restore_backup/1">restore_backup(Vm::uuid() (see module fifo), Snap::uuid() (see module fifo)) -&gt; not_found | {error, not_supported} | {error, nopath}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="create_backup/1">create_backup(Vm::uuid() (see module fifo), Type::full | incremental, Comment::binary(), Opts::[backup_opts()]) -&gt; not_found | {error, no_parent} | {error, timeout} | {error, not_supported} | {ok, uuid() (see module fifo)}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="service_enable/2">service_enable(Vm, Service) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="service_disable/2">service_disable(Vm, Service) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="service_clear/2">service_clear(Vm, Service) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="promote_to_image/3">promote_to_image(Vm, SnapID, Config) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_nic/2">add_nic(Vm, Network) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="remove_nic/2">remove_nic(Vm, Mac) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="primary_nic/2">primary_nic(Vm, Mac) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="update/1">update(Vm::uuid() (see module fifo), Package::package_id() (see module fifo), Config::config() (see module fifo)) -&gt; not_found | {error, timeout} | ok</h3>


<div class="description">

<p>Updates a virtual machine form a package uuid and a config
    object.</p>
</div></div>
<div class="function">
<h3 id="register/1">register(VM::uuid() (see module fifo), Hypervisor::binary()) -&gt; {error, timeout} | ok</h3>


<div class="description">

<p>Registers am existing VM, no checks made here.</p>
</div></div>
<div class="function">
<h3 id="unregister/1">unregister(VM::uuid() (see module fifo)) -&gt; {error, timeout} | ok</h3>


<div class="description">

<p>Unregisteres an existing VM, this includs freeling the IP
    addresses it had, removing it from groupings and cleaning
    permissions.</p>
</div></div>
<div class="function">
<h3 id="create/1">create(Package::binary(), Dataset::binary(), Config::config() (see module fifo)) -&gt; {error, timeout} | {ok, uuid() (see module fifo)}</h3>


<div class="description">

<p>Tries to creat a VM from a Package and dataset uuid. This
    function just creates the UUID and returns it after handing the
    data off to the create fsm.</p>
</div></div>
<div class="function">
<h3 id="dry_run/3">dry_run(Package, Dataset, Config) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get/1">get(Vm::uuid() (see module fifo)) -&gt; not_found | {error, timeout} | vm() (see module fifo)</h3>


<div class="description">

<p>Reads a VM object form the DB.</p>
</div></div>
<div class="function">
<h3 id="list/0">list() -&gt; {error, timeout} | [uuid() (see module fifo)]</h3>


<div class="description">

<p>Lists all vm's.</p>
</div></div>
<div class="function">
<h3 id="list/1">list(Requirements::[matcher() (see module fifo)], X2::boolean()) -&gt; {error, timeout} | {ok, [uuid() (see module fifo)]}</h3>


<div class="description">

<p>Lists all vm's and fiters by a given matcher set.</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(Vm::uuid() (see module fifo)) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Tries to delete a VM, either unregistering it if no
    Hypervisor was assigned or triggering the delete on hypervisor
    site.</p>
</div></div>
<div class="function">
<h3 id="start/1">start(Vm::uuid() (see module fifo)) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Triggers the start of a VM on the hypervisor.</p>
</div></div>
<div class="function">
<h3 id="stop/1">stop(Vm::uuid() (see module fifo)) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Triggers the stop of a VM on the hypervisor.</p>
</div></div>
<div class="function">
<h3 id="stop/1-1">stop(Vm::uuid() (see module fifo), Options::[atom() | {atom(), term()}]) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Triggers the start of a VM on the hypervisor allowing options.</p>
</div></div>
<div class="function">
<h3 id="reboot/1">reboot(Vm::uuid() (see module fifo)) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Triggers the reboot of a VM on the hypervisor.</p>
</div></div>
<div class="function">
<h3 id="reboot/1-1">reboot(Vm::uuid() (see module fifo), Options::[atom() | {atom(), term()}]) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Triggers the reboot of a VM on the hypervisor allowing
    options.</p>
</div></div>
<div class="function">
<h3 id="logs/1">logs(Vm::uuid() (see module fifo)) -&gt; not_found | {error, timeout} | [log() (see module fifo)]</h3>


<div class="description">

<p>Reads the logs of a vm.</p>
</div></div>
<div class="function">
<h3 id="set_owner/1">set_owner(Vm::uuid() (see module fifo), Owner::uuid() (see module fifo)) -&gt; not_found | {error, timeout} | [log() (see module fifo)]</h3>


<div class="description">

<p>Sets the owner of a VM.</p>
</div></div>
<div class="function">
<h3 id="log/1">log(Vm::uuid() (see module fifo), Log::term()) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Adds a new log to the VM and timestamps it.</p>
</div></div>
<div class="function">
<h3 id="snapshot/1">snapshot(VM::uuid() (see module fifo), Comment::binary()) -&gt; {error, timeout} | not_found | {ok, UUID::uuid() (see module fifo)}</h3>


<div class="description">

<p>Creates a new ZFS snapshot of the Vm's disks on the
    hypervisor.</p>
</div></div>
<div class="function">
<h3 id="delete_snapshot/1">delete_snapshot(VM::uuid() (see module fifo), UUID::binary()) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Deletes a ZFS snapshot of the Vm's disks on the ahypervisor.</p>
</div></div>
<div class="function">
<h3 id="rollback_snapshot/1">rollback_snapshot(VM::uuid() (see module fifo), UUID::binary()) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">

<p>Rolls back a ZFS snapshot of the Vm's disks on the
    ahypervisor.</p>
</div></div>
<div class="function">
<h3 id="commit_snapshot_rollback/1">commit_snapshot_rollback(VM::uuid() (see module fifo), UUID::binary()) -&gt; {error, timeout} | not_found | ok</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_network_map/3">add_network_map(UUID, IP, Net) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="remove_network_map/2">remove_network_map(UUID, IP) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="remove_grouping/2">remove_grouping(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="add_grouping/2">add_grouping(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_metadata/2">set_metadata(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_info/2">set_info(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_config/2">set_config(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_backup/2">set_backup(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_snapshot/2">set_snapshot(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_service/2">set_service(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="state/2">state(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="alias/2">alias(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="owner/2">owner(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="dataset/2">dataset(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="package/2">package(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="hypervisor/2">hypervisor(UUID, V) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="children/2">children(Backups, Parent) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

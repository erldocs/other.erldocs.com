<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>fast_agi (fast_agi) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>fast_agi</h1>
<h2 class="modsummary">Asterisk fast_agi server.</h2>
<div class="description">
<p>Asterisk fast_agi server.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="answer/1">answer(C) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Answers the channel (if it is not already in an answered state).</p>
</div></div>
<div class="function">
<h3 id="channel_status/1">channel_status(C) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = {ok, integer()} | error</code></li></ul>
<div class="description">

<p>Get the status of the current channel.</p>
</div></div>
<div class="function">
<h3 id="channel_status/2">channel_status(C, Channel) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Channel = String</code></li><li><code>Result = {ok, integer()} | error</code></li></ul>
<div class="description">

<p>Get the status of the specified channel.</p>
</div></div>
<div class="function">
<h3 id="db_del/3">db_del(C, Family, Key) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Family = string</code></li><li><code>Key = string</code></li><li><code>Result = ok | error</code></li></ul>
<div class="description">

<p>Delete the entry from the Asterisk DB given by Family and Key.</p>
</div></div>
<div class="function">
<h3 id="db_del_tree/2">db_del_tree(C, Family) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Family = string</code></li><li><code>Result = ok | error</code></li></ul>
<div class="description">

<p>Deletes the Family from the Asterisk DB.</p>
</div></div>
<div class="function">
<h3 id="db_del_tree/3">db_del_tree(C, Family, Keytree) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Family = string</code></li><li><code>Keytree = string</code></li><li><code>Result = ok | error</code></li></ul>
<div class="description">

<p>Deletes the Family from the Asterisk DB.</p>
</div></div>
<div class="function">
<h3 id="db_get/3">db_get(C, Family, Key) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Family = string</code></li><li><code>Key = string</code></li><li><code>Result = error | {value, Value}</code></li></ul>
<div class="description">

<p>Get the value from the Asterisk DB.</p>
</div></div>
<div class="function">
<h3 id="db_put/4">db_put(C, Family, Key, Value) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Family = string</code></li><li><code>Key = string</code></li><li><code>Value = string</code></li><li><code>Result = ok | error</code></li></ul>
<div class="description">

<p>Adds or updates an entry in the Asterisk database for the
       specified family and key, with the specified value.</p>
</div></div>
<div class="function">
<h3 id="exec/3">exec(C, Appl, Opts) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Appl = string</code></li><li><code>Opts = string</code></li><li><code>Result = not_found | {result, Retval}</code></li><li><code>Retval = string</code></li></ul>
<div class="description">

<p>Execute a dialplan application.</p>
</div></div>
<div class="function">
<h3 id="get_data/4">get_data(C, File, Timeout, MaxDigits) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>File = string</code></li><li><code>Timeout = integer</code></li><li><code>MaxDigits = integer</code></li><li><code>Result = {ok, timeout} | {ok, string()} | {ok, string(), timeout}</code></li></ul>
<div class="description">

<p>Play the audio file File and accept up to MaxDigits DTMF digits.</p>
</div></div>
<div class="function">
<h3 id="get_full_variable/2">get_full_variable(C, Var) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Var = string</code></li><li><code>Result = {value, Value} | {error, Reason}</code></li><li><code>Value = string</code></li></ul>
<div class="description">

<p>Get the value of Var.</p>
</div></div>
<div class="function">
<h3 id="get_full_variable/3">get_full_variable(C, Var, Channel) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Var = string</code></li><li><code>Chnnel = string</code></li><li><code>Result = {value, Value} | {error, Reason}</code></li><li><code>Value = string</code></li></ul>
<div class="description">

<p>Get the value of Var.</p>
</div></div>
<div class="function">
<h3 id="get_option/3">get_option(C, File, Escape) -&gt; Result</h3>


<div class="description">
<p>Equivalent to <a href="#get_option/4" class="seealso">get_option(C, File, Escape, infinity)</a>.</p>
</div></div>
<div class="function">
<h3 id="get_option/4">get_option(C, File, Escape, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = {ok, timeout} | {ok, Digit::string(), EPos::integer()} | error</code></li></ul>
<div class="description">

<p>Same as stream_file but with a timeout in seconds.</p>
</div></div>
<div class="function">
<h3 id="get_variable/2">get_variable(C, Var) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Var = string</code></li><li><code>Result = {value, Value} | error</code></li></ul>
<div class="description">

<p>Get the value of Var.</p>
</div></div>
<div class="function">
<h3 id="hangup/1">hangup(C) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Hangup the current channel.</p>
</div></div>
<div class="function">
<h3 id="hangup/2">hangup(C, Channel) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Channel = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Hangup the specified channel.</p>
</div></div>
<div class="function">
<h3 id="noop/1">noop(C) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Does nothing</p>
</div></div>
<div class="function">
<h3 id="noop/2">noop(C, Text) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Text = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Does nothing, but prints Text on the Asterisk console.</p>
</div></div>
<div class="function">
<h3 id="receive_char/1">receive_char(C) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Result = {ok, Val} | {error, Reason}</code></li></ul>
<div class="description">
<p>Equivalent to <a href="#receive_char/2" class="seealso">receive_char(C, infinity)</a>.</p>
</div></div>
<div class="function">
<h3 id="receive_char/2">receive_char(C, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Result = {ok, Val} | {error, Reason}</code></li></ul>
<div class="description">

<p>Receive a character on the current channel. Timeout in milliseconds.</p>
</div></div>
<div class="function">
<h3 id="record_file/4">record_file(C, File, Format, Escape) -&gt; Result</h3>


<div class="description">
<p>Equivalent to <a href="#record_file/5" class="seealso">record_file(C, File, Format, Escape, infinity)</a>.</p>
</div></div>
<div class="function">
<h3 id="record_file/5">record_file(C, File, Format, Escape, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>File = string</code></li><li><code>Format = string</code></li><li><code>Escape = string</code></li><li><code>Timeout = integer</code></li><li><code>Result = ok | error</code></li></ul>
<div class="description">

<p>Record audio.</p>
</div></div>
<div class="function">
<h3 id="say_alpha/3">say_alpha(C, Number, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Number = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">
 </div></div>
<div class="function">
<h3 id="say_date/3">say_date(C, Date, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Date = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Says the given date. The Date is given as a UNIX time, i.e. number of secunds since 00:00:00 on January 1, 1970, UTC.</p>
</div></div>
<div class="function">
<h3 id="say_datetime/3">say_datetime(C, Datetime, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Datetime = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Says the given datetime. The Datetime is given as a UNIX time, i.e.
       number of secunds since 00:00:00 on January 1, 1970, UTC.</p>
</div></div>
<div class="function">
<h3 id="say_digits/3">say_digits(C, Number, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Number = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Say digits.</p>
</div></div>
<div class="function">
<h3 id="say_number/2">say_number(C, Number) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Number = integer</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Say number.</p>
</div></div>
<div class="function">
<h3 id="say_number/3">say_number(C, Num::Number, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Number = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Say number.</p>
</div></div>
<div class="function">
<h3 id="say_phonetic/3">say_phonetic(C, String, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>String = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Say string with phonetics.</p>
</div></div>
<div class="function">
<h3 id="say_time/3">say_time(C, Time, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Time = integer</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, Key} | {error, Reason}</code></li></ul>
<div class="description">

<p>Say time. The Time is given as a UNIX time, i.e.
       number of secunds since 00:00:00 on January 1, 1970.</p>
</div></div>
<div class="function">
<h3 id="send_image/2">send_image(C, Image) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Image = string</code></li><li><code>Result = what</code></li></ul>
<div class="description">

<p>Send an image on the current channel.</p>
</div></div>
<div class="function">
<h3 id="send_text/2">send_text(C, Text) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Text = string</code></li><li><code>Result = what</code></li></ul>
<div class="description">

<p>Send a text on the current channel.</p>
</div></div>
<div class="function">
<h3 id="set_autohangup/2">set_autohangup(C, Time) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Time = integer</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Set the channel to hangup after Time seconds.</p>
</div></div>
<div class="function">
<h3 id="set_callerid/2">set_callerid(C, Number) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Number = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Set callerid for the current channel.</p>
</div></div>
<div class="function">
<h3 id="set_context/2">set_context(C, Context) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Context = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Set the context for continuation upon exiting the AGI application.</p>
</div></div>
<div class="function">
<h3 id="set_extension/2">set_extension(C, Extension) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Extension = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Changes the extension for continuation upon exiting the AGI application.</p>
</div></div>
<div class="function">
<h3 id="set_music_on/2">set_music_on(C, State) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>State = on | off</code></li><li><code>Result = what</code></li></ul>
<div class="description">

<p>Enable/disable the Music on Hold generator.</p>
</div></div>
<div class="function">
<h3 id="set_music_on/3">set_music_on(C, State, Class) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>State = on | off</code></li><li><code>Class = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Enable/disable the Music on Hold generator.</p>
</div></div>
<div class="function">
<h3 id="set_priority/2">set_priority(C, Priority) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Priority = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Changes the priority for continuation upon exiting the AGI application.</p>
</div></div>
<div class="function">
<h3 id="set_variable/3">set_variable(C, Variable, Value) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Variable = string</code></li><li><code>Value = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Sets or updates the value of Variable.</p>
</div></div>
<div class="function">
<h3 id="stream_file/2">stream_file(C, File) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>File = string</code></li><li><code>Result = {ok, timeout} | {ok, Key, EndPos} | {error, Reason}</code></li></ul>
<div class="description">

<p>Play audio file indicated by File.</p>
</div></div>
<div class="function">
<h3 id="stream_file/3">stream_file(C, File, Escape) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>File = string</code></li><li><code>Escape = string</code></li><li><code>Result = {ok, timeout} | {ok, Key, EndPos} | {error, Reason}</code></li></ul>
<div class="description">

<p>Play audio file indicated by File.</p>
</div></div>
<div class="function">
<h3 id="tdd_mode/2">tdd_mode(C, Mode) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Mode = on | off</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Enable/disable TDD on this channel.</p>
</div></div>
<div class="function">
<h3 id="verbose/3">verbose(C, Message, Level) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Message = string</code></li><li><code>Level = string</code></li><li><code>Result = ok | {error, Reason}</code></li></ul>
<div class="description">

<p>Sends Message to console via the verbose message system.</p>
</div></div>
<div class="function">
<h3 id="wait_for_digit/1">wait_for_digit(C) -&gt; Result</h3>


<div class="description">
<p>Equivalent to <a href="#wait_for_digit/2" class="seealso">wait_for_digit(C, infinity)</a>.</p>
</div></div>
<div class="function">
<h3 id="wait_for_digit/2">wait_for_digit(C, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>C = Connection</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Result = {ok, Digit} | {error, Reason}</code></li></ul>
<div class="description">

<p>Wait for a DTMF digit on the current channel. The timeout is in milliseconds.</p>
</div></div>
<div class="function">
<h3 id="get_var/1">get_var(Var::string(), Req::request()) -&gt; Result</h3>

<ul class="type">
<li><code>Var = Variable</code></li><li><code>Req = Request</code></li><li><code>Result = {value, {Var, Val}} | undefined</code></li></ul>
<div class="description">

<p>Get the value of a variable passed from Asterisk.
  Returns undefined if the variable is not set.</p>
</div></div>
<div class="function">
<h3 id="trace/1">trace(X1::State) -&gt; ok</h3>

<ul class="type">
<li><code>State = true | false</code></li></ul>
<div class="description">

<p>Trace communication with Asterisk server.</p>
</div></div></div>

<authors>

<aname>Anders Nygren</aname>
<email>anders.nygren@gmail.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>luwak_mr_words (luwak_mr) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>luwak_mr_words</h1>
<h2 class="modsummary">Word-splitting, as an example of using luwak_mr:file/3.</h2>
<div class="description">
<p>Word-splitting, as an example of using <a href="luwak_mr.html#file/3" class="seealso">luwak_mr:file/3</a>.</p>
 
       <p>This module is an example of how one might use the
       <code>luwak_mr:file</code> dynamic map/reduce input generator to run a
       computation over a Luwak file.  The example demonstrated is
       that of splitting a file into its constituent words.
       Inspiration for the method was derived from Guy Steele's talk
 <url href="http://www.infoq.com/presentations/Thinking-Parallel-Programming">
       "How to Think about Parallel Programming--Not!"</url></p>
 
       <p>The basic idea is to use Luwak's division of blocks as the       
division of parallelizable labor.  (The green lines on slide       
55/21 of Guy's presentation.)</p>
 
       <p>Once you have put this module and <code>luwak_mr</code> in Riak's code
       path, you can use it by first filling a Luwak file with
       Latin-1 text.  Then run:
 </p><pre class="sh_erlang">       luwak_mr_words:in_file(&lt;&lt;"my_file_name"&gt;&gt;).</pre><p>       
The function should return a list of binaries, each binary       
being one word from the file.  The words will remain in the       
order they were in the file.  "Words" are defined as       
consecutive non-space (code 32) characters.</p>
 
       <p>Do not run this on a very large file in production.  It is
       demo code, and therefore does some inefficient things with
       binaries.  The <code>in_file/1</code> and <code>reduce/2</code> functions also expect
       to, at some point, hold the entire result set in memory.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-block_result">block_result() = {integer(), integer(), chunk() | segment()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="in_file/1">in_file(Filename::binary()) -&gt; [binary()]</h3>


<div class="description">

<p>Split a Luwak file into "words" (strings of characters between
       spaces).</p>
</div></div>
<div class="function">
<h3 id="map/1">map(Block::luwak_block(), Offset::integer(), X3::term()) -&gt; [block_result()]</h3>


<div class="description">

<p>Splits a luwak_block into a chunk or segment.  Used in the map
       phase of in_file/1.
       The return value is a 3-tuple, with elements:
         1: the byte-offset of the start of the block
         2: the byte-offset of the next byte after the block
         3: the chunk or segment that the block parsed to</p>
</div></div>
<div class="function">
<h3 id="reduce/1">reduce(Maps::[block_result()], X2::term()) -&gt; [block_result()]</h3>


<div class="description">

<p>Combines chunks and segments into larger chunks and segments.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

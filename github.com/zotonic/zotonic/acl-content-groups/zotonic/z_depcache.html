<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>z_depcache (zotonic) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>z_depcache</h1>
<h2 class="modsummary">z_depcache interface file for handing depcache functions from
  the Zotonic context.</h2>
<div class="description">
<p>z_depcache interface file for handing depcache functions from
  the Zotonic context.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/1">start_link(SiteProps) -&gt; term()
</h3>


<div class="description">

<p>Start depcache instance based on site configuration</p>
</div></div>
<div class="function">
<h3 id="memo/2">memo(Function, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="memo/3">memo(Function, MaxAge, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="memo/4">memo(F, Key, MaxAge, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="memo/5">memo(F, Key, MaxAge, Dep, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set/3">set(Key, Data, Context) -&gt; void()</h3>


<div class="description">

<p>Add the key to the depcache, hold it for 3600 seconds and no dependencies</p>
</div></div>
<div class="function">
<h3 id="set/4">set(Key, Data, MaxAge, Context) -&gt; void()</h3>


<div class="description">

<p>Add the key to the depcache, hold it for MaxAge seconds and no dependencies</p>
</div></div>
<div class="function">
<h3 id="set/5">set(Key, Data, MaxAge, Depend, Context) -&gt; void()</h3>


<div class="description">

<p>Add the key to the depcache, hold it for MaxAge seconds and check the dependencies</p>
</div></div>
<div class="function">
<h3 id="get_wait/2">get_wait(Key, Context) -&gt; {ok, Data} | undefined</h3>


<div class="description">

<p>Fetch the key from the cache, when the key does not exist then lock the entry and let
  the calling process insert the value. All other processes requesting the key will wait till
  the key is updated and receive the key's new value.</p>
</div></div>
<div class="function">
<h3 id="get/2">get(Key, Context) -&gt; {ok, Data} | undefined</h3>


<div class="description">

<p>Fetch the key from the cache, return the data or an undefined if not found (or not valid)</p>
</div></div>
<div class="function">
<h3 id="get_subkey/3">get_subkey(Key, SubKey, Context) -&gt; {ok, Data} | undefined</h3>


<div class="description">

<p>Fetch the key from the cache, return the data or an undefined if not found (or not valid)</p>
</div></div>
<div class="function">
<h3 id="get/3">get(Key, SubKey, Context) -&gt; {ok, Data} | undefined</h3>


<div class="description">

<p>Fetch the key from the cache, return the data or an undefined if not found (or not valid)</p>
</div></div>
<div class="function">
<h3 id="flush/2">flush(Key, Context::#context{}) -&gt; void()</h3>


<div class="description">

<p>Flush the key and all keys depending on the key</p>
</div></div>
<div class="function">
<h3 id="flush/1">flush(Context::#context{}) -&gt; void()</h3>


<div class="description">

<p>Flush all keys from the caches</p>
</div></div>
<div class="function">
<h3 id="size/1">size(Context::#context{}) -&gt; int()</h3>


<div class="description">

<p>Return the total memory size of all stored terms</p>
</div></div>
<div class="function">
<h3 id="in_process/0">in_process() -&gt; term()
</h3>


<div class="description">

<p>Check if we use a local process dict cache</p>
</div></div>
<div class="function">
<h3 id="in_process/1">in_process(Flag) -&gt; term()
</h3>


<div class="description">

<p>Enable or disable the in-process caching using the process dictionary</p>
</div></div>
<div class="function">
<h3 id="flush_process_dict/0">flush_process_dict() -&gt; term()
</h3>


<div class="description">

<p>Flush all items memoized in the process dictionary.</p>
</div></div></div>

<authors>

<aname>Marc Worrell</aname>
<email>marc@worrell.nl</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

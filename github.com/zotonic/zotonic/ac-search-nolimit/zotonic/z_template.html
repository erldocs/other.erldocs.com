<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>z_template (zotonic) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>z_template</h1>
<h2 class="modsummary">Template handling, compiles and renders django compatible templates using an extended version of erlydtl.</h2>
<div class="description">
<p>Template handling, compiles and renders django compatible templates using an extended version of erlydtl</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-wm_dict">wm_dict() = dict()</h3></div>
    <div class="type"><h3 id="type-wm_gb_tree">wm_gb_tree() = gb_tree()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/1">start_link(SiteProps) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="reset/1">reset(Host) -&gt; term()
</h3>


<div class="description">

<p>Force a reset of all templates, used after a module has been activated or deactivated.</p>
</div></div>
<div class="function">
<h3 id="module_reindexed/2">module_reindexed(X1, Context) -&gt; term()
</h3>


<div class="description">

<p>Observer, triggered when there are new module files indexed</p>
</div></div>
<div class="function">
<h3 id="render/2">render(Render, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="render/3">render(Module_index::File, Variables, Context) -&gt; list()</h3>


<div class="description">

<p>Render a template.  First requests the template module from the template server, then renders the template.
  The resulting list contains the rendered template and scomp contexts.  Use render_to_iolist/3 to get a iolist().</p>
</div></div>
<div class="function">
<h3 id="render_to_iolist/3">render_to_iolist(File, Vars, Context) -&gt; {iolist(), Context}</h3>


<div class="description">

<p>Render a template to an iolist().  This removes all scomp state etc from the rendered html and appends the
  information in the scomp states to the context for later rendering.</p>
</div></div>
<div class="function">
<h3 id="compile/2">compile(File, Context) -&gt; {ok, atom()} | {error, Reason}</h3>


<div class="description">

<p>Compile a template, return the module name.</p>
</div></div>
<div class="function">
<h3 id="find_template/2">find_template(Module_index::File, Context) -&gt; {ok, filename()} | {ok, #module_index{}} | {error, code}</h3>


<div class="description">

<p>Finds the template designated by the file, check modules.
  When the file is tagged with 'abs' path, then do nothing and assume the file exists.</p>
</div></div>
<div class="function">
<h3 id="find_template/3">find_template(File, X2::All, Context) -&gt; [#module_index{}]</h3>


<div class="description">

<p>Finds the first or all templates designated by the file, check modules.</p>
</div></div>
<div class="function">
<h3 id="find_template_cat/3">find_template_cat(File, Id, Context) -&gt; {ok, filename()} | {error, code}</h3>


<div class="description">

<p>Finds the template designated by the file, for the category of the rsc with id, check modules.
  When the file is an absolute path, then do nothing and assume the file exists.</p>
</div></div>
<div class="function">
<h3 id="is_template_module/1">is_template_module(Module::atom()) -&gt; bool()</h3>


<div class="description">

<p>Check if the module is a template module.</p>
</div></div>
<div class="function">
<h3 id="init/1">init(SiteProps::Args) -&gt; {ok, State} | {ok, State, Timeout} | ignore | {stop, Reason}</h3>


<div class="description">

<p>Initialize the template server, handles template compiles and rendering.</p>
</div></div>
<div class="function">
<h3 id="handle_call/4">handle_call(X1::{check_modified, Module}, From, State) -&gt; ok | modified</h3>


<div class="description">

<p>Compile the template if it has been modified, return the template module for rendering.</p>
</div></div>
<div class="function">
<h3 id="handle_cast/2">handle_cast(Msg, State) -&gt; term()
</h3>


<div class="description">

<p>Reset all compiled templates, done by the module_indexer after the module list changed.</p>
</div></div>
<div class="function">
<h3 id="handle_info/2">handle_info(Msg, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="terminate/2">terminate(Reason, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="code_change/3">code_change(OldVersion, State, Extra) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="filename_to_modulename/1">filename_to_modulename(File::filename() (see module file), Context::#context{host=any(), wm_reqdata=#wm_reqdata{socket=any(), metadata=wm_dict(), range=any(), peer=ip_address() (see module inet), bodyfetch=any(), log_data=any(), method=undefined | method() (see module wrq), scheme=undefined | scheme() (see module wrq), version=undefined | version() (see module wrq), disp_path=any(), path=undefined | string(), raw_path=undefined | string(), path_info=undefined | wm_dict(), path_tokens=undefined | [string()], app_root=undefined | string(), response_code=undefined | pos_integer(), max_recv_body=undefined | pos_integer(), req_cookie=undefined | string(), req_qs=undefined | string(), req_headers=undefined | wm_gb_tree(), req_body=any(), resp_redirect=undefined | boolean(), resp_headers=any(), resp_content_encoding=undefined | string(), resp_transfer_encoding=undefined | {string(), function()}, resp_content_type=undefined | string(), resp_chosen_charset=undefined | string(), resp_body=undefined | any(), is_range_ok=boolean(), host_tokens=undefined | [string()], port=undefined | port_number() (see module inet), cache=list()} | undefined, controller_module=atom(), session_pid=pid() | undefined, page_pid=pid() | undefined, page_id=string() | undefined, ua_class=device_type() (see module ua_classifier) | undefined, depcache=any(), notifier=any(), session_manager=any(), dispatcher=any(), template_server=any(), scomp_server=any(), dropbox_server=any(), pivot_server=any(), module_indexer=any(), translation_table=any(), dbc=pid() | undefined, language=atom(), acl=any(), user_id=integer() | undefined, updates=any(), actions=any(), content_scripts=any(), scripts=any(), wire=any(), validators=any(), render=any(), props=any()}) -&gt; string()</h3>


<div class="description">

<p>Translate a filename to a module name</p>
</div></div>
<div class="function">
<h3 id="filename_to_modulename/1-1">filename_to_modulename(File::filename() (see module file), UAClass::device_type() (see module ua_classifier), Host::atom()) -&gt; string()</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Marc Worrell</aname>
<email>marc@worrell.nl</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

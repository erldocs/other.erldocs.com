<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>z_media_preview (zotonic) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>z_media_preview</h1>
<h2 class="modsummary">Make still previews of media, using image manipulation functions.</h2>
<div class="description">
<p>Make still previews of media, using image manipulation functions.  Resize, crop, gray, etc.
  This uses the command line imagemagick tools for all image manipulation.
  This code is adapted from PHP GD2 code, so the resize/crop could've been done more efficiently, but it works :-)</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="convert/4">convert(InFile, OutFile, Filters, Context) -&gt; ok | {error, Reason}</h3>


<div class="description">

<p>Convert the Infile to an outfile with a still image using the filters.</p>
</div></div>
<div class="function">
<h3 id="convert/5">convert(InFile, MediumFilename, OutFile, Filters, Context) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="size/3">size(Props::MediaRef, Filters, Context) -&gt; {size, Width, Height, ResizedMime} | {error, Reason}</h3>

<ul class="type">
<li><code>MediaRef = Filename | MediaProps</code></li></ul>
<div class="description">

<p>Calculate the size of the resulting image.</p>
</div></div>
<div class="function">
<h3 id="can_generate_preview/1">can_generate_preview(B::Mime) -&gt; true | false</h3>


<div class="description">

<p>Check if we can generate a preview image of the given mime type</p>
</div></div>
<div class="function">
<h3 id="cmd_args/3">cmd_args(FileProps, Filters, OutMime) -&gt; term()
</h3>


<div class="description">

<p>Map filters to commandline options</p>
</div></div>
<div class="function">
<h3 id="out_mime/3">out_mime(Mime, Options, Context) -&gt; term()
</h3>


<div class="description">

<p>Determine the output mime type, after expanding optional mediaclass arguments.</p>
</div></div>
<div class="function">
<h3 id="out_mime/2">out_mime(Mime, Options) -&gt; {Mime, Extension}</h3>


<div class="description">

<p>Return the preferred mime type of the image generated by resizing an image of a certain type and size.</p>
</div></div>
<div class="function">
<h3 id="calc_size/7">calc_size(Width, Height, ImageWidth, ImageHeight, CropPar, Orientation, IsUpscale) -&gt; term()
</h3>


<div class="description">

<p>Calculate the size of the resulting image, depends on the crop and the original image size</p>
</div></div>
<div class="function">
<h3 id="string2filter/2">string2filter(X1::Filter, Where::Arg) -&gt; FilterTuple</h3>


<div class="description">

<p>Map the list of known filters and known args to atoms.  Used when mapping preview urls back to filter args.</p>
</div></div></div>

<authors>

<aname>Marc Worrell</aname>
<email>marc@worrell.nl</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

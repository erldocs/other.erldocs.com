<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>inotify (inotify) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>inotify</h1>
<h2 class="modsummary">
   Application that monitors files via Linux inotify.</h2>
<div class="description">
<p>
   Application that monitors files via Linux <code>inotify</code>. A user can tell
   <code>inotify</code> to <a href="#watch/2" class="seealso">watch/2</a> for specific events on several
   files/directories.  To actually get any events the User must call <a href="#add_handler/3" class="seealso">add_handler/3</a>.</p>
  
   <p>To <a href="#unwatch/1" class="seealso">unwatch/1</a> something the User must pass the return value of <a href="#watch/2" class="seealso">watch/2</a> which is a unique reference to the monitor create by <a href="#watch/2" class="seealso">watch/2</a>.</p>
  
   <p>This module also defines a behaviour, with a single function
   <code>inotify_event(Arg, EventRef, Msg)</code></p>
  
   <p>A callback for file monitoring event handler added by <a href="#add_handler/3" class="seealso">add_handler/3</a>.</p>
  
   <p><code>Arg</code> is the user provided extra argument.</p>
  
   <p><code>EventRef</code> is the value returned by <a href="#watch/2" class="seealso">watch/2</a>.</p>
  
   <p>The <code>Msg</code> parameter of the callback function should be pattern-matched
   with the macro <code>?inotify_msg(Mask, Cookie, OptionalName)</code> contained
   in <code>include/inotify.hrl</code>.</p>
  
   <p><code>Mask</code> is a list of atoms describing the nature of the event. Refer to the   
Linux inotify man page for a detailed description.</p>
  
   <p><code>Cookie</code> is 0 except when a file is moved, where it is used to identify
   <code>move_from</code> and <code>move_to</code> events belonging to the same move-operation.</p>
  
   <code>OptionalName</code> contains the relative file name when monitoring whole
   directories. E.g. when monitoring "/tmp" the following event might be
   created when opening "/tmp/xxx": <code>?inotify_msg([open], 0, "xxx")</code>.</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-mask">mask() = all<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| access<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| attrib<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| close_write<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| close_nowrite<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| close<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| create<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| delete<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| delete_self<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| modify<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| move_self<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| moved_from<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| moved_to<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| move<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| open<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| dont_follow<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| mask_add<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| onlydir</h3></div>
    <div class="type"><h3 id="type-msg">msg() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{inotify_msg,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Mask :: [<a href="#type-mask" class="seealso">mask()</a>],<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Cookie :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OptionalName :: string()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="watch/1">watch(File::string()) -&gt; reference()</h3>


<div class="description">

<p>
  Add a file/directory monitor for all file events. Events for the
  file/directory will be published via a <a href="inotify_evt.html" class="seealso">inotify_evt</a>. The events  
resulting from this call will be identified by the unique reference returned  
by this function, no matter if the operation was successful or not.</p>
 
  <p>This reference must also be passed to <a href="#unwatch/1" class="seealso">unwatch/1</a>.</p>
<p><em>See also:</em> <a href="inotify.html#add_handler/3" class="seealso">inotify:add_handler/3</a>, <a href="inotify.html#unwatch/1" class="seealso">inotify:unwatch/1</a>.</p>
</div></div>
<div class="function">
<h3 id="watch/1-1">watch(File::string(), Mask::mask() | [mask()]) -&gt; reference()</h3>


<div class="description">

<p>
  Add a file/directory monitor for specific events.  This differs from <a href="#watch/2" class="seealso">watch/2</a> by the additional <code>mask</code> argument.  Calling <a href="#watch/2" class="seealso">watch/2</a> is
  equivalant to calling <a href="#watch/3" class="seealso">watch/3</a> with <code>?ALL</code> as second parameter.
 </p>
<p><em>See also:</em> <a href="inotify.html#watch/1" class="seealso">inotify:watch/1</a>.</p>
</div></div>
<div class="function">
<h3 id="unwatch/1">unwatch(Ref::reference()) -&gt; ok</h3>


<div class="description">

<p>
  Remove a monitor added via <a href="#watch/2" class="seealso">watch/2</a>, <code>Ref</code> identifies the
  monitor.</p>
</div></div>
<div class="function">
<h3 id="add_handler/1">add_handler(Ref::reference(), Module::module(), Arg::term()) -&gt; ok</h3>


<div class="description">

<p>
  Add an event handler that receives all events generated by a file monitor
  identified by a tag that was passed to <a href="inotify.html#watch/2" class="seealso">inotify:watch/2</a>. When an event
  occurs for <code>Ref</code> the handler will call <code>Module:inotify_event(Arg,
  EventTag, Msg)</code> as defined by the <code>callback</code> definition in <a href="#inotify_event/3" class="seealso">inotify_event/3</a>.</p>
</div></div>
<div class="function">
<h3 id="print_events/1">print_events(Ref::reference()) -&gt; ok</h3>


<div class="description">

<p>
  Add an event handler that prints to stdout events. The events to print are
  identified by a reference returned by <a href="#watch/2" class="seealso">watch/2</a>.</p>
</div></div>
<div class="function">
<h3 id="start_link/0">start_link() -&gt; term()
</h3>


<div class="description">

<p>
  use inotify as a lib without process</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(InitFun) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="inotify_event/3">inotify_event(X1, Ref, X3) -&gt; term()
</h3>


<div class="description">

<p>
  This module actually implements the <a href="inotify_evt.html" class="seealso">inotify_evt</a> behaviour, with a  
function that simply prints the events to stdout.</p>
 
  <p>This function can be used as an example for how to implement a callback.
 </p>
<p><em>See also:</em> <a href="#print_events/1" class="seealso">print_events/1</a>.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>epryl_amp_server (epryl) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>epryl_amp_server</h1>
<h2 class="modsummary">
   AMP client.</h2>
<div class="description">
<p>
   AMP client. See:
    <url href="http://twistedmatrix.com/documents/current/api/twisted.protocols.amp.html">http://twistedmatrix.com/documents/current/api/twisted.protocols.amp.html</url></p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/1">start_link(HandlerSpecs) -&gt; {ok, Pid} | ignore | {error, Error}</h3>

<ul class="type">
<li><code>HandlerSpecs = [HSpec]</code></li><li><code>HSpec = {Command::amp_command(), Handler::function()}</code></li></ul>
<div class="description">

<p>  
Starts the server with a list of command handlers.</p>
 
  <p>Each Handler function should be a 4-arity function that takes the
  Server Pid, an amp_command record, a command Id of unspecified
  type, and a KVPairs list representing the amp box.
 </p>
</div></div>
<div class="function">
<h3 id="start_link/2">start_link(HandlerSpecs, Options) -&gt; {ok, Pid} | ignore | {error, Error}</h3>

<ul class="type">
<li><code>Options = [Options]</code></li><li><code>Options = {max_pending, integer()}</code></li></ul>
<div class="description">

<p>
  Starts the server with a list of command handlers and options.
 </p>
</div></div>
<div class="function">
<h3 id="connect/1">connect(SupNamePrefix::string(), Host::string(), Port::integer()) -&gt; {ok, Pid}</h3>


<div class="description">

<p>
  Connect to an AMP server. The SupNamePrefix is the prefix used to
  name the gen_socket top-level supervisor.
 </p>
</div></div>
<div class="function">
<h3 id="ask/3">ask(Pid, Command::Proto, KVPairs::list()) -&gt; Result</h3>

<ul class="type">
<li><code>Proto = amp_command() | string()</code></li><li><code>Result = {ok, QuestionKey}</code></li><li><code>QuestionKey = {Pid, Id}</code></li></ul>
<div class="description">

<p>  
Send a question to the peer. The return value includes a QuestionKey.  
Once an answer, or a legal error, comes back from the peer, a message  
will be sent to the calling process with the following form:</p>
 
           <p>AmpAnswer | AmpError           
AmpAnswer = {amp_answer, QuestionKey, KVPairs}           
AmpError = {amp_error, QuestionKey, Error, KVPairs}</p>
 
  <p>In the case of an error, the Error term will be the atom which
  maps to the error code given in the errors list in the Command.
 </p>
</div></div>
<div class="function">
<h3 id="call/3">call(Pid, Command::Proto, KVPairs::list()) -&gt; Result</h3>

<ul class="type">
<li><code>Proto = amp_command() | string()</code></li><li><code>Result = {ok, KVPairs} | {error, Error, KVPairs}</code></li></ul>
<div class="description">

<p>  
Send a question to the peer. The call blocks until the peer returns  
an answer or the standard gen_server timeout expires.</p>
 
  <p>In the case of an error, the Error term will be the atom which
  maps to the error code given in the errors list in the Command.
 </p>
</div></div>
<div class="function">
<h3 id="call/3-1">call(Pid, Command::Proto, KVPairs::list(), Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>Proto = amp_command() | string()</code></li><li><code>Timeout = int() | infinity</code></li><li><code>Result = {ok, KVPairs} | {error, Error, KVPairs}</code></li></ul>
<div class="description">

<p>  
Send a question to the peer. The call blocks until the peer returns  
an answer or the given timeout expires.</p>
 
  <p>In the case of an error, the Error term will be the atom which
  maps to the error code given in the errors list in the Command.
 </p>
</div></div>
<div class="function">
<h3 id="respond/2">respond(Pid, Response::atom(), Id::term(), KVPairs::kvpairs()) -&gt; ok</h3>

<ul class="type">
<li><code>Response = answer | error</code></li></ul>
<div class="description">

<p>
  Respond to a question from the peer, with either an answer or an error.
  This call must be used to respond to the peer when the Handler returns
  noreply. The Id must be the Id supplied to the handler originally.
 </p>
</div></div>
<div class="function">
<h3 id="set_socket/2">set_socket(Pid, Socket) -&gt; term()
</h3>


<div class="description">

<p>
  The set_socket callback is used by the gen_socket supervisor.</p>
</div></div>
<div class="function">
<h3 id="init/1">init(X1) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_call/3">handle_call(Request, From, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_cast/2">handle_cast(Msg, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_info/2">handle_info(Info, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="terminate/2">terminate(Reason, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="code_change/3">code_change(OldVsn, State, Extra) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Dave Peticolas</aname>
<email>dave@krondo.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

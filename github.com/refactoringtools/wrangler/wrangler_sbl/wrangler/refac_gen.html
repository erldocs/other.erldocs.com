<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>refac_gen (wrangler) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>refac_gen</h1>
<h2 class="modsummary">Generalise a function by selecting a sub-expression of the right-hand side and  
making this the value of a new argument added to the definition of the function.</h2>
<div class="description">
<p>Generalise a function by selecting a sub-expression of the right-hand side and  
making this the value of a new argument added to the definition of the function. The  
sub-expression becomes the actual parameter at the call sites.</p>
 
  <p> To apply this refactoring, highlight the expression first, then  select
  <em> Generalise Function Definition </em> from the <em>Refactor</em> menu, after
  that the refactorer will prompt to enter the parameter name in the mini-buffer. </p>
 
  <p> Here is an example of generalisation, in which the function <code> add_one </code> defined
  on  the left-hand side is generalised on the expression <code> 1 </code>, and the result is
  shown on the right-hand side.
 
         </p><pre class="sh_erlang">                -module (test).                          -module (test).
                -export([f/1]).                          -export([f/1]).
 
                add_one ([H|T]) -&gt;                       add_one (N, [H|T]) -&gt;
                   [H+1 | add_one(T)];                      [H+N | add_one(N,T)];
                add_one ([]) -&gt; [].                      add_one (N, []) -&gt; [].
 
                f(X) -&gt; add_one(X).                      f(X) -&gt; add_one(1,X)</pre><p>
   </p>
  <p> In the case that the selected expression has a side-effect, the refactorer will wrap this expression
  in an function expression before passing it at the actual parameter to the call-sites. This is illustrated
  in the following example, in which function <code>repeat/1</code> is generalised on the expression
  <code>io:format("Hello\n")</code>.
 
          </p><pre class="sh_erlang">                -module (test).                          -module (test).
                -export([f/0]).                          -export([f/0]).
 
                repeat(0) -&gt; ok;                         repeat(A, 0) -&gt; ok;
                repeat(N) -&gt;                             repeat(A, N) -&gt;
                  io:format("Hello\n"),                    A( ),
                  repeat(N-1).                             repeat(A,N-1).
 
                f() -&gt; repeat(5).                        f( ) -&gt;
                                                            repeat (fun( )-&gt;io:format ("Hello\n") end, 5).</pre><p>
  </p>
 
  <p> This refactoring <em>only </em> affects the module in which the refactoring is initialised. In the case that
  the generalised function is exported by the module, an auxiliary function will be created
  to wrap the generalised function up, so that the module's interface is not changed.
  </p>
  <p> The following <em> side-condtions </em> apply to this refactoring:
  <item><p> Supporse the function to be generalised is <code>foo/n </code>, then <code>foo/n+1</code> should not
  be in scope before the generalisation;</p></item>
  <item><p> The selected expression should not contain locally declared variable(s), unless the selected expression
  has side effect; </p></item>
  <item><p> The user-provided parameter name should not conflict with the existing parameters or
  change the semantics of the function to be generalised; </p></item>
  </p>
  <p>
  NOTE THAT in Erlang some literal expressions can not be replaced by variables. For example, the atom </p><pre class="sh_erlang">  fields</pre><p>
  in the experssion </p><pre class="sh_erlang">  record_info(fields, Record)</pre><p> should not be replaced by a variable or other expressions.
  This kind of checking is NOT supported by Wrangler yet.
 
  </p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="generalise_eclipse/6">generalise_eclipse(FileName, Start, End, ParName, SearchPaths, TabWidth) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="generalise/7">generalise(FileName, Start, End, ParName, SearchPaths, Editor, TabWidth) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="gen_fun_1_eclipse/11">gen_fun_1_eclipse(SideEffect, FileName, ParName, FunName, Arity, DefPos, Exp, SearchPaths, TabWidth, Dups, LogCmd) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="gen_fun_1/12">gen_fun_1(SideEffect, FileName, ParName, FunName, Arity, DefPos, Exp0, SearchPaths, TabWidth, Dups, Editor, LogCmd) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="gen_fun_clause_eclipse/10">gen_fun_clause_eclipse(FileName, ParName, FunName, Arity, DefPos, Exp, TabWidth, SideEffect, Dups, LogCmd) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="gen_fun_clause/11">gen_fun_clause(FileName, ParName, FunName, Arity, DefPos, Exp, TabWidth, SideEffect, Dups, Editor, LogCmd) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

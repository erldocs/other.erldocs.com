<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>couchbeam (couchbeam) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>couchbeam</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-db">db() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;#db{server = undefined | <a href="#type-server" class="seealso">server()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;name = undefined | string(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;options = list()}</h3></div>
    <div class="type"><h3 id="type-server">server() = #server{url = any(), options = list()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/0">start() -&gt; term()
</h3>


<div class="description">

<p>Start the couchbeam process. Useful when testing using the shell.</p>
</div></div>
<div class="function">
<h3 id="stop/0">stop() -&gt; term()
</h3>


<div class="description">

<p>Stop the couchbeam process. Useful when testing using the shell.</p>
</div></div>
<div class="function">
<h3 id="version/0">version() -&gt; Version</h3>

<ul class="type">
<li><code>Version = string()</code></li></ul>
<div class="description">

<p>Return the version of the application.</p>
</div></div>
<div class="function">
<h3 id="server_connection/0">server_connection() -&gt; term()
</h3>


<div class="description">

<p>Create a server for connectiong to a CouchDB node</p>
</div></div>
<div class="function">
<h3 id="server_connection/1">server_connection(URL) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="server_connection/2">server_connection(URL, Options) -&gt; term()
</h3>


<div class="description">

<p>Create a server for connectiong to a CouchDB node</p>
</div></div>
<div class="function">
<h3 id="server_connection/1-1">server_connection(Host::string(), Port::integer(), Prefix::string(), Options::optionList()) -&gt; Server::server()</h3>

<ul class="type">
<li><code>[option()]</code></li><li><code>{is_ssl, boolean()} | {ssl_options, [SSLOpt]} | {pool_name, atom()} | {proxy_host, string()} | {proxy_port, integer()} | {proxy_user, string()} | {proxy_password, string()} | {basic_auth, {username(), password()}} | {cookie, string()} | {oauth, oauthOptions()}</code></li><li><code>string()</code></li><li><code>string()</code></li><li><code>SSLOpt = term()</code></li><li><code>[oauth()]</code></li><li><code>{consumer_key, string()} | {token, string()} | {token_secret, string()} | {consumer_secret, string()} | {signature_method, string()}</code></li></ul>
<div class="description">

<p>Create a server for connectiong to a CouchDB node</p>
 
       <p>Connections are made to:
       </p><pre class="sh_erlang">          http://Host:PortPrefix</pre>
 
       <p>If ssl is set https is used.</p>
 
       <p>For a description of SSL Options, look in the <url href="http://www.erlang.org/doc/apps/ssl/index.html">ssl</url> manpage.
 </p>
</div></div>
<div class="function">
<h3 id="server_info/1">server_info(Server::server()) -&gt; {ok, iolist()}</h3>


<div class="description">

<p>Get Information from the server</p>
</div></div>
<div class="function">
<h3 id="get_uuid/1">get_uuid(Server::server()) -&gt; lists()</h3>


<div class="description">

<p>Get one uuid from the server</p>
</div></div>
<div class="function">
<h3 id="get_uuids/1">get_uuids(Server::server(), Count::integer()) -&gt; lists()</h3>


<div class="description">

<p>Get a list of uuids from the server</p>
</div></div>
<div class="function">
<h3 id="replicate/1">replicate(Server::server(), RepObj::{list()}) -&gt; {ok, Result} | {error, Error}</h3>


<div class="description">

<p>Handle replication. Pass an object containting all informations
  It allows to pass for example an authentication info
  </p><pre class="sh_erlang">  RepObj = {[
  {&lt;&lt;"source"&gt;&gt;, &lt;&lt;"sourcedb"&gt;&gt;},
  {&lt;&lt;"target"&gt;&gt;, &lt;&lt;"targetdb"&gt;&gt;},
  {&lt;&lt;"create_target"&gt;&gt;, true}
  ]}
  replicate(Server, RepObj).</pre><p>
 </p>
</div></div>
<div class="function">
<h3 id="replicate/1-1">replicate(Server::server(), Source::string(), Target::target()) -&gt; {ok, Result} | {error, Error}</h3>


<div class="description">

<p>Handle replication.</p>
</div></div>
<div class="function">
<h3 id="replicate/4">replicate(Server, Source, Target, X4) -&gt; term()
</h3>


<div class="description">

<p>handle Replication. Allows to pass options with source and
  target.  Options is a Json object.
  ex:
  </p><pre class="sh_erlang">  Options = {[{&lt;&lt;"create_target"&gt;&gt;, true}]},
  couchbeam:replicate(S, "testdb", "testdb2", Options).</pre>
</div></div>
<div class="function">
<h3 id="all_dbs/1">all_dbs(Server::server()) -&gt; {ok, iolist()}</h3>


<div class="description">

<p>get list of databases on a CouchDB node</p>
</div></div>
<div class="function">
<h3 id="db_exists/1">db_exists(Server::server(), DbName::string()) -&gt; boolean()</h3>


<div class="description">

<p>test if db with dbname exists on the CouchDB node</p>
</div></div>
<div class="function">
<h3 id="create_db/2">create_db(Server, DbName) -&gt; term()
</h3>


<div class="description">

<p>Create a database and a client for connectiong to it.</p>
</div></div>
<div class="function">
<h3 id="create_db/3">create_db(Server, DbName, Options) -&gt; term()
</h3>


<div class="description">

<p>Create a database and a client for connectiong to it.</p>
</div></div>
<div class="function">
<h3 id="create_db/1">create_db(Server::server(), DbName::string(), Options::optionList(), Params::list()) -&gt; {ok, db() | {error, Error}}</h3>


<div class="description">

<p>Create a database and a client for connectiong to it.</p>
 
       <p>Connections are made to:
       </p><pre class="sh_erlang">          http://Host:PortPrefix/DbName</pre>
 
  <p>If ssl is set https is used. See server_connections for options.
  Params is a list of optionnal query argument you want to pass to the
  db. Useful for bigcouch for example.
 </p>
</div></div>
<div class="function">
<h3 id="open_db/2">open_db(Server, DbName) -&gt; term()
</h3>


<div class="description">

<p>Create a client for connection to a database</p>
</div></div>
<div class="function">
<h3 id="open_db/1">open_db(Server::server(), DbName::string(), Options::optionList()) -&gt; {ok, db()}</h3>


<div class="description">

<p>Create a client for connection to a database</p>
</div></div>
<div class="function">
<h3 id="open_or_create_db/2">open_or_create_db(Server, DbName) -&gt; term()
</h3>


<div class="description">

<p>Create a client for connecting to a database and create the
       database if needed.</p>
</div></div>
<div class="function">
<h3 id="open_or_create_db/3">open_or_create_db(Server, DbName, Options) -&gt; term()
</h3>


<div class="description">

<p>Create a client for connecting to a database and create the
       database if needed.</p>
</div></div>
<div class="function">
<h3 id="open_or_create_db/1">open_or_create_db(Server::server(), DbName::string(), Options::list(), Params::list()) -&gt; {ok, db() | {error, Error}}</h3>


<div class="description">

<p>Create a client for connecting to a database and create the
       database if needed.</p>
</div></div>
<div class="function">
<h3 id="delete_db/1">delete_db(Db) -&gt; term()
</h3>


<div class="description">

<p>delete database</p>
</div></div>
<div class="function">
<h3 id="delete_db/1-1">delete_db(Server::server(), DbName) -&gt; {ok, iolist() | {error, Error}}</h3>


<div class="description">

<p>delete database</p>
</div></div>
<div class="function">
<h3 id="db_info/1">db_info(Db::db()) -&gt; {ok, iolist() | {error, Error}}</h3>


<div class="description">

<p>get database info</p>
</div></div>
<div class="function">
<h3 id="doc_exists/1">doc_exists(Db::db(), DocId::string()) -&gt; boolean()</h3>


<div class="description">

<p>test if doc with uuid exists in the given db</p>
</div></div>
<div class="function">
<h3 id="open_doc/2">open_doc(Db, DocId) -&gt; term()
</h3>


<div class="description">

<p>open a document</p>
</div></div>
<div class="function">
<h3 id="open_doc/1">open_doc(Db::db(), DocId::string(), Params::list()) -&gt; {ok, Doc} | {error, Error}</h3>


<div class="description">

<p>open a document
  Params is a list of query argument. Have a look in CouchDb API</p>
</div></div>
<div class="function">
<h3 id="save_doc/2">save_doc(Db, Doc) -&gt; term()
</h3>


<div class="description">

<p>save a document</p>
</div></div>
<div class="function">
<h3 id="save_doc/1">save_doc(Db::db(), Doc, Options::list()) -&gt; {ok, Doc1} | {error, Error}</h3>


<div class="description">

<p>save a document  
A document is a Json object like this one:</p>
 
       <pre class="sh_erlang">          {[
           {&lt;&lt;"_id"&gt;&gt;, &lt;&lt;"myid"&gt;&gt;},
           {&lt;&lt;"title"&gt;&gt;, &lt;&lt;"test"&gt;&gt;}
       ]}</pre>
 
  <p>Options are arguments passed to the request. This function return a
  new document with last revision and a docid. If _id isn't specified in
  document it will be created. Id is created by extracting an uuid from
  the couchdb node.
 </p>
</div></div>
<div class="function">
<h3 id="delete_doc/2">delete_doc(Db, Doc) -&gt; term()
</h3>


<div class="description">

<p>delete a document</p>
</div></div>
<div class="function">
<h3 id="delete_doc/3">delete_doc(Db, Doc, Options) -&gt; {ok, Result} | {error, Error}</h3>


<div class="description">

<p>delete a document
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</p>
</div></div>
<div class="function">
<h3 id="delete_docs/2">delete_docs(Db, Docs) -&gt; term()
</h3>


<div class="description">

<p>delete a list of documents</p>
</div></div>
<div class="function">
<h3 id="delete_docs/1">delete_docs(Db::db(), Docs::list(), Options::list()) -&gt; {ok, Result} | {error, Error}</h3>


<div class="description">

<p>delete a list of documents
  if you want to make sure the doc it emptied on delete, use the option
  {empty_on_delete,  true} or pass a doc with just _id and _rev
  members.</p>
</div></div>
<div class="function">
<h3 id="save_docs/2">save_docs(Db, Docs) -&gt; term()
</h3>


<div class="description">

<p>save a list of documents</p>
</div></div>
<div class="function">
<h3 id="save_docs/1">save_docs(Db::db(), Docs::list(), Options::list()) -&gt; {ok, Result} | {error, Error}</h3>


<div class="description">

<p>save a list of documents</p>
</div></div>
<div class="function">
<h3 id="lookup_doc_rev/2">lookup_doc_rev(Db, DocId) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="lookup_doc_rev/3">lookup_doc_rev(Db, DocId, Params) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="fetch_attachment/3">fetch_attachment(Db, DocId, Name) -&gt; term()
</h3>


<div class="description">

<p>fetch a document attachment</p>
</div></div>
<div class="function">
<h3 id="fetch_attachment/1">fetch_attachment(Db::db(), DocId::string(), Name::string(), Options0::list()) -&gt; {ok, binary()} | {ok, atom()} | {error, term()}</h3>


<div class="description">

<p>fetch a document attachment
  Options are
  </p><list>
  <item><p><code>stream</code>: to start streaming an attachment. the function return
  <code>{ok, Ref}</code> where is a ref to the attachment</p></item>
  <item><p>Other options that can be sent using the REST API</p></item>
  </list><p>
 </p>
</div></div>
<div class="function">
<h3 id="stream_attachment/1">stream_attachment(Ref::atom()) -&gt; {ok, binary()} | done | {error, term()}</h3>


<div class="description">

<p>fetch an attachment chunk.
  Use this function when you pass the <code>stream</code> option to the
  <code>couchbeam:fetch_attachment/4</code> function.
  This function return the following response:
       </p><taglist>
           <dt>done</dt>
               <item><p>You got all the attachment</p></item>
           <dt>{ok, binary()}</dt>
               <item><p>Part of the attachment</p></item>
           <dt>{error, term()}</dt>
               <item><p>n error occurred</p></item>
       </taglist><p>
 </p>
</div></div>
<div class="function">
<h3 id="put_attachment/4">put_attachment(Db, DocId, Name, Body) -&gt; term()
</h3>


<div class="description">

<p>put an attachment</p>
</div></div>
<div class="function">
<h3 id="put_attachment/1">put_attachment(Db::db(), DocId::string(), Name::string(), Body::body(), Option::optionList()) -&gt; {ok, iolist()}</h3>

<ul class="type">
<li><code>[option()]</code></li><li><code>{rev, string()} | {content_type, string()} | {content_length, string()}</code></li><li><code>[] | string() | binary() | fun_arity_0() | {fun_arity_1(), initial_state(), stream}</code></li><li><code>term()</code></li></ul>
<div class="description">

<p>put an attachment</p>
</div></div>
<div class="function">
<h3 id="send_attachment/2">send_attachment(Ref, Msg) -&gt; term()
</h3>


<div class="description">

<p>send an attachment chunk
  Msg could be Data, eof to stop sending.</p>
</div></div>
<div class="function">
<h3 id="delete_attachment/3">delete_attachment(Db, Doc, Name) -&gt; term()
</h3>


<div class="description">

<p>delete a document attachment</p>
</div></div>
<div class="function">
<h3 id="delete_attachment/4">delete_attachment(Db, DocOrDocId, Name, Options) -&gt; term()
</h3>


<div class="description">

<p>delete a document attachment</p>
</div></div>
<div class="function">
<h3 id="ensure_full_commit/1">ensure_full_commit(Db) -&gt; term()
</h3>


<div class="description">

<p>commit all docs in memory</p>
</div></div>
<div class="function">
<h3 id="ensure_full_commit/1-1">ensure_full_commit(Db::db(), Options::list()) -&gt; {ok, term()} | {error, term()}</h3>


<div class="description">

<p>commit all docs in memory</p>
</div></div>
<div class="function">
<h3 id="compact/1">compact(Db::db()) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Compaction compresses the database file by removing unused
  sections created during updates.
  See <url href="http://wiki.apache.org/couchdb/Compaction">http://wiki.apache.org/couchdb/Compaction</url> for more informations</p>
</div></div>
<div class="function">
<h3 id="compact/1-1">compact(Db::db(), ViewName::string()) -&gt; ok | {error, term()}</h3>


<div class="description">

<p>Like compact/1 but this compacts the view index from the
  current version of the design document.
  See <url href="http://wiki.apache.org/couchdb/Compaction#View_compaction">http://wiki.apache.org/couchdb/Compaction#View_compaction</url> for more informations</p>
</div></div>
<div class="function">
<h3 id="server_url/2">server_url(Server::{Host, Port}) -&gt; iolist()</h3>


<div class="description">

<p>Asemble the server URL for the given client</p>
</div></div>
<div class="function">
<h3 id="uuids_url/1">uuids_url(Server) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="db_url/1">db_url(Db) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="doc_url/2">doc_url(Db, DocId) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

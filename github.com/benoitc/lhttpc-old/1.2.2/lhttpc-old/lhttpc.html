<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>lhttpc (lhttpc-old) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>lhttpc</h1>
<h2 class="modsummary">Main interface to the lightweight http client.</h2>
<div class="description">
<p>Main interface to the lightweight http client.
   See <a href="#request/4" class="seealso">request/4</a>, <a href="#request/5" class="seealso">request/5</a> and <a href="#request/6" class="seealso">request/6</a> functions.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="request/4">request(URL, Method, Hdrs, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>URL = string()</code></li><li><code>Method = string() | atom()</code></li><li><code>Hdrs = [{Header, Value}]</code></li><li><code>Header = string() | binary() | atom()</code></li><li><code>Value = string() | binary()</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Result = {ok, {{StatusCode, ReasonPhrase}, Hdrs, ResponseBody}} | {error, Reason}</code></li><li><code>StatusCode = integer()</code></li><li><code>ReasonPhrase = string()</code></li><li><code>ResponseBody = binary()</code></li><li><code>Reason = connection_closed | connect_timeout | timeout</code></li></ul>
<div class="description">

<p>Sends a request without a body.
  Would be the same as calling <code>request(URL, Method, Hdrs, [], Timeout)</code>,
  that is <a href="#request/5" class="seealso">request/5</a> with an empty body (<code>Body</code> could also be <code>&lt;&lt;&gt;&gt;</code>).</p>
</div></div>
<div class="function">
<h3 id="request/5">request(URL, Method, Hdrs, Body::RequestBody, Timeout) -&gt; Result</h3>

<ul class="type">
<li><code>URL = string()</code></li><li><code>Method = string() | atom()</code></li><li><code>Hdrs = [{Header, Value}]</code></li><li><code>Header = string() | binary() | atom()</code></li><li><code>Value = string() | binary()</code></li><li><code>RequestBody = iolist()</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Result = {ok, {{StatusCode, ReasonPhrase}, Hdrs, ResponseBody}} | {error, Reason}</code></li><li><code>StatusCode = integer()</code></li><li><code>ReasonPhrase = string()</code></li><li><code>ResponseBody = binary()</code></li><li><code>Reason = connection_closed | connect_timeout | timeout</code></li></ul>
<div class="description">

<p>Sends a request with a body.
  Would be the same as calling
  <code>request(URL, Method, Hdrs, Body, Timeout, [])</code>, that is <a href="#request/6" class="seealso">request/6</a> with
  no options.</p>
</div></div>
<div class="function">
<h3 id="request/6">request(URL, Method, Hdrs, Body::RequestBody, Timeout, Options) -&gt; Result</h3>

<ul class="type">
<li><code>URL = string()</code></li><li><code>Method = string() | atom()</code></li><li><code>Hdrs = [{Header, Value}]</code></li><li><code>Header = string() | binary() | atom()</code></li><li><code>Value = string() | binary()</code></li><li><code>RequestBody = iolist()</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Options = [Option]</code></li><li><code>Option = {connect_timeout, Milliseconds | infinity} | {send_retry, integer()}</code></li><li><code>Milliseconds = integer()</code></li><li><code>Result = {ok, {{StatusCode, ReasonPhrase}, Hdrs, ResponseBody}} | {error, Reason}</code></li><li><code>StatusCode = integer()</code></li><li><code>ReasonPhrase = string()</code></li><li><code>ResponseBody = binary()</code></li><li><code>Reason = connection_closed | connect_timeout | timeout</code></li></ul>
<div class="description">

<p>Sends a request with a body.
  Would be the same as calling </p><pre class="sh_erlang">
  {Host, Port, Path, Ssl} = lhttpc_lib:parse_url(URL),
  request(Host, Port, Path, Ssl, Method, Hdrs, Body, Timeout, Options).
  </pre><p>
 
  <code>URL</code> is expected to be a valid URL:
  <code>scheme://host[:port][/path]</code>.</p>
</div></div>
<div class="function">
<h3 id="request/9">request(Host, Port, Ssl, Path, Method, Hdrs, Body::RequestBody, Timeout, Options) -&gt; Result</h3>

<ul class="type">
<li><code>Host = string()</code></li><li><code>Port = integer()</code></li><li><code>Ssl = boolean()</code></li><li><code>Path = string()</code></li><li><code>Method = string() | atom()</code></li><li><code>Hdrs = [{Header, Value}]</code></li><li><code>Header = string() | binary() | atom()</code></li><li><code>Value = string() | binary()</code></li><li><code>RequestBody = iolist()</code></li><li><code>Timeout = integer() | infinity</code></li><li><code>Options = [Option]</code></li><li><code>Option = {connect_timeout, Milliseconds | infinity} | {send_retry, integer()}</code></li><li><code>Milliseconds = integer()</code></li><li><code>Result = {ok, {{StatusCode, ReasonPhrase}, Hdrs, ResponseBody}} | {error, Reason}</code></li><li><code>StatusCode = integer()</code></li><li><code>ReasonPhrase = string()</code></li><li><code>ResponseBody = binary()</code></li><li><code>Reason = connection_closed | connect_timeout | timeout</code></li></ul>
<div class="description">

<p>Sends a request with a body.</p>
 
  <p>Instead of building and parsing URLs the target server is specified with
  a host, port, weither SSL should be used or not and a path on the server.
  For instance, if you want to request http://example.com/foobar you would
  use the following:<br />
  <code>Host</code> = <code>"example.com"</code><br />
  <code>Port</code> = <code>80</code><br />
  <code>Ssl</code> = <code>false</code><br />
  <code>Path</code> = <code>"/foobar"</code><br />
  <code>Path</code> must begin with a forward slash <code>/</code>.</p>
 
  <p><code>Method</code> is either a string, stating the HTTP method exactly as in the
  protocol, i.e: <code>"POST"</code> or <code>"GET"</code>. It could also be an atom, which is
  then made in to uppercase, if it isn't already.
  <code>Hdrs</code> is a list of headers to send. Mandatory headers such as
  <code>Host</code> or <code>Content-Length</code> (for some requests) are added.
  <code>Body</code> is the entity to send in the request. Please don't include entity
  bodies where there shouldn't be any (such as for <code>GET</code>).
  <code>Timeout</code> is the timeout for the request in milliseconds.
  <code>Options</code> is a list of options.</p>
 
  <p>Options:</p>
 
  <p><code>{connect_timeout, Milliseconds}</code> specifies how many milliseconds the  
client can spend trying to establish a connection to the server. This  
doesn't affect the overall request timeout. However, if it's longer than  
the overall timeout it will be ignored. Also note that the TCP layer my  
choose to give up earlier than the connect timeout, in which case the  
client will also give up. The default value is infinity, which means that  
it will either give up when the TCP stack gives up, or when the overall  
request timeout is reached.</p>
 
  <p><code>{send_retry, N}</code> specifies how many times the client should retry
  sending a request if the connection is closed after the data has been
  sent. The default value is 1.</p>
</div></div></div>

<authors>

<aname>Oscar Hellstr√∂m</aname>
<email>oscar@erlang-consulting.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

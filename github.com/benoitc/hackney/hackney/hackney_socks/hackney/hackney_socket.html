<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>hackney_socket (hackney) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>hackney_socket</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-hackney_socket">hackney_socket() = #hackney_socket{}</h3></div>
    <div class="type"><h3 id="type-sendfile_option">sendfile_option() = {chunk_size, integer() >= 0}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {use_threads, boolean()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {send_fun, function()}</h3></div>
    <div class="type"><h3 id="type-sock_messages">sock_messages() = {atom(), atom(), atom()}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="messages/1">messages(Hackney_socket::hackney_socket()) -&gt; sock_messages()</h3>


<div class="description">

<p>Atoms used to identify messages in {active, once | true} mode.</p>
</div></div>
<div class="function">
<h3 id="connect/1">connect(Transport::atom(), Host::list(), Port::non_neg_integer(), Opts::list()) -&gt; {ok, hackney_socket()} | {error, term()}</h3>


<div class="description">

<p>connect to a Port using a specific transport.</p>
</div></div>
<div class="function">
<h3 id="connect/1-1">connect(Transport::atom(), Host::list(), Port::non_neg_integer(), Opts::list(), Timeout::timeout()) -&gt; {ok, hackney_socket()} | {error, term()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="recv/1">recv(HS::hackney_socket(), Length::non_neg_integer()) -&gt; {ok, any()} | {error, closed | atom()}</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="recv/1-1">recv(Hackney_socket::hackney_socket(), Length::non_neg_integer(), Timeout::timeout()) -&gt; {ok, any()} | {error, closed | atom()}</h3>


<div class="description">

<p>Receive a packet from a socket in passive mode.</p>
</div></div>
<div class="function">
<h3 id="send/1">send(Hackney_socket::hackney_socket(), Packet::iolist()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Send a packet on a socket.</p>
</div></div>
<div class="function">
<h3 id="setopts/1">setopts(Hackney_socket::hackney_socket(), Opts::list()) -&gt; ok | {error, atom()}</h3>


<div class="description">

<p>Set one or more options for a socket.</p>
<p><em>See also:</em> <a href="inet.html#setopts/2" class="seealso">inet:setopts/2</a>.</p>
</div></div>
<div class="function">
<h3 id="controlling_process/1">controlling_process(Hackney_socket::hackney_socket(), Pid::pid()) -&gt; ok | {error, closed | not_owner | atom()}</h3>


<div class="description">

<p>Assign a new controlling process <em>Pid</em> to <em>Socket</em>.</p>
</div></div>
<div class="function">
<h3 id="peername/1">peername(Hackney_socket::hackney_socket()) -&gt; {ok, {ip_address() (see module inet), port_number() (see module inet)}} | {error, atom()}</h3>


<div class="description">

<p>Return the address and port for the other end of a connection.</p>
</div></div>
<div class="function">
<h3 id="close/1">close(Hackney_socket::hackney_socket()) -&gt; ok</h3>


<div class="description">

<p>Close a TCP socket.</p>
</div></div>
<div class="function">
<h3 id="shutdown/1">shutdown(Hackney_socket::hackney_socket(), How::read | write | read_write) -&gt; ok</h3>


<div class="description">

<p>Immediately close a socket in one or two directions.</p>
</div></div>
<div class="function">
<h3 id="sockname/1">sockname(Hackney_socket::hackney_socket()) -&gt; {ok, {ip_address() (see module inet), port_number() (see module inet)}} | {error, atom()}</h3>


<div class="description">

<p>Get the local address and port of a socket</p>
</div></div>
<div class="function">
<h3 id="sendfile/1">sendfile(Filename::string(), HS::hackney_socket()) -&gt; {ok, integer()} | {error, posix() (see module inet) | closed | badarg | not_owner}</h3>


<div class="description">

<p>Sends the file Filename to Socket. Returns {ok, BytesSent} if
  successful, otherwise {error, Reason}.</p>
</div></div>
<div class="function">
<h3 id="sendfile/1-1">sendfile(Fd::pid() | fd() (see module file), Hackney_socket::hackney_socket(), Offset::non_neg_integer(), Bytes::non_neg_integer(), Opts::[sendfile_option()]) -&gt; {ok, integer()} | {error, posix() (see module inet) | closed | badarg | not_owner}</h3>


<div class="description">

<p>Sends Bytes from the file referenced by RawFile beginning at Offset to  
Socket. Returns {ok, BytesSent} if successful, otherwise {error, Reason}.  
If Bytes is set to 0 all data after the given Offset is sent.</p>
 
  <p>The file used must be opened using the raw flag, and the process calling  
sendfile must be the controlling process of the socket. See  
hackney_socket:controlling_process/2</p>
 
  <p>If the OS used does not support sendfile, an Erlang fallback using  
file:read and hackney_socket:send is used.</p>
 
  <p>The option list can contain the following options:</p>
 
  <list>
  <item><p>chunk_size: The chunk size used by the erlang fallback to send data. If using the
  fallback, this should be set to a value which comfortably fits in the
  systems memory. Default is 64 MB. </p></item>
  <item><p>use_threads Instruct the emulator to use the async thread pool for the
  sendfile system call. This could be usefull if the OS you are running on
  does not properly support non-blocking sendfile calls. Do note that using
  async threads potentially makes your system volnerable to slow client
  attacks. If set to true and no async threads are available, the sendfile
  call will return {error,einval}. Introduced in Erlang/OTP 17.0. Default is
  false.</p></item>
  <item><p>send_fun: Function used to send the data to the socket <code>SendFun(HS,
  Data) -&gt; ok | {error, term()}</code></p></item>
  </list>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

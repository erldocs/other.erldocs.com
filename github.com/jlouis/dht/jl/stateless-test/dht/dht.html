<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>dht (dht) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>dht</h1>
<h2 class="modsummary">API for the DHT application.</h2>
<div class="description">
<p>API for the DHT application.</p>
 
  <p>This module provides the API of the DHT application. There are two  
major groups of calls: Low level DHT code, and high level API which  
is the one you are going to use, most likely.</p>
 
  <p>The high level API is:</p>
 
  <list>
  <item><p>lookup/1</p></item>
  <item><p>enter/2</p></item>
  <item><p>delete/1</p></item>
  </list>
 
  <p>The Low-level API exposes the low-level four commands you can execute  
against the DHT. It is intended for those who wants to build their own  
subsystems around the DHT. The high-level API uses these to provide the  
low level implementation:</p>
 
  <list>
  <item><p>ping/1</p></item>
  <item><p>store/4</p></item>
  <item><p>find_node/2</p></item>
  <item><p>find_value/2</p></item>
  </list><p>
 </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-endpoint">endpoint() = {<a href="inet.html#type-ip_address" class="seealso">inet:ip_address()</a>, <a href="inet.html#type-port_number" class="seealso">inet:port_number()</a>}</h3></div>
    <div class="type"><h3 id="type-id">id() = integer() &gt;= 0</h3></div>
    <div class="type"><h3 id="type-peer">peer() = {<a href="#type-id" class="seealso">id()</a>, <a href="inet.html#type-ip_address" class="seealso">inet:ip_address()</a>, <a href="inet.html#type-port_number" class="seealso">inet:port_number()</a>}</h3></div>
    <div class="type"><h3 id="type-range">range() = {<a href="#type-id" class="seealso">id()</a>, <a href="#type-id" class="seealso">id()</a>}</h3></div>
    <div class="type"><h3 id="type-tag">tag() = binary()</h3></div>
    <div class="type"><h3 id="type-token">token() = binary()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="node_id/0">node_id() -&gt; term()
</h3>


<div class="description">

<p>node_id/0 returns the <code>ID</code> of the current node</p>
</div></div>
<div class="function">
<h3 id="delete/1">delete(ID) -&gt; term()
</h3>


<div class="description">

<p>delete/1 removes an <code>ID</code> inserted by this node</p>
 
  <p>Remove the tracking of the <code>ID</code> inserted by this node. If no such <code>ID</code> exist,  
this is a no-op.</p>
 
  <p>It may take up to an hour before peers stop contacting you for the ID. This is
  an artifact of the DHT, so you must be prepared to handle the case where you
  are contacted for an old inexistant ID.</p>
</div></div>
<div class="function">
<h3 id="enter/2">enter(ID, Port) -&gt; ok</h3>

<ul class="type">
<li><code>ID = id()</code></li><li><code>Port = port_number() (see module inet)</code></li></ul>
<div class="description">

<p>enter/2 associates an <code>ID</code> with a <code>Location</code> on this node.</p>
 
  <p>Associate the given <code>ID</code> with a <code>Port</code>. Lookups to this ID will  
henceforth contain this node as a possible peer for the ID. The protocol  
which is used to transfer the data afterwards is not specified by the DHT.</p>
 
  <p>Note that the IP address to use is given by the UDP port on which the system
  is bound. This is a current setup in order to make it harder to craft packets
  where you impersonate someone else. The hope is that egress filtering at ISPs
  will help to mitigate eventual amplification attacks.
 </p>
</div></div>
<div class="function">
<h3 id="lookup/1">lookup(ID) -&gt; term()
</h3>


<div class="description">

<p>lookup/1 searches the DHT for nodes which can give you an <code>ID</code> back</p>
 
  <p>Perform a lookup operation. It returns a list of pairs {IP, Port} pairs  
which the DHT knows about that given ID.</p>
 
  <p>Assumptions:</p>
 
  <list>
  <item><p>We are never looking up keys which we have locally stored at the service.</p></item>
  <item><p>Before querying the network, we look into our own store. If we have entries
    locally, we pick those.</p></item>
  <item><p>If we don't have entries ourselves, we look up in the swarm.</p></item>
  </list>
</div></div>
<div class="function">
<h3 id="info/0">info() -&gt; [{atom(), term()}]</h3>


<div class="description">

<p>info/0 retrieves the internal state of the DHT subsystem.
  This call is intended for debugging purposes. You can use it to query the internal state of
  the DHT and use that as a basis of a report if something is wrong with the DHT.</p>
</div></div>
<div class="function">
<h3 id="info/1">info(Area) -&gt; term()</h3>

<ul class="type">
<li><code>Area = tracking | store | routing_table</code></li></ul>
<div class="description">

<p>info/1 queries specific entries in the <code>info/0</code> block</p>
</div></div>
<div class="function">
<h3 id="ping/1">ping(Location) -&gt; pang | {ok, id()} | {error, Reason}</h3>

<ul class="type">
<li><code>Location = {ip_address() (see module inet), port_number() (see module inet)}</code></li><li><code>Reason = any()</code></li></ul>
<div class="description">

<p>ping/1 queries a peer with a ping message</p>
 
  <p>Low level message which allows you to program your own strategies.
 </p>
</div></div>
<div class="function">
<h3 id="store/4">store(Peer, Token, ID, Port) -&gt; term()
</h3>


<div class="description">

<p>store/4 stores a new association at a peer</p>
 
  <p>Low level message which allows you to program your own strategies.
 </p>
</div></div>
<div class="function">
<h3 id="find_node/2">find_node(X1, Node) -&gt; term()
</h3>


<div class="description">

<p>find_node/2 performs a <code>find_node</code> query</p>
 
  <p>Low level message which allows you to program your own strategies.
 </p>
</div></div>
<div class="function">
<h3 id="find_value/2">find_value(X1, ID) -&gt; term()
</h3>


<div class="description">

<p>find_value/2 performs a <code>find_value</code> query</p>
 
  <p>Low level message which allows you to program your own strategies.
 </p>
</div></div></div>

<authors>

<aname>Magnus Klaar</aname>
<email>magnus.klaar@sgsstudentbostader.se</email>
<aname>Jesper Louis Andersen</aname>
<email>jesper.louis.andersen@gmail.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

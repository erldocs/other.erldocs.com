<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>sqerl (sqerl) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>sqerl</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-sqerl_query">sqerl_query() = atom() | <a href="#type-sqerl_sql" class="seealso">sqerl_sql()</a></h3></div>
    <div class="type"><h3 id="type-sqerl_results">sqerl_results() = {ok, integer() | <a href="#type-sqerl_rows" class="seealso">sqerl_rows()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {ok, integer(), <a href="#type-sqerl_rows" class="seealso">sqerl_rows()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {error, atom() | tuple()}</h3></div>
    <div class="type"><h3 id="type-sqerl_row">sqerl_row() = [{binary(), term()}]</h3></div>
    <div class="type"><h3 id="type-sqerl_rows">sqerl_rows() = [<a href="#type-sqerl_row" class="seealso">sqerl_row()</a>]</h3></div>
    <div class="type"><h3 id="type-sqerl_sql">sqerl_sql() = string() | binary()</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="checkout/0">checkout() -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="checkin/1">checkin(Connection) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="with_db/1">with_db(Call) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="select/2">select(StmtName, StmtArgs) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="select/3">select(StmtName, StmtArgs, XformName) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="select/4">select(StmtName, StmtArgs, XformName, XformArgs) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="statement/2">statement(StmtName, StmtArgs) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="statement/3">statement(StmtName, StmtArgs, XformName) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="statement/4">statement(StmtName, StmtArgs, XformName, XformArgs) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="execute/1">execute(QueryOrStatement::sqerl_query()) -&gt; sqerl_results()</h3>


<div class="description">

<p>Execute query or statement with no parameters.
  See execute/2 for return info.</p>
</div></div>
<div class="function">
<h3 id="execute/1-1">execute(QueryOrStatement::sqerl_query(), Parameters::[] | [term()]) -&gt; sqerl_results()</h3>


<div class="description">

<p>Execute query or statement with parameters.
  </p><pre class="sh_erlang">  Returns:
  - {ok, Result}
  - {error, ErrorInfo}
 
  Result depends on the query being executed, and can be
  - Rows
  - Count
 
  Row is a proplist-like array, e.g. [{&lt;&lt;"id"&gt;&gt;, 1}, {&lt;&lt;"name"&gt;&gt;, &lt;&lt;"John"&gt;&gt;}]
 
  Note that both a simple query and a prepared statement can take
  parameters.</pre><p>
 </p>
</div></div>
<div class="function">
<h3 id="adhoc_select/1">adhoc_select(Columns::[binary() | string()], Table::binary() | string(), Where::atom() | tuple()) -&gt; sqerl_results()</h3>


<div class="description">

<p>Execute an adhoc select query.
  </p><pre class="sh_erlang">  Returns:
  - {ok, Rows}
  - {error, ErrorInfo}
 
  See execute/2 for more details on return data.
 
  Where Clause
  -------------
  Form: {where, Where}
 
  Where = all|undefined -- Does not generate a WHERE clause.
                           Matches all records in table.
  Where = {Field, equals|nequals|gt|gte|lt|lte, Value}
  Where = {Field, in|notin, Values}
  Where = {'and'|'or', WhereList} -- Composes WhereList with AND or OR
 
  adhoc_select/4 takes an additional Clauses argument which
  is a list of additional clauses for the query.</pre>
</div></div>
<div class="function">
<h3 id="adhoc_select/1-1">adhoc_select(Columns::[binary() | string()], Table::binary() | string(), Where::atom() | tuple(), Clauses::[] | [atom() | tuple()]) -&gt; sqerl_results()</h3>


<div class="description">

<p>Execute an adhoc select query with additional clauses.
  </p><pre class="sh_erlang">  Group By Clause
  ---------------
  Form: {group_by, Fields}
 
  Order By Clause
  ---------------
  Form: {order_by, Fields | {Fields, asc|desc}}
 
  Limit/Offset Clause
  --------------------
  Form: {limit, Limit} | {limit, {Limit, offset, Offset}}</pre><p>
  See itest:adhoc_select_complex/0 for an example of a complex query
  that uses several clauses.</p>
</div></div>
<div class="function">
<h3 id="adhoc_insert/2">adhoc_insert(Table, Rows) -&gt; term()
</h3>


<div class="description">

<p>Insert Rows into Table with default batch size.</p>
<p><em>See also:</em> <a href="#adhoc_insert/3" class="seealso">adhoc_insert/3</a>.</p>
</div></div>
<div class="function">
<h3 id="adhoc_insert/3">adhoc_insert(Table, Rows, BatchSize) -&gt; term()
</h3>


<div class="description">

<p>Insert Rows into Table with given batch size.</p>
 
  <p>Reformats input data to {Columns, RowsValues} and
  calls adhoc_insert/4.
  </p><pre class="sh_erlang">  - Rows: list of proplists (such as returned by a select) e.g.
  [
      [{&lt;&lt;"id"&gt;&gt;, 1},{&lt;&lt;"first_name"&gt;&gt;, &lt;&lt;"Kevin"&gt;&gt;}],
      [{&lt;&lt;"id"&gt;&gt;, 2},{&lt;&lt;"first_name"&gt;&gt;, &lt;&lt;"Mark"&gt;&gt;}]
    ]</pre><p>
  Returns {ok, InsertCount}
 </p>
<p><em>See also:</em> <a href="#adhoc_insert/4" class="seealso">adhoc_insert/4</a>.</p>
</div></div>
<div class="function">
<h3 id="adhoc_insert/4">adhoc_insert(Table, Columns, RowsValues, BatchSize) -&gt; term()
</h3>


<div class="description">

<p>Insert records defined by {Columns, RowsValues}
  into Table using given BatchSize.
  </p><pre class="sh_erlang">  - Columns, RowsValues e.g.
    {[&lt;&lt;"first_name"&gt;&gt;, &lt;&lt;"last_name"&gt;&gt;],
       [
         [&lt;&lt;"Joe"&gt;&gt;, &lt;&lt;"Blow"&gt;&gt;],
         [&lt;&lt;"John"&gt;&gt;, &lt;&lt;"Doe"&gt;&gt;]
       ]}
 
  Returns {ok, InsertedCount}.
 
  1&gt; adhoc_insert(&lt;&lt;"users"&gt;&gt;,
         {[&lt;&lt;"first_name"&gt;&gt;, &lt;&lt;"last_name"&gt;&gt;],
          [[&lt;&lt;"Joe"&gt;&gt;, &lt;&lt;"Blow"&gt;&gt;],
           [&lt;&lt;"John"&gt;&gt;, &lt;&lt;"Doe"&gt;&gt;]]}).
  {ok, 2}</pre><p>
 </p>
</div></div>
<div class="function">
<h3 id="extract_insert_data/1">extract_insert_data(Rows::sqerl_rows()) -&gt; {[binary()], [[term()]]}</h3>


<div class="description">

<p>Extract insert data from Rows.</p>
 
  <p>Assumes all rows have the same format.  
Returns {Columns, RowsValues}.</p>
 
  <pre class="sh_erlang">  1&gt; extract_insert_data([
                          [{&lt;&lt;"id"&gt;&gt;, 1}, {&lt;&lt;"name"&gt;&gt;, &lt;&lt;"Joe"&gt;&gt;}],
                          [{&lt;&lt;"id"&gt;&gt;, 2}, {&lt;&lt;"name"&gt;&gt;, &lt;&lt;"Jeff"&gt;&gt;}],
                         ]).
  {[&lt;&lt;"id"&gt;&gt;,&lt;&lt;"name"&gt;&gt;],[[1,&lt;&lt;"Joe"&gt;&gt;],[2,&lt;&lt;"Jeff"&gt;&gt;]]}</pre><p>
 </p>
</div></div>
<div class="function">
<h3 id="adhoc_delete/1">adhoc_delete(Table::binary(), Where::term()) -&gt; {ok, integer()} | {error, any()}</h3>


<div class="description">

<p>Adhoc delete.
  Uses the same Where specifications as adhoc_select/3.
  Returns {ok, Count} or {error, ErrorInfo}.
 </p>
</div></div></div>

<authors>

<aname>Seth Falcon</aname>
<email>seth@opscode.com</email>
<aname>Mark Anderson</aname>
<email>mark@opscode.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>chef_wm_util (chef_wm) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>chef_wm_util</h1>
<h2 class="modsummary"/>
<div class="description">
</div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-bin_or_string">bin_or_string() = binary() | string()</h3></div>
    <div class="type"><h3 id="type-ejson">ejson() = {[tuple()]}</h3></div>
    <div class="type"><h3 id="type-wm_req">wm_req() = #wm_reqdata{}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="base_mods/0">base_mods() -&gt; term()
</h3>


<div class="description">

<p>Report the names of the "pluggable" modules determined at compile time. Useful for
  debugging builds.</p>
</div></div>
<div class="function">
<h3 id="base_uri/1">base_uri(Req) -&gt; term()
</h3>


<div class="description">

<p>Returns the base URI for the server as called by the client as a string.
  By default, use the Host: header value, or if configured with the atom 'host_header'
  Otherwise, use the configured url.</p>
</div></div>
<div class="function">
<h3 id="get_header_fun/2">get_header_fun(Req, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="fetch_org_guid/1">fetch_org_guid(Base_state) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="environment_not_found_message/1">environment_not_found_message(EnvName::bin_or_string()) -&gt; ejson()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="not_found_message/2">not_found_message(X1::node | role | data_bag | data_bag_item1 | data_bag_item2 | client | data_bag_missing_for_item_post | environment | sandbox | sandboxes | cookbook | cookbook_version | user, Name::bin_or_string() | {bin_or_string(), bin_or_string()}) -&gt; ejson()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="error_message_envelope/1">error_message_envelope(Message) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="set_json_body/2">set_json_body(Req, EjsonData) -&gt; term()
</h3>


<div class="description">

<p>Converts the given Ejson-encoded data to a JSON string and
  sets it as the request body, returning the updated request.</p>
</div></div>
<div class="function">
<h3 id="with_error_body/1">with_error_body(Req::wm_req(), ErrorData::json_object() (see module ej) | json_string() (see module ej)) -&gt; ReqWithErrorJSON::wm_req()</h3>


<div class="description">

<p>Convenience method for manipulating error data.  Data that is passed in is wrapped
  in an error message envelope, which is then encoded to JSON and set as the body of the
  request.  This updated request is returned.</p>
</div></div>
<div class="function">
<h3 id="set_uri_of_created_resource/2">set_uri_of_created_resource(Uri, Req) -&gt; term()
</h3>


<div class="description">

<p>Sets the JSON body of a response and it's Location header to  
point to the URI of a newly-created resource.</p>
 
  <p>The body will be of the form
  </p><pre class="sh_erlang">      {"uri":"http://foo.com/newresource"}</pre><p>
  Returns the updated request.</p>
</div></div>
<div class="function">
<h3 id="object_name/2">object_name(X1::cookbook | node | role | data_bag | data_bag_item | environment | principal | sandbox | client | user, Request::#wm_reqdata{}) -&gt; binary() | undefined</h3>


<div class="description">

<p>Extracts the name of a given object from the request path.  This is for use in  
resources that manipulate individual Chef objects, like nodes or roles.</p>
 
  <p>For example, given a request to the path <code>"/nodes/foo"</code>, this
  function would return <code>&lt;&lt;"foo"&gt;&gt;</code></p>
</div></div>
<div class="function">
<h3 id="extract_from_path/2">extract_from_path(PathKey, Req) -&gt; term()
</h3>


<div class="description">

<p>Private utility function to extract a path element as a binary.  Returns the atom
  <code>undefined</code> if no such value exists.</p>
</div></div>
<div class="function">
<h3 id="malformed_request_message/3">malformed_request_message(Ej_invalid, Req, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="admin_field_is_false/1">admin_field_is_false(Chef_user) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="num_versions/1">num_versions(Req::#wm_reqdata{}) -&gt; all | non_neg_integer()</h3>


<div class="description">

<p>Utility function to process the <code>num_versions</code> parameter that is common to several
  cookbook-related resources</p>
</div></div>
<div class="function">
<h3 id="num_versions/2">num_versions(Default::1 | all, Req::wm_req()) -&gt; all | non_neg_integer()</h3>


<div class="description">

<p>Depending on which resource the current request is processing, the default value for
  an unspecified 'num_versions' parameter can be either 1 or <code>all</code>.</p>
</div></div>
<div class="function">
<h3 id="generate_keypair/2">generate_keypair(Name, RequestId) -&gt; term()
</h3>


<div class="description">
 </div></div></div>

<authors>

<aname>Christopher Brown</aname>
<email>cb@opscode.com</email>
<aname>Christopher Maier</aname>
<email>cm@opscode.com</email>
<aname>Seth Falcon</aname>
<email>seth@opscode.com</email>
<aname>Ho-Sheng Hsiao</aname>
<email>hosh@opscode.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>elysium_connection_sup (elysium) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>elysium_connection_sup</h1>
<h2 class="modsummary">
     Elysium_connection_sup supervises all Cassandra connections.</h2>
<div class="description">
<p>
     Elysium_connection_sup supervises all Cassandra connections.
     Each connection is an instance of a seestar_session (gen_server)
     which is used to execute requests against the Cassandra database.
  </p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-config_type">config_type() = {config_mod, module()}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {vbisect, <a href="vbisect.html#type-bindict" class="seealso">vbisect:bindict()</a>}</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start_link/0">start_link() -&gt; {ok, pid()}</h3>


<div class="description">

<p>    
Start the connection supervisor which manages replacement of    
connections when they die. Connections are maintained as    
simple_one_for_one workers without any initial args. When a    
Cassandra session is started or restarted, configuration data    
is used to determine which node to connect to. This allows a    
decayed or failed session to move to another Cassandra node.    
The failure may have been caused by the node, and when we    
try to get a new connection the round-robin load balancing    
will direct us to the next available Cassandra node.</p>
 
    <p>This supervisor is controlled from the elysium_queue FSM.
    After initializing, it notifies the FSM that it is ready
    so the FSM can begin a controlled startup. When the system
    is ready for Cassandra connections, the FSM will call this
    supervisor to start_child/2 for each live session wanted.</p>
</div></div>
<div class="function">
<h3 id="start_child/1">start_child(Sup_Pid::pid(), Args::[config_type()]) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Start a new Cassandra connection using the config load balanced node list.</p>
</div></div>
<div class="function">
<h3 id="stop_child/1">stop_child(Sup_Pid::pid(), Child_Pid::pid()) -&gt; ok | {error, not_found}</h3>


<div class="description">

<p>Stop a Cassandra connection.</p>
</div></div>
<div class="function">
<h3 id="init/1">init(X1::{}) -&gt; ignore | {ok, {{simple_one_for_one, pos_integer(), pos_integer()}, [child_spec() (see module supervisor)]}}</h3>


<div class="description">

<p>
    Creates a simple_one_for_one elysium_connection child definition
    to be used to dynamically add children to this supervisor. All
    children register themselves with the elysium queue so they may
    be checked out to execute Cassandra queries.</p>
</div></div></div>

<authors>

<aname>Jay Nelson</aname>
<email>jay@duomark.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

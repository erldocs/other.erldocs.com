<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>epistula (epistula) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>epistula</h1>
<h2 class="modsummary">
  Easily format and send MIME email from Erlang.</h2>
<div class="description">
<p>
  Easily format and send MIME email from Erlang.</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/0">start() -&gt; ok</h3>


<div class="description">

<p>Start the epistula app and all of its dependencies.</p>
</div></div>
<div class="function">
<h3 id="encode/1">encode(Msg::#mime_msg{}) -&gt; string()</h3>


<div class="description">

<p>Encode a message into a string.</p>

 This function "renders" the #mime_msg{} record into a string which is suitable
 to pass directly to a mail client.  It encodes all the attached headers and
 then processes associated #mime_part{} records.
</div></div>
<div class="function">
<h3 id="send/1">send(Msg::#mime_msg{}) -&gt; ok</h3>


<div class="description">

<p>Send a message using <code>esmtp</code></p>

 Sugar to encode and send a message.
</div></div>
<div class="function">
<h3 id="new/0">new() -&gt; #mime_msg{}</h3>


<div class="description">

<p>Create a new barebones #mime_msg{} record.</p>

 This is the bare-bones constructor and returns a message with all of the
 defaults: multipart/mixed and an autogenerated boundary marker. There are no
 default headers or parts.
</div></div>
<div class="function">
<h3 id="new/1">new(Type::atom()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Create a new barebones #mime_msg{} record of the specified MIME multipart subtype.</p>

 The default subtype is mixed.  Some other common subtypes include:
 <list>
   <item><p>alternative</p></item>
   <item><p>related</p></item>
   <item><p>digest</p></item>
   <item><p>message</p></item>
 </list>

 You may find the following Wikipedia page useful in learning more about these
 subtypes: <url href="http://en.wikipedia.org/wiki/MIME#Multipart_subtypes">http://en.wikipedia.org/wiki/MIME#Multipart_subtypes</url>
</div></div>
<div class="function">
<h3 id="new/1-1">new(To::string(), From::string(), Subject::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Create a new #mime_msg{} record, populating <code>To</code>, <code>From</code>, and <code>Subject</code> headers.</p>
</div></div>
<div class="function">
<h3 id="new/1-2">new(To::string(), From::string(), Subject::string(), Body::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Syntactic sugar to create a new message, suitable for encoding</p>

 This function assumes that the supplied body is US-ASCII text, with a mime
 type of 'text/plain'.
</div></div>
<div class="function">
<h3 id="to/1">to(Msg::#mime_msg{}) -&gt; string() | undefined</h3>


<div class="description">

<p>Convenience function to lookup to the value of the <code>To</code> header.</p>
</div></div>
<div class="function">
<h3 id="to/2">to(Msg::#mime_msg{}, To::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Convenience function to quickly add or modify the value of the <code>To</code> header.</p>
</div></div>
<div class="function">
<h3 id="from/1">from(Msg::#mime_msg{}) -&gt; string() | undefined</h3>


<div class="description">

<p>Convenience function to lookup to the value of the <code>From</code> header.</p>
</div></div>
<div class="function">
<h3 id="from/2">from(Msg::#mime_msg{}, From::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Convenience function to quickly add or modify the value of the <code>From</code> header.</p>
</div></div>
<div class="function">
<h3 id="email/1">email(S::string()) -&gt; string() | undefined</h3>


<div class="description">

<p>Given a string with an email address in it, return <em>only</em> the email address.</p>

 <p>This is mostly useful for getting raw email addresses from headers, as in:</p>

 <p><code>ToEmail = email(to(Msg))</code></p>

 Returns 'undefined' if no email address is matched.
</div></div>
<div class="function">
<h3 id="add_header/2">add_header(Msg::#mime_msg{}, Header::{Key::atom() | string(), Value::string()}) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Add a header tuple to a message.</p>

 This function takes pains not to add a header more than once.  Repeated
 additions will update the value of the header.
</div></div>
<div class="function">
<h3 id="add_headers/2">add_headers(Msg::#mime_msg{}, Headers::[{Key::string(), Value::string()}]) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Add a proplist of headers to a message.</p>

 This method <em>does not</em> filter duplicates.
</div></div>
<div class="function">
<h3 id="update_header/2">update_header(Msg::#mime_msg{}, Header::{Key::atom() | string(), Value::string()}) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Update a header value in the given message.</p>
</div></div>
<div class="function">
<h3 id="delete_header/2">delete_header(Msg::#mime_msg{}, Header::{Key::atom() | string(), Value::string()}) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Remove a header from a message.</p>
</div></div>
<div class="function">
<h3 id="update_message_type/2">update_message_type(Msg::#mime_msg{}, Type::atom()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Update a message type.
</p>
<p><em>See also:</em> <a href="#new/1" class="seealso">For more information about MIME subtypes, see here.</a>.</p>
</div></div>
<div class="function">
<h3 id="new_part/0">new_part() -&gt; #mime_part{}</h3>


<div class="description">

<p>Create a new empty part of a MIME message.</p>

 The defaults are:
 <list>
   <item><p>Content-Encoding: 7bit</p></item>
   <item><p>Content-Type: text/plain</p></item>
   <item><p>Charset: US-ASCII</p></item>
   <item><p>Content-Disposition: inline</p></item>
 </list>
</div></div>
<div class="function">
<h3 id="new_part/1">new_part(Encoding::{EncodingType::string(), MimeType::string(), CharacterSet::string()}, Disposition::atom(), ContentId::undefined | string(), Filename::undefined | string(), Data::string()) -&gt; #mime_part{}</h3>


<div class="description">

<p>Create a new message part, specifying all of the part components.</p>
</div></div>
<div class="function">
<h3 id="generate_content_id/0">generate_content_id() -&gt; string()</h3>


<div class="description">

<p>Generate a cryptographically random 16 byte Content ID.</p>
</div></div>
<div class="function">
<h3 id="update_content_id/2">update_content_id(Part::#mime_part{}, ContentId::string()) -&gt; #mime_part{}</h3>


<div class="description">

<p>Update a Content ID in a MIME message part.</p>

 The value <code>undefined</code> can be used to effectively clear any previously set value.
</div></div>
<div class="function">
<h3 id="update_filename/2">update_filename(Part::#mime_part{}, Filename::undefined | string()) -&gt; #mime_part{}</h3>


<div class="description">

<p>Update a filename in a MIME message part.</p>

 The value <code>undefined</code> can be used to effectively clear any previously set value.
</div></div>
<div class="function">
<h3 id="update_data/2">update_data(Part::#mime_part{}, Data::string()) -&gt; #mime_part{}</h3>


<div class="description">

<p>Update the data in a MIME message part.</p>
</div></div>
<div class="function">
<h3 id="update_encoding/2">update_encoding(Part::#mime_part{}, Encoding::{EncodingType::string(), MimeType::string(), CharSet::string()}) -&gt; #mime_part{}</h3>


<div class="description">

<p>Update the encoding tuple in a MIME message part.</p>
</div></div>
<div class="function">
<h3 id="update_disposition/2">update_disposition(Part::#mime_part{}, Disposition::atom()) -&gt; #mime_part{}</h3>


<div class="description">

<p>Update the content disposition in a MIME message part.</p>
</div></div>
<div class="function">
<h3 id="add_part/2">add_part(Msg::#mime_msg{}, Part::#mime_part{}) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Add a part to a MIME message.</p>
</div></div>
<div class="function">
<h3 id="remove_last_part/1">remove_last_part(Msg::#mime_msg{}) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Remove the last part from the MIME message.</p>
</div></div>
<div class="function">
<h3 id="add_plain_text_part/2">add_plain_text_part(Msg::#mime_msg{}, Body::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Convenience function to add a plain text part to a message.</p>
</div></div>
<div class="function">
<h3 id="inline_file/2">inline_file(Msg::#mime_msg{}, Filename::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Add a file inline to a message.</p>

 <p>The MIME part is guessed either by using the <code>file(1)</code> command or by looking at the
 file extension.  This behavior can be controlled by setting the <code>use_file_cmd</code> 
directive to true or false.</p>

 The default guess is <code>application/octet-stream</code>.
</div></div>
<div class="function">
<h3 id="inline_file/2-1">inline_file(Msg::#mime_msg{}, MimeType::string(), Filename::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Add an inline file with the specified MIME type.</p>
</div></div>
<div class="function">
<h3 id="attach_file/2">attach_file(Msg::#mime_msg{}, Filename::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Attach a file to a message.
</p>
<p><em>See also:</em> <a href="#inline_file/2" class="seealso">MIME type guessing works the same as inline_file/2.</a>.</p>
</div></div>
<div class="function">
<h3 id="attach_file/2-1">attach_file(Msg::#mime_msg{}, MimeType::string(), Filename::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Attach a file to a message with the specified MIME type.</p>
</div></div>
<div class="function">
<h3 id="attach_file/2-2">attach_file(Msg::#mime_msg{}, MimeType::string(), ContentId::string(), Filename::string()) -&gt; #mime_msg{}</h3>


<div class="description">

<p>Attach a file to a message with the specified MIME type and Content ID.
</p>
<p><em>See also:</em> <a href="#generate_content_id/0" class="seealso">generate_content_id/0</a>.</p>
</div></div></div>

<authors>

<aname>Mark Allen</aname>
<email>mrallen1@yahoo.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>c4_player (4inline-erl) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>c4_player</h1>
<h2 class="modsummary">Protocol independent interface for remote 4 in-line players.</h2>
<div class="description">
<p>Protocol independent interface for remote 4 in-line players.
 The functions that handle actions by our player are
 <a href="#seek/1" class="seealso">seek/1</a>, <a href="#cancel_seek/1" class="seealso">cancel_seek/1</a>,
 <a href="#play/2" class="seealso">play/2</a> and <a href="#quit_game/1" class="seealso">quit_game/1</a>.
 The functions that handle events from the other player are
 <a href="#joined/4" class="seealso">joined/4</a>, <a href="#other_played/4" class="seealso">other_played/4</a> and <a href="#other_quit/2" class="seealso">other_quit/2</a>.
 The rest are callback functions as this modules implements the generic
 OTP gen_fsm (State machine) behavior.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-game_id">game_id() = integer() &gt;= 1</h3></div>
    <div class="type"><h3 id="type-game_type">game_type() = anon | priv</h3></div>
    <div class="type"><h3 id="type-game_var">game_var() = std | pop</h3></div>
    <div class="type"><h3 id="type-seek_id">seek_id() = integer() &gt;= 1</h3></div>
    <div class="type"><h3 id="type-turn">turn() = your_turn | other_turn</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/1">start(Args) -&gt; term()
</h3>


<div class="description">

<p>Starts unsupervised c4_player process</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(Args) -&gt; term()
</h3>


<div class="description">

<p>Starts c4_player process supervised by and linked to current process</p>
</div></div>
<div class="function">
<h3 id="text_cmd/2">text_cmd(Pid, Cmd) -&gt; term()
</h3>


<div class="description">

<p>Parses a text command and executes the request action (SEEK, PLAY, etc).</p>
</div></div>
<div class="function">
<h3 id="text_reply/1">text_reply(Reply) -&gt; term()
</h3>


<div class="description">

<p>Translates a reply to a text command into text for sending to client.</p>
</div></div>
<div class="function">
<h3 id="seek/2">seek(Pid, Seek) -&gt; term()
</h3>


<div class="description">

<p>Player requests to join a game.
 Returns :  join_ack | {new_game, Turn} | {error, Error, ErrorMsg}.</p>
</div></div>
<div class="function">
<h3 id="cancel_seek/1">cancel_seek(Pid::pid()) -&gt; seek_canceled | no_seek_pending</h3>


<div class="description">

<p>Impatient player requests to forget about joining a game.</p>
</div></div>
<div class="function">
<h3 id="cancel_seek/1-1">cancel_seek(Pid::pid(), SeekId::seek_id()) -&gt; {seek_canceled, seek_id()} | {no_seek_pending, seek_id()}</h3>


<div class="description">

<p>Impatient player requests to forget about joining a game.</p>
</div></div>
<div class="function">
<h3 id="accept_seek/2">accept_seek(Pid, SeekId) -&gt; term()
</h3>


<div class="description">

<p>Player request to accept a pending seek.</p>
</div></div>
<div class="function">
<h3 id="joined/1">joined(Pid::pid(), Game_info::#game_info{id=undefined | pos_integer(), pid=pid() | none, type=undefined | game_type(), variant=undefined | game_var(), board_size=undefined | #board_size{}, ppid1=none | pid(), ppid2=none | pid()}, Turn::turn(), Color::1 | 2) -&gt; {new_game, #game_info{id=undefined | pos_integer(), pid=pid() | none, type=undefined | game_type(), variant=undefined | game_var(), board_size=undefined | #board_size{}, ppid1=none | pid(), ppid2=none | pid()}, turn(), 1 | 2}</h3>


<div class="description">

<p>Called when paired with another player for a game</p>
</div></div>
<div class="function">
<h3 id="play/3">play(Pid, GameId, Move) -&gt; term()
</h3>


<div class="description">

<p>Executes a move for this player
 Returns : play_ok | you_win | {error, ErrorCode, ErrorMsg}</p>
</div></div>
<div class="function">
<h3 id="other_played/4">other_played(Pid, GamePid, Move, Status) -&gt; term()
</h3>


<div class="description">

<p>Notifies this player of a move by the other player.</p>
</div></div>
<div class="function">
<h3 id="quit_game/1">quit_game(Pid::pid(), GameId::game_id()) -&gt; {no_game, game_id()} | {leaving_game, game_id()}</h3>


<div class="description">

<p>Called by our player to leave a game.</p>
</div></div>
<div class="function">
<h3 id="quit/1">quit(Pid::pid) -&gt; ok_quit</h3>


<div class="description">

<p>Called by our player to leave a game.</p>
</div></div>
<div class="function">
<h3 id="other_quit/1">other_quit(Pid::pid(), GamePid::pid()) -&gt; ok | no_game</h3>


<div class="description">

<p>Should be called when the other player just quit the game.</p>
</div></div>
<div class="function">
<h3 id="disconnected/1">disconnected(Pid::pid()) -&gt; ok</h3>


<div class="description">

<p>Called when the player has been disconnected</p>
</div></div>
<div class="function">
<h3 id="reconnected/1">reconnected(Pid::pid(), ParentPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Called when the player has been disconnected</p>
</div></div>
<div class="function">
<h3 id="other_disconnected/1">other_disconnected(Pid::pid(), GamePid::pid()) -&gt; ok</h3>


<div class="description">

<p>Alerts our parent that the other player in a game has disconnected.</p>
</div></div>
<div class="function">
<h3 id="other_returned/2">other_returned(Pid, GamePid) -&gt; term()
</h3>


<div class="description">

<p>Alerts our handler that the other player in a game has reconnected.</p>
</div></div>
<div class="function">
<h3 id="game_started/2">game_started(Pid, GameId) -&gt; term()
</h3>


<div class="description">

<p>Sends a notification to the player that a game started.</p>
</div></div>
<div class="function">
<h3 id="seek_issued/1">seek_issued(Pid::pid(), Seek::#seek{id=none | pos_integer(), pid=none | pid(), board_size=undefined | #board_size{}, variant=game_var(), type=game_type()}) -&gt; ok</h3>


<div class="description">

<p>Asynchronously sends a notification to the player that a seek has been issued,
 no matter what state we are in. The client should ignore them if not expecting
 them at the moment.</p>
</div></div>
<div class="function">
<h3 id="seek_removed/1">seek_removed(Pid::pid(), SeekId::pos_integer()) -&gt; ok</h3>


<div class="description">

<p>Sends asynchronous notification of a seek removal to caller process.</p>
</div></div>
<div class="function">
<h3 id="get_state/1">get_state(Pid::pid()) -&gt; {string(), #state{game_pid=none | pid(), game_id=none | pos_integer(), parent=none | pid(), tref=none | reference(), prev_state=atom(), disconnect_timeout=pos_integer()}}</h3>


<div class="description">

<p>Returns the state information of the player process as a tuple
 {StateName, Data}</p>
</div></div>
<div class="function">
<h3 id="init/1">init(ParentPid) -&gt; term()
</h3>


<div class="description">

<p>Initializes state machine to the idle state</p>
</div></div>
<div class="function">
<h3 id="handle_event/3">handle_event(Event, State, Data) -&gt; term()
</h3>


<div class="description">

<p>Handles seek notifications which are asynchronous to minimize blocking when
 doing them in bulk.
 Generic FSM callback for asynchronous events.</p>
</div></div>
<div class="function">
<h3 id="handle_sync_event/4">handle_sync_event(Event, From, State, Data) -&gt; term()
</h3>


<div class="description">

<p>Handles player disconnect, game quit and get state requests.
 Generic callback for synchronous events for all states.</p>
</div></div>
<div class="function">
<h3 id="handle_info/3">handle_info(Msg, State, Data) -&gt; term()
</h3>


<div class="description">

<p>Handles death of our caller process (user disconnection).
 FSM miscellaneous event handling callback.</p>
</div></div>
<div class="function">
<h3 id="code_change/4">code_change(OldVsn, StateName, Data, Extra) -&gt; term()
</h3>


<div class="description">

<p>Code hot swapping callback (does nothing now).</p>
</div></div>
<div class="function">
<h3 id="terminate/3">terminate(Reason, StateName, State) -&gt; term()
</h3>


<div class="description">

<p>No real cleanup when player process dies.</p>
</div></div>
<div class="function">
<h3 id="idle/3">idle(Event, From, State) -&gt; term()
</h3>


<div class="description">

<p>Non-game state.</p>
</div></div>
<div class="function">
<h3 id="my_turn/3">my_turn(Event, From, State) -&gt; term()
</h3>


<div class="description">

<p>Waiting for this player to move state.</p>
</div></div>
<div class="function">
<h3 id="other_turn/3">other_turn(Event, From, State) -&gt; term()
</h3>


<div class="description">

<p>Waiting for other player to move state.</p>
</div></div>
<div class="function">
<h3 id="waiting_for_reconnect/3">waiting_for_reconnect(Event, From, State) -&gt; term()
</h3>


<div class="description">

<p>Waiting for other player to reconnect.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

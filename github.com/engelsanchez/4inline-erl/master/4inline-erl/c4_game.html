<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>c4_game (4inline-erl) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>c4_game</h1>
<h2 class="modsummary">Game process interface.</h2>
<div class="description">
<p>Game process interface.
  It receives moves from players and notifies the opponent of the move
  and whether the game has been won or the board is full.
  The public functions are <a href="#start/1" class="seealso">start/1</a>, <a href="#start_link/1" class="seealso">start_link/1</a>,
  <a href="#play/3" class="seealso">play/3</a>, <a href="#disconnect/2" class="seealso">disconnect/2</a>, <a href="#abandon/1" class="seealso">abandon/1</a> and <a href="#quit/2" class="seealso">quit/2</a>.
  The other functions are FSM callbacks.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-game_type">game_type() = anon | priv</h3></div>
    <div class="type"><h3 id="type-game_var">game_var() = std | pop</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="start/1">start(Game_info::#game_info{id=undefined | pos_integer(), pid=pid() | none, type=undefined | game_type(), variant=undefined | game_var(), board_size=undefined | #board_size{}, ppid1=none | pid(), ppid2=none | pid()}) -&gt; {ok, pid()} | ignore | {error, string()}</h3>


<div class="description">

<p>Starts unsupervised game process, mostly for testing.</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(Game_info::#game_info{id=undefined | pos_integer(), pid=pid() | none, type=undefined | game_type(), variant=undefined | game_var(), board_size=undefined | #board_size{}, ppid1=none | pid(), ppid2=none | pid()}) -&gt; {ok, pid()} | ignore | {error, string()}</h3>


<div class="description">

<p>Starts game process linked to the current process.</p>
</div></div>
<div class="function">
<h3 id="play/1">play(GamePid::pid(), PlayerPid::pid(), X3::tuple()) -&gt; invalid_move | not_your_turn | ok | you_win</h3>


<div class="description">

<p>Called when a player makes a move</p>
</div></div>
<div class="function">
<h3 id="game_state/2">game_state(GamePid, PlayerPid) -&gt; term()
</h3>


<div class="description">

<p>Returns information about the game relevant to the calling player</p>
</div></div>
<div class="function">
<h3 id="disconnect/1">disconnect(GamePid::pid(), PlayerPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Marks player as disconnected from the game and notifies other player.</p>
</div></div>
<div class="function">
<h3 id="reconnect/1">reconnect(GamePid::pid(), PlayerPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Marks player as connected again and notifies other player.</p>
</div></div>
<div class="function">
<h3 id="abandon/1">abandon(GamePid) -&gt; term()
</h3>


<div class="description">

<p>Stops the game</p>
</div></div>
<div class="function">
<h3 id="quit/1">quit(GamePid::pid(), PlayerPid::pid()) -&gt; ok</h3>


<div class="description">

<p>Called when a player actively quits a game (not just disconnects).</p>
</div></div>
<div class="function">
<h3 id="init/1">init(Game_info::#game_info{id=undefined | pos_integer(), pid=pid() | none, type=undefined | game_type(), variant=undefined | game_var(), board_size=undefined | #board_size{}, ppid1=none | pid(), ppid2=none | pid()}) -&gt; {ok, playing, #state{}}</h3>


<div class="description">

<p>Creates the empty board and starts monitoring the player processes.
 FSM initialization callback.</p>
</div></div>
<div class="function">
<h3 id="handle_call/3">handle_call(Msg, From, State) -&gt; term()
</h3>


<div class="description">

<p>Waiting for a move
 returns:
   invalid_move
   not_your_turn
   ok
   you_win
 May send message to other player:
   played, Col, you_lose|your_turn</p>
</div></div>
<div class="function">
<h3 id="handle_cast/2">handle_cast(Msg, State) -&gt; term()
</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="handle_info/2">handle_info(Event, State) -&gt; term()
</h3>


<div class="description">

<p>Handles player process disconnections.
 FSM callback for non-FSM process messages.</p>
</div></div>
<div class="function">
<h3 id="terminate/2">terminate(Reason, State) -&gt; term()
</h3>


<div class="description">

<p>Does nothing as there is no real cleanup needed upon game end.
 Generic FSM termination callback.</p>
</div></div>
<div class="function">
<h3 id="code_change/3">code_change(OldVsn, StateData, Extra) -&gt; term()
</h3>


<div class="description">

<p>Code hot swapping callback, does nothing.</p>
</div></div></div>

<authors>
<aname> </aname>
<email> </email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

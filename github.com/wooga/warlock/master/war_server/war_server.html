<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>war_server (war_server) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>war_server</h1>
<h2 class="modsummary">Server wrapper, interface for handling server requests.</h2>
<div class="description">
<p>Server wrapper, interface for handling server requests</p>
  
   <p>The Server module consists of a worker that runs   
commands on the local DB as per consensus</p>
  
   How a request is handled
   1. A command is constructed based on the request
   2. Command is passed on to the consensus module via war_server_worker
   3. Consensus module gets agreement based on the client
   4. The callback function (part of command) is called by consensus module
   5. If reply required, the master replies for "CLUSTER" requests and local
      replica replies for "LOCAL" requests
  </div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="ping/0">ping() -&gt; pong | pang</h3>


<div class="description">

<p>
  Check if this server is up.
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="ping_service/0">ping_service() -&gt; pong | pang</h3>


<div class="description">

<p>
  Check if the service(cluster) is up.
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="ping_backend/0">ping_backend() -&gt; pong | pang</h3>


<div class="description">

<p>
  Check if the backend for this server is up.
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="x/2">x(X1::loc | cls, Cmd::term()) -&gt; term()</h3>


<div class="description">

<p>
  eXecute a command on the database
  loc = execute the command on the local replica. Usually for reads
  cls = execute the command on the cluster. Must for writes
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="repl/1">repl(SeedNode::node()) -&gt; ok</h3>


<div class="description">

<p>
  Join this node to the cluster
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="receive_complete/1">receive_complete(SourceNode::node()) -&gt; ok</h3>


<div class="description">

<p>
  Fun called by war_server_receiver once process is complete
 -------------------------------------------------------------------</p>
</div></div>
<div class="function">
<h3 id="ready_repl/1">ready_repl(FromNode::node()) -&gt; {ok, pid()} | {error, repl_in_progress}</h3>


<div class="description">

<p>
  Some node requests to replicate from this node
 -------------------------------------------------------------------</p>
</div></div></div>

<authors>

<aname>Sukumar Yethadka</aname>
<email>sukumar@thinkapi.com</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

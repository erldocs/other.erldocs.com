<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>couch_connection (stock-bi-t3) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>couch_connection</h1>
<h2 class="modsummary">"Functions to connect to a specific instance of couch db
  used in the T3 BI project by group Prosperitas.".</h2>
<div class="description">
<p>"Functions to connect to a specific instance of couch db
  used in the T3 BI project by group Prosperitas."</p></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="store/1">store(IP::list(), Port::number(), Id::list(), Json::list()) -&gt; tuple()</h3>


<div class="description">

<p>"Stores a Json document to the database.
  IP: host adress of the server running couch db
  Port: Portnumber for couch db
  Id: Couch DB:s mandatory id. Must be unique.
  Json: The Json document to save.
  RETURNS: ok for any operation. Will be expanded to give error codes
  depeding on results in a later version.</p>
</div></div>
<div class="function">
<h3 id="store/1-1">store(IP::list(), Port::number(), Json::list()) -&gt; tuple()</h3>


<div class="description">

<p>
  Bulk stores a list of Json document to the database.
  IP: host adress of the server running couch db
  Port: Portnumber for couch db
  Json: A list of Json document to save.
  RETURNS: ok for any operation. Will be expanded to give error codes
  depeding on results in a later version.</p>
</div></div>
<div class="function">
<h3 id="get_current_rev/1">get_current_rev(IP::list(), Port::number(), Id::list()) -&gt; atom()</h3>


<div class="description">

<p>
  Gets the current revision number for a couch db document.
  IP: Hostname of the couch db server
  Port: Portnumber of the couch db server
  Id: Id of the document you want to get revision for.
  RETURN: A string containing the revision number or an error message
  Error messages are not handeled in a nice way for now but in later verisons
  the function will return usefull things.
  @ end</p>
</div></div>
<div class="function">
<h3 id="list_tickers/1">list_tickers(IP::list(), Port::number()) -&gt; [list()]</h3>


<div class="description">

<p>
  Lists all stock market tickers saved on the couch db in documents that
  contain the Json object CompanyData.
  IP: Hostname of the couch db server
  Port: Portnumber of the couch db server.
  RETURN: A list of strings containing all the saved tickers.</p>
</div></div>
<div class="function">
<h3 id="delete_document/1">delete_document(IP::list(), Port::number(), Doc_id::list(), Doc_rev::list()) -&gt; {atom(), list()}</h3>


<div class="description">

<p>
  This function deletes a specific doc from the prosperitas couch db at
  the given IP.
  Parameters:
  IP: Ip of server as string
  Port: port number as integer
  Doc_id: The id of the couch document to be deleted.
  Doc_rev: The currrent rev of the document to be deleted.
  RETURN: A tuple with the atom deleted and the id of the doc that was deleted.
  in case of the document not beeing deleted the function crashes.</p>
</div></div>
<div class="function">
<h3 id="delete_old/1">delete_old(IP::list(), Port::number(), Startkey::list(), Endkey::list()) -&gt; atom()</h3>


<div class="description">

<p>
  Deletes the old stock values. This is targeted to a recurring cleanout of
  the db at a given interval.
  Parameters:
  IP: The servers IP as a string
  Port: The port as an int
  Startkey: A string in the format "[yyyy-mm-dd]" denoting the date on the
  stockdata from when the removal should start
  Endkey: Astring in the same format as startkey but denoting the last date
  to be removed
  RETURN: The status from inet:stop. Crashes if the removal fails.</p>
</div></div></div>

<authors>

<aname>Einar Sundgren</aname>
<email>mail@einarsundgren.se</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

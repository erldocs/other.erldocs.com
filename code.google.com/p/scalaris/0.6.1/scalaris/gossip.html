<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>gossip (scalaris) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>gossip</h1>
<h2 class="modsummary">   Framework for estimating aggregated global properties using          
gossip techniques.</h2>
<div class="description">
<p>   Framework for estimating aggregated global properties using          
gossip techniques.</p>
 
   <p>Gossiping is organized in rounds. At the start of each round, a node's   
gossip process has to ask its dht_node for information about its state,   
i.e. its load and the IDs of itself and its predecessor. It will not   
participate in any state exchanges until this information has been   
received and postpone such messages, i.e. 'get_state', if received. All   
other messages, e.g. requests for estimated values, are either ignored   
(only applies to "gossip_trigger") or answered with information from the previous   
round, e.g. requests for (estimated) system properties.</p>
 
   <p>When these values are successfully integrated into the process state,   
and the node entered some round, it will continuously ask the cyclon   
process for a random node to exchange its state with and update the local   
estimates (the interval is defined in gossip_interval given by   
scalaris.cfg).</p>
 
   <p>New rounds are started by the leader which is identified as the node for
   which
   intervals:in(?RT:hash_key("0"), node_details:get(NodeDetails, my_range))
   is true. It will propagate its round with its state so that gossip
   processes of other nodes can join this round. Several parameters (added
   to scalaris.cfg) influence the decision about when to start a new round:
   </p><list>
    <item><p>gossip_max_triggers_per_round: a new round is started if this many
        triggers have been received during the round</p></item>
    <item><p>gossip_min_triggers_per_round: a new round is NOT started until this
        many triggers have been received during the round</p></item>
    <item><p>gossip_converge_avg_count_start_new_round: if the estimated values
        did not change by more than gossip_converge_avg_epsilon percent this
        many times, assume the values have converged and start a new round
    </p></item>
    <item><p>gossip_converge_avg_epsilon: (see
        gossip_converge_avg_count_start_new_round)</p></item>
   </list>
 
   <p>Each process stores the estimates of the current round (which might not
   have been converged yet) and the previous estimates. If another process
   asks for gossip's best values it will favor the previous values but return
   the current ones if they have not changes by more than
   gossip_converge_avg_epsilon percent gossip_converge_avg_count times.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-full_state_active">full_state_active() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{PreviousState :: <a href="#type-state" class="seealso">state()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CurrentState :: <a href="#type-state" class="seealso">state()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MessageQueue :: <a href="msg_queue.html#type-msg_queue" class="seealso">msg_queue:msg_queue()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TriggerState :: <a href="trigger.html#type-state" class="seealso">trigger:state()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Range :: <a href="intervals.html#type-interval" class="seealso">intervals:interval()</a>}</h3></div>
    <div class="type"><h3 id="type-full_state_inactive">full_state_inactive() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{uninit,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;QueuedMessages :: <a href="msg_queue.html#type-msg_queue" class="seealso">msg_queue:msg_queue()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TriggerState :: <a href="trigger.html#type-state" class="seealso">trigger:state()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PreviousState :: <a href="#type-state" class="seealso">state()</a>}</h3></div>
    <div class="type"><h3 id="type-message">message() = {gossip_trigger}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {get_node_details_response,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="node_details.html#type-node_details" class="seealso">node_details:node_details()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {update_range, NewRange :: <a href="intervals.html#type-interval" class="seealso">intervals:interval()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {get_state,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="comm.html#type-mypid" class="seealso">comm:mypid()</a>,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="gossip_state.html#type-values_internal" class="seealso">gossip_state:values_internal()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {get_state_response,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="gossip_state.html#type-values_internal" class="seealso">gossip_state:values_internal()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {cy_cache, RandomNodes :: [<a href="node.html#type-node_type" class="seealso">node:node_type()</a>]}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {get_values_all, SourcePid :: <a href="comm.html#type-erl_local_pid" class="seealso">comm:erl_local_pid()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {get_values_best,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SourcePid :: <a href="comm.html#type-erl_local_pid" class="seealso">comm:erl_local_pid()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {web_debug_info, Requestor :: <a href="comm.html#type-erl_local_pid" class="seealso">comm:erl_local_pid()</a>}</h3></div>
    <div class="type"><h3 id="type-state">state() = <a href="gossip_state.html#type-state" class="seealso">gossip_state:state()</a></h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="activate/1">activate(MyRange::interval() (see module intervals)) -&gt; ok</h3>


<div class="description">

<p>Activates the gossip process. If not activated, the gossip process will
       queue most messages without processing them.</p>
</div></div>
<div class="function">
<h3 id="deactivate/0">deactivate() -&gt; ok</h3>


<div class="description">

<p>Deactivates the gossip process.</p>
</div></div>
<div class="function">
<h3 id="start_link/1">start_link(DHTNodeGroup::groupname() (see module pid_groups)) -&gt; {ok, pid()}</h3>


<div class="description">

<p>Starts the gossip process, registers it with the process dictionary and
       returns its pid for use by a supervisor.</p>
</div></div>
<div class="function">
<h3 id="init/1">init(X1::[]) -&gt; full_state_inactive()</h3>


<div class="description">

<p>Initialises the module with an empty state.</p>
</div></div>
<div class="function">
<h3 id="on_inactive/1">on_inactive(Msg::message(), State::full_state_inactive()) -&gt; full_state_inactive()</h3>


<div class="description">

<p>Message handler during start up phase (will change to on_active/2 when a
       'activate_gossip' message is received). Queues getter-messages for
       faster startup of dependent processes.</p>
</div></div>
<div class="function">
<h3 id="on_active/1">on_active(Msg::message(), FullState::full_state_active()) -&gt; full_state_active()</h3>


<div class="description">

<p>Message handler when the process is activated.</p>
</div></div>
<div class="function">
<h3 id="rm_my_range_changed/1">rm_my_range_changed(OldNeighbors::neighborhood() (see module nodelist), NewNeighbors::neighborhood() (see module nodelist), Reason::reason() (see module rm_loop)) -&gt; boolean()</h3>


<div class="description">

<p>Checks whether the node's range has changed, i.e. either the node
       itself or its pred changed.</p>
</div></div>
<div class="function">
<h3 id="rm_send_new_range/1">rm_send_new_range(Subscriber::pid(), Tag::gossip, OldNeighbors::neighborhood() (see module nodelist), NewNeighbors::neighborhood() (see module nodelist)) -&gt; ok</h3>


<div class="description">

<p>Notifies the node's gossip process of a changed range.
       Used to subscribe to the ring maintenance.</p>
</div></div>
<div class="function">
<h3 id="check_config/0">check_config() -&gt; boolean()</h3>


<div class="description">

<p>Checks whether config parameters of the gossip process exist and are
       valid.</p>
</div></div></div>

<authors>

<aname>Nico Kruber</aname>
<email>kruber@zib.de</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>

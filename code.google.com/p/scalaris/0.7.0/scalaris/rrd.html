<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <title>rrd (scalaris) -  (Erlang Documentation)</title>
    <link href="/erldocs.css" type="text/css" rel="stylesheet"/>
    <link href="/search.xml" rel="search" type="application/opensearchdescription+xml" title="erldocs"/>

    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-54292016-1', 'auto');
      ga('send', 'pageview');
    </script>
  </head>

  <body>
    <div id="sidebar" class="inactive">
      <input type="text" id="search" autocomplete="off" placeholder="press TAB to search"/>
      <ul id="results"> </ul>
    </div>

    <div id="content">
      <div style="margin:0px; padding:10px 20px;">
        

<h1>rrd</h1>
<h2 class="modsummary">   Round-Robin-Database (RRD) clone.</h2>
<div class="description">
<p>   Round-Robin-Database (RRD) clone.</p></div>
<div id="types" class="category"><h4><a href="#types">Types</a></h4><hr />
    <div class="type"><h3 id="type-counter_type">counter_type() = number()</h3></div>
    <div class="type"><h3 id="type-data_type">data_type() = <a href="#type-gauge_type" class="seealso">gauge_type()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#type-counter_type" class="seealso">counter_type()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#type-histogram_type" class="seealso">histogram_type()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#type-timing_type" class="seealso">timing_type()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="#type-event_type" class="seealso">event_type</a>(term())</h3></div>
    <div class="type"><h3 id="type-dump_fun_existing">dump_fun_existing/0</h3></div>
    <div class="type"><h3 id="type-dump_fun_nonexisting">dump_fun_nonexisting/0</h3></div>
    <div class="type"><h3 id="type-erlang_timestamp">erlang_timestamp() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{MegaSecs :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Secs :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MicroSecs :: integer() >= 0}</h3></div>
    <div class="type"><h3 id="type-event_type">event_type(T) = [{internal_time(), T}]</h3></div>
    <div class="type"><h3 id="type-gauge_type">gauge_type() = number()</h3></div>
    <div class="type"><h3 id="type-histogram_type">histogram_type() = <a href="histogram.html#type-histogram" class="seealso">histogram:histogram()</a><br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a href="histogram_rt.html#type-histogram" class="seealso">histogram_rt:histogram()</a></h3></div>
    <div class="type"><h3 id="type-internal_time">internal_time() = integer() &gt;= 0</h3></div>
    <div class="type"><h3 id="type-rrd">rrd()</h3></div>
    <div class="type"><h3 id="type-time">time() = <a href="#type-erlang_timestamp" class="seealso">erlang_timestamp()</a></h3></div>
    <div class="type"><h3 id="type-timeseries_type">timeseries_type() = gauge<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| counter<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| event<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {histogram, Size :: integer() >= 0}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {histogram_rt,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Size :: integer() >= 0,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BaseKey :: <a href="histogram_rt.html#type-base_key" class="seealso">histogram_rt:base_key()</a>}<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| {timing | timing_with_hist,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;us | ms | s | count | percent}</h3></div>
    <div class="type"><h3 id="type-timespan">timespan() = integer() &gt;= 1</h3></div>
    <div class="type"><h3 id="type-timing_type">timing_type() = <br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{Sum :: number(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Sum2 :: number(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Count :: integer() >= 1,<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Min :: number(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Max :: number(),<br />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Hist :: <a href="histogram.html#type-histogram" class="seealso">histogram:histogram()</a>}</h3></div>
    <div class="type"><h3 id="type-update_fun">update_fun/0</h3></div></div>
<div id="functions" class="category"><h4><a href="#functions">Functions</a></h4><hr />
<div class="function">
<h3 id="create/1">create(SlotLength::timespan(), Count::pos_integer(), Type::timeseries_type()) -&gt; rrd()</h3>


<div class="description">

<p>Creates a new rrd() record. SlotLength in microseconds, Count is the
       number of time slots to keep, type the type of rrd to create.</p>
</div></div>
<div class="function">
<h3 id="add_now/1">add_now(Value::term(), DB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Note: gauge, counter and timing types accept only number() as value, event
      accepts any value.</p>
</div></div>
<div class="function">
<h3 id="check_timeslot_now/1">check_timeslot_now(DB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Advances the stored timeslots (if necessary) to the current time.</p>
</div></div>
<div class="function">
<h3 id="dump/1">dump(DB::rrd()) -&gt; [{From::time(), To::time(), data_type()}]</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="dump_with/1">dump_with(DB::rrd(), FunExist::dump_fun_existing(T)) -&gt; [T]</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="dump_with/1-1">dump_with(DB::rrd(), FunExist::dump_fun_existing(T), FunNotExist::dump_fun_nonexisting(U)) -&gt; [T | U]</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="merge/1">merge(DB1::rrd(), DB2::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Merges any value of DB2 which is in the current or a future time slot
       of DB1 into it and returns a new rrd.
       Note: gauge rrd values will only be updated if no previous value
       existed since we can not determine which value is newer.
       For any value from DB2 uses (StartTime + EndTime) div 2 as the time for
       adding it.</p>
</div></div>
<div class="function">
<h3 id="create/1-1">create(SlotLength::timespan(), Count::pos_integer(), Type::timeseries_type(), StartTime::time() | internal_time()) -&gt; rrd()</h3>


<div class="description">

<p>StepSize in milliseconds</p>
</div></div>
<div class="function">
<h3 id="add/1">add(Time::time() | internal_time(), Value::term(), DB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Note: gauge, counter and timing types accept only number() as value, event
      accepts any value.</p>
</div></div>
<div class="function">
<h3 id="check_timeslot/1">check_timeslot(Time::time() | internal_time(), DB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Advances the stored timeslots (if necessary) to the given time.</p>
</div></div>
<div class="function">
<h3 id="add_with/1">add_with(Time::internal_time(), NewV, DB::rrd(), F::update_fun(data_type(), NewV)) -&gt; rrd()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_slot_start/1">get_slot_start(SlotIdx::integer(), DB::rrd()) -&gt; internal_time()</h3>


<div class="description">

<p>Gets the start of the given slot.
       Some examples of values for SlotIdx:
       previous slot: -1, current slot: 0, next slot: 1</p>
</div></div>
<div class="function">
<h3 id="reduce_timeslots/1">reduce_timeslots(SlotCount::pos_integer(), DB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Reduces the number of time slots.</p>
</div></div>
<div class="function">
<h3 id="add_nonexisting_timeslots/1">add_nonexisting_timeslots(DB::rrd(), OtherDB::rrd()) -&gt; rrd()</h3>


<div class="description">

<p>Adds to DB all non-existing time slots from OtherDB that are newer than
       or are in the current time slot of DB. Both structures must have the
       same type and the same slot borders!</p>
</div></div>
<div class="function">
<h3 id="get_slot_length/1">get_slot_length(DB::rrd()) -&gt; timespan()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_type/1">get_type(DB::rrd()) -&gt; timeseries_type()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_current_time/1">get_current_time(DB::rrd()) -&gt; internal_time()</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="get_value/1">get_value(DB::rrd(), Time::time() | internal_time()) -&gt; undefined | data_type()</h3>


<div class="description">

<p>Gets the value at the given time or 'undefined' if there is no value.</p>
</div></div>
<div class="function">
<h3 id="get_value_by_offset/1">get_value_by_offset(DB::rrd(), SlotOffset::non_neg_integer()) -&gt; undefined | data_type()</h3>


<div class="description">

<p>If SlotOffset is 0, gets the current value, otherwise the value in a
       previous slot the given offset away from the current one.
       May return 'undefined' if there is no value.</p>
</div></div>
<div class="function">
<h3 id="timing_with_hist_merge_fun/1">timing_with_hist_merge_fun(Time::internal_time(), Old::timing_type() | undefined, New::timing_type() | undefined) -&gt; timing_type() | undefined</h3>


<div class="description">
 </div></div>
<div class="function">
<h3 id="check_config/0">check_config() -&gt; boolean()</h3>


<div class="description">

<p>Checks whether config parameters of the rrd module exist and are
       valid.</p>
</div></div></div>

<authors>

<aname>Thorsten Schuett</aname>
<email>schuett@zib.de</email></authors>
      </div>
  </div>

    <script type="text/javascript">
      var CURRENT_ROOT = "../";
    </script>

    <script type="text/javascript" src="/jquery.js"></script>
    <script type="text/javascript" src="../erldocs_index.js"></script>
    <script type="text/javascript" src="/erldocs.js"></script>
  </body>
</html>
